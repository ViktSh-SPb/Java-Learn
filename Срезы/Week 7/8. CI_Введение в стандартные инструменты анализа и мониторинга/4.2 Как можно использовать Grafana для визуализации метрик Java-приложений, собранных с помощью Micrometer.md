–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **Grafana** –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å **Micrometer** ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö Spring Boot –ø—Ä–æ–µ–∫—Ç–∞—Ö.
## 1Ô∏è‚É£ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Micrometer –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
–ï—Å–ª–∏ —É –≤–∞—Å Spring Boot:
```xml
<!-- Maven -->
<dependency>
    <groupId>io.micrometer</groupId>
    <artifactId>micrometer-registry-prometheus</artifactId>
</dependency>
```
```gradle
// Gradle
implementation 'io.micrometer:micrometer-registry-prometheus'
```
- Micrometer –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ JVM, Spring Boot Actuator, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏.
- Prometheus ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫.
## 2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Spring Boot Actuator
–í `application.yml`:
```yaml
management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
  metrics:
    enable:
      all: true
```
- `/actuator/prometheus` ‚Üí endpoint, –∫–æ—Ç–æ—Ä—ã–π Prometheus –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫.
## 3Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Prometheus
1. –î–æ–±–∞–≤—å—Ç–µ job –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ `prometheus.yml`:
```yaml
scrape_configs:
  - job_name: 'my-java-app'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['localhost:8080']
```
- Prometheus —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Micrometer.
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Prometheus –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–Ω—Ñ–∏–≥–∞:
```bash
docker restart prometheus
```
–∏–ª–∏ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å—ã systemd/k8s.
## 4Ô∏è‚É£ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Grafana –∫ Prometheus
1. –í Grafana –∑–∞–π–¥–∏—Ç–µ –≤ **Configuration ‚Üí Data Sources ‚Üí Add data source ‚Üí Prometheus**.
2. –í–≤–µ–¥–∏—Ç–µ URL Prometheus (`http://localhost:9090`) –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ.
## 5Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤
- –í Grafana –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å **–ø–∞–Ω–µ–ª–∏ (Panels)** —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ —Å—á–µ—Ç—á–∏–∫–∞–º–∏.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **PromQL** –¥–ª—è –≤—ã–±–æ—Ä–∫–∏ –º–µ—Ç—Ä–∏–∫.
    - –ü—Ä–∏–º–µ—Ä—ã –º–µ—Ç—Ä–∏–∫ Micrometer:
        - `jvm_memory_used_bytes` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ JVM
        - `jvm_gc_pause_seconds_sum` ‚Äî —Å—É–º–º–∞—Ä–Ω–æ–µ –≤—Ä–µ–º—è GC
        - `http_server_requests_seconds_count` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
- –ú–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ **Spring Boot / JVM Dashboards** —Å [Grafana Dashboards](https://grafana.com/grafana/dashboards/).
## 6Ô∏è‚É£ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
- Micrometer –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ –º–µ—Ç—Ä–∏–∫–∏ –≤ –∫–æ–¥–µ:
```java
@Autowired
MeterRegistry meterRegistry;

public void processRequest() {
    meterRegistry.counter("requests.processed", "type", "important").increment();
}
```
- –≠—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏ —Å—Ä–∞–∑—É –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ `/actuator/prometheus` –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ Grafana.
## üîπ –†–µ–∑—é–º–µ
1. **Micrometer** —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
2. **Spring Boot Actuator** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç `/prometheus` endpoint.
3. **Prometheus** —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
4. **Grafana** –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç —ç—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏, —Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫–∏, –∞–ª–µ—Ä—Ç—ã –∏ –¥–∞—à–±–æ—Ä–¥—ã.