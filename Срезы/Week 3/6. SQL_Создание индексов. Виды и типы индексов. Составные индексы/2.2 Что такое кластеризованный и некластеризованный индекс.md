В реляционных базах данных существуют два основных типа индексов: **кластеризованный (clustered)** и **некластеризованный (non-clustered)**. Они различаются тем, **как физически хранятся данные и индексные записи**.
### 🔹 1. **Кластеризованный индекс (Clustered Index)**
- **Что делает:** Определяет **физический порядок хранения строк таблицы** на диске по ключу индекса.
- **Особенность:** У таблицы может быть **только один кластеризованный индекс**, потому что строки физически могут быть отсортированы только по одному критерию.
- **Пример:** Обычно кластеризованный индекс создаётся на `PRIMARY KEY`.
**Пример в SQL (MySQL / SQL Server):**
```sql
CREATE TABLE employees (
    id INT PRIMARY KEY,  -- создаёт кластеризованный индекс
    name VARCHAR(100),
    salary DECIMAL(10,2)
);
```
**Плюсы:**
- Быстрая выборка по диапазону (`BETWEEN`, `>=`, `<=`).
- Улучшает производительность сортировки и агрегатных функций по ключу индекса.
**Минусы:**
- Замедляет вставку и обновление, т.к. строки могут перестраиваться для сохранения порядка.
### 🔹 2. **Некластеризованный индекс (Non-Clustered Index)**
- **Что делает:** Создаёт отдельную структуру (обычно B-Tree), которая хранит **ключи и указатели на строки таблицы**, но **не меняет физический порядок строк**.
- **Особенность:** Таблица может иметь **несколько некластеризованных индексов**.
- **Пример:** Индекс по столбцу `name` для ускорения поиска по имени.
**Пример в SQL:**
```sql
CREATE INDEX idx_name ON employees(name);
```
**Плюсы:**
- Можно создавать несколько индексов на разные столбцы.
- Улучшает поиск по часто используемым полям без изменения физического порядка строк.
**Минусы:**
- Для чтения индекс ускоряет доступ, но обновление и вставка требуют поддержки индекса.
- При больших таблицах может занимать значительное место на диске.
### 📊 Сравнение

|Характеристика|Кластеризованный индекс|Некластеризованный индекс|
|---|---|---|
|Порядок строк|Физически сортирует таблицу|Строки остаются в исходном порядке|
|Количество на таблицу|Только 1|Несколько|
|Быстрота поиска|Отлично для диапазонов и сортировки|Хорошо для отдельных ключей|
|Влияние на вставку/обновление|Высокое|Среднее|
|Хранение|В таблице|Отдельная структура|
✅ **Итог:**
- **Кластеризованный индекс** — определяет **физический порядок таблицы**, оптимален для диапазонов и сортировок.
- **Некластеризованный индекс** — отдельная структура для быстрого поиска по ключам, таблица остаётся в обычном порядке.