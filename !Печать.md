–î–∞–≤–∞–π –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑–±–µ—Ä—ë–º **—É—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ –≤ SQL**: —á—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ, –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã, –∫–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–∞—é—Ç –∏ –∫–∞–∫–∏–µ —Å–æ–∑–¥–∞—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.

---

## üî∑ –ß—Ç–æ —Ç–∞–∫–æ–µ —É—Ä–æ–≤–µ–Ω—å –∏–∑–æ–ª—è—Ü–∏–∏?

–í –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö —á–∞—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø** –∫ –¥–∞–Ω–Ω—ã–º: –æ–¥–Ω–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —á–∏—Ç–∞—é—Ç –¥–∞–Ω–Ω—ã–µ, –¥—Ä—É–≥–∏–µ ‚Äî –∏–∑–º–µ–Ω—è—é—Ç. –ß—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –æ—à–∏–±–∫–∏, –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –Ω—É–∂–Ω—ã –º–µ—Ö–∞–Ω–∏–∑–º—ã **–∏–∑–æ–ª—è—Ü–∏–∏** —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

–£—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, **–∫–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Å–¥–µ–ª–∞–Ω–Ω—ã–µ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π, –º–æ–≥—É—Ç –±—ã—Ç—å –≤–∏–¥–Ω—ã –¥—Ä—É–≥–∏–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º –¥–æ –∏—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è** (`COMMIT`/`ROLLBACK`).

---

## üî∑ –ü—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

–ü—Ä–µ–∂–¥–µ —á–µ–º –æ–ø–∏—Å—ã–≤–∞—Ç—å —É—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏, –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö **–∞–Ω–æ–º–∞–ª–∏–∏ (–æ—à–∏–±–∫–∏)**, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å:

|–ê–Ω–æ–º–∞–ª–∏—è|–û–ø–∏—Å–∞–Ω–∏–µ|
|---|---|
|**–ì—Ä—è–∑–Ω–æ–µ —á—Ç–µ–Ω–∏–µ (dirty read)**|–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã, –Ω–æ –µ—â—ë –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –¥—Ä—É–≥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π. –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–º–µ–Ω–µ–Ω—ã.|
|**–ù–µ–ø–æ–≤—Ç–æ—Ä—è–µ–º–æ–µ —á—Ç–µ–Ω–∏–µ (non-repeatable read)**|–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–∞—ë—Ç —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, —Ç.–∫. –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –µ—ë –∏–∑–º–µ–Ω–∏–ª–∞.|
|**–§–∞–Ω—Ç–æ–º–Ω–æ–µ —á—Ç–µ–Ω–∏–µ (phantom read)**|–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ —É—Å–ª–æ–≤–∏–µ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –¥—Ä—É–≥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π.|

---

## üî∑ –£—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ –ø–æ ANSI SQL

### üîπ 1. **Read Uncommitted** ‚Äî –ß—Ç–µ–Ω–∏–µ –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

- **–†–∞–∑—Ä–µ—à–∞–µ—Ç:** –≥—Ä—è–∑–Ω—ã–µ, –Ω–µ–ø–æ–≤—Ç–æ—Ä—è–µ–º—ã–µ –∏ —Ñ–∞–Ω—Ç–æ–º–Ω—ã–µ —á—Ç–µ–Ω–∏—è.
    
- **–ü—Ä–∏–º–µ—Ä:**
    
    - T1 –æ–±–Ω–æ–≤–ª—è–µ—Ç `–±–∞–ª–∞–Ω—Å = 5000 ‚Üí 0`, –Ω–æ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç.
        
    - T2 —á–∏—Ç–∞–µ—Ç `–±–∞–ª–∞–Ω—Å = 0`, —Ö–æ—Ç—è T1 –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å rollback.
        
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ø–æ—á—Ç–∏ –Ω–∏–∫–æ–≥–¥–∞ –≤ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.
    
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.
    
- **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:** –Ω–∏–∫–∞–∫–æ–π –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏.
    

---

### üîπ 2. **Read Committed** ‚Äî –ß—Ç–µ–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

- **–ó–∞–ø—Ä–µ—â–∞–µ—Ç:** –≥—Ä—è–∑–Ω—ã–µ —á—Ç–µ–Ω–∏—è.
    
- **–†–∞–∑—Ä–µ—à–∞–µ—Ç:** –Ω–µ–ø–æ–≤—Ç–æ—Ä—è–µ–º—ã–µ –∏ —Ñ–∞–Ω—Ç–æ–º–Ω—ã–µ —á—Ç–µ–Ω–∏—è.
    
- **–ü—Ä–∏–º–µ—Ä:**
    
    - T1 —á–∏—Ç–∞–µ—Ç —Å—Ç—Ä–æ–∫—É A ‚Üí –≤–∏–¥–∏—Ç `x = 100`
        
    - T2 –∏–∑–º–µ–Ω—è–µ—Ç `x = 200`, –∫–æ–º–º–∏—Ç–∏—Ç
        
    - T1 —Å–Ω–æ–≤–∞ —á–∏—Ç–∞–µ—Ç —Å—Ç—Ä–æ–∫—É A ‚Üí –≤–∏–¥–∏—Ç `x = 200`
        
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ Oracle, PostgreSQL, SQL Server.
    
- **–ö–æ–º–ø—Ä–æ–º–∏—Å—Å:** –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ, —á–µ–º Read Uncommitted, –Ω–æ –Ω–µ –∏–¥–µ–∞–ª—å–Ω–æ.
    

---

### üîπ 3. **Repeatable Read** ‚Äî –ü–æ–≤—Ç–æ—Ä—è–µ–º–æ–µ —á—Ç–µ–Ω–∏–µ

- **–ó–∞–ø—Ä–µ—â–∞–µ—Ç:** –≥—Ä—è–∑–Ω—ã–µ –∏ –Ω–µ–ø–æ–≤—Ç–æ—Ä—è–µ–º—ã–µ —á—Ç–µ–Ω–∏—è.
    
- **–†–∞–∑—Ä–µ—à–∞–µ—Ç:** —Ñ–∞–Ω—Ç–æ–º–Ω—ã–µ —á—Ç–µ–Ω–∏—è.
    
- **–ü—Ä–∏–º–µ—Ä:**
    
    - T1 —á–∏—Ç–∞–µ—Ç —Å—Ç—Ä–æ–∫—É A ‚Üí `x = 100`
        
    - T2 –ø—ã—Ç–∞–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å A ‚Üí –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –¥–æ –∫–æ–Ω—Ü–∞ T1
        
    - –ù–æ –µ—Å–ª–∏ T2 –≤—Å—Ç–∞–≤–∏—Ç **–Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É**, –∫–æ—Ç–æ—Ä–∞—è —Ç–æ–∂–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –ø–æ–¥ WHERE T1 ‚Äî –æ–Ω–∞ –º–æ–∂–µ—Ç "–≤—Å–ø–ª—ã—Ç—å" –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ.
        
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:** MySQL (InnoDB) –∫–∞–∫ —É—Ä–æ–≤–µ–Ω—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
    
- **–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:** –¥–∞—ë—Ç —Ö–æ—Ä–æ—à—É—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –±–µ–∑ –∂—ë—Å—Ç–∫–æ–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
    

---

### üîπ 4. **Serializable** ‚Äî –ü–æ–ª–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è

- **–ó–∞–ø—Ä–µ—â–∞–µ—Ç:** –≤—Å–µ —Ç—Ä–∏ –∞–Ω–æ–º–∞–ª–∏–∏.
    
- **–ò–º–∏—Ç–∞—Ü–∏—è:** —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ –æ—á–µ—Ä–µ–¥–∏.
    
- **–ú–µ—Ö–∞–Ω–∏–∑–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
    
    - –õ–∏–±–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏–π (`range locks`)
        
    - –õ–∏–±–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (–≤ PostgreSQL ‚Äî MVCC —Å —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º).
        
- **–ü–ª—é—Å—ã:** –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å.
    
- **–ú–∏–Ω—É—Å—ã:** —Å–∞–º–∞—è –º–µ–¥–ª–µ–Ω–Ω–∞—è, —á–∞—Å—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º –∏–ª–∏ –æ—Ç–∫–∞—Ç–∞–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
    

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∞–Ω–æ–º–∞–ª–∏–π

|–£—Ä–æ–≤–µ–Ω—å|Dirty Read|Non-Repeatable Read|Phantom Read|
|---|---|---|---|
|Read Uncommitted|‚úÖ –î–∞|‚úÖ –î–∞|‚úÖ –î–∞|
|Read Committed|‚ùå –ù–µ—Ç|‚úÖ –î–∞|‚úÖ –î–∞|
|Repeatable Read|‚ùå –ù–µ—Ç|‚ùå –ù–µ—Ç|‚úÖ –î–∞|
|Serializable|‚ùå –ù–µ—Ç|‚ùå –ù–µ—Ç|‚ùå –ù–µ—Ç|

---

## üîß –ö–∞–∫ –∑–∞–¥–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –∏–∑–æ–ª—è—Ü–∏–∏?

–ü—Ä–∏–º–µ—Ä –≤ PostgreSQL / MySQL:

```sql
SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;
BEGIN;
-- –≤–∞—à–∏ SQL-–∑–∞–ø—Ä–æ—Å—ã
COMMIT;
```

---

## üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –°–£–ë–î

|–°–£–ë–î|–£—Ä–æ–≤–µ–Ω—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é|–ü—Ä–∏–º–µ—á–∞–Ω–∏—è|
|---|---|---|
|**PostgreSQL**|Read Committed –∏–ª–∏ Serializable|–ò—Å–ø–æ–ª—å–∑—É–µ—Ç **MVCC**, —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —Ñ–∞–Ω—Ç–æ–º–∞–º–∏|
|**MySQL (InnoDB)**|Repeatable Read|MVCC; —Ñ–∞–Ω—Ç–æ–º—ã –≤–æ–∑–º–æ–∂–Ω—ã, –Ω–æ —É–ø—Ä–∞–≤–ª—è–µ–º—ã|
|**SQL Server**|Read Committed|–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É—Ä–æ–≤–Ω–∏ Snapshot –∏ Serializable|
|**Oracle**|Read Committed|–†–µ–∞–ª–∏–∑—É–µ—Ç —á–µ—Ä–µ–∑ **–Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–µ —á—Ç–µ–Ω–∏–µ**|

---

## üìé –í—ã–≤–æ–¥

- –ß–µ–º **–≤—ã—à–µ —É—Ä–æ–≤–µ–Ω—å –∏–∑–æ–ª—è—Ü–∏–∏**, —Ç–µ–º **–º–µ–Ω—å—à–µ –∞–Ω–æ–º–∞–ª–∏–π**, –Ω–æ –∏ **–Ω–∏–∂–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**.
    
- –í **OLTP-—Å–∏—Å—Ç–µ–º–∞—Ö** (–±–∞–Ω–∫–∏, —Ñ–∏–Ω–∞–Ω—Å—ã) –≤–∞–∂–Ω–∞ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å ‚Üí `Repeatable Read` –∏–ª–∏ `Serializable`.
    
- –í **–∞–Ω–∞–ª–∏—Ç–∏–∫–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç—á—ë—Ç—ã) —á–∞—Å—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Read Committed`.
    

---

–•–æ—á–µ—à—å —è –ø–æ–∫–∞–∂—É –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ, –∫–∞–∫ —ç—Ç–∏ —É—Ä–æ–≤–Ω–∏ –≤–µ–¥—É—Ç —Å–µ–±—è –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –¥–≤—É—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π?