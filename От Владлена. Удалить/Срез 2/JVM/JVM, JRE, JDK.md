### Что такое JVM?

JVM (Java Virtual Machine) — это виртуальная машина, которая обеспечивает выполнение Java-программ. Она интерпретирует байт-код, сгенерированный компилятором Java, и обеспечивает платформонезависимость, управляет памятью, потоками и другими системными ресурсами.

### В чем разница между JDK и JRE?

- JDK (Java Development Kit) — комплект для разработки Java-приложений. включает компилятор (`javac`), инструменты для отладки, документации и JVM.
- JRE (Java Runtime Environment) — среда выполнения Java-программ. содержит JVM и необходимые библиотеки для запуска Java-приложений, но не включает инструменты разработки.

Итак:

- JDK — для разработки и запуска.
- JRE — только для запуска.

### Какие основные компоненты JVM вы знаете?

- Class Loader (Загрузчик классов) — отвечает за загрузку классов в память.
- Runtime Data Areas (Области данных во время выполнения):
    - Method Area — хранит метаданные классов, статические переменные.
    - Heap — область для динамически выделяемых объектов.
    - Stack — хранит кадры методов, локальные переменные, операнды.
    - Program Counter Register (PC Register) — указывает текущую инструкцию.
    - Native Method Stack — для нативных методов (написанных на других языках).
- Execution Engine (Исполнительный механизм) — интерпретатор байт-кода или JIT-компилятор.
- Native Interface & Libraries — взаимодействие с нативным кодом.

### Как JVM выполняет Java-программу?

1. Компилятор Java (`javac`) преобразует исходный код в байт-код (.class файлы).
2. JVM загружает класс через Class Loader.
3. Загрузка сопровождается проверкой, подготовкой и разрешением ссылок.
4. JVM интерпретирует байт-код или использует JIT-компиляцию для ускорения выполнения.
5. Во время выполнения JVM управляет памятью, сборщиком мусора и потоками.

### Какие задачи выполняет сборщик мусора в JVM?

- Автоматически освобождает память от объектов, которые больше не используются.
- Предотвращает утечки памяти.
- Оптимизирует использование памяти для повышения производительности.
- Обеспечивает автоматическую очистку кучи без вмешательства программиста.

### Какие типы сборщиков мусора вы знаете в JVM?

- Serial GC — однопоточный сборщик, подходит для небольших приложений или однопоточных сред.
- Parallel GC (Throughput Collector) — многопоточный сборщик, ориентирован на максимальную пропускную способность.
- Concurrent Mark Sweep (CMS) — минимальное паузы при сборке мусора за счет параллельных фаз.
- G1 Garbage Collector — разделяет кучу на регионы, обеспечивает предсказуемые паузы и хорошую масштабируемость.
- ZGC и Shenandoah — низкопауза сборщики мусора для очень больших heap.

### Опишите процесс загрузки классов в JVM

1. Loading (Загрузка): класс загружается из файла `.class` или другого источника через Class Loader.
2. Linking (Связывание):
    - _Verification_ — проверка корректности байт-кода.
    - _Preparation_ — выделение памяти под статические переменные и их начальные значения.
    - _Resolution_ — разрешение ссылок на другие классы/методы/поля.
3. Initialization (Инициализация): выполнение статических блоков и присвоение начальных значений статическим переменным.

Процесс происходит при первом обращении к классу или явно через вызов `Class.forName()`.

### Какие особенности HotSpot JVM вы можете назвать?

- Использует JIT-компиляцию: динамически компилирует часто исполняемый байт-код в нативный машинный код для повышения скорости выполнения.
- Поддержка различных режимов сборки мусора: G1, CMS, ZGC и др.
- Адаптивное управление памятью и оптимизация исполнения во время работы программы.
- Встроенные профилировщики и инструменты мониторинга (`jvisualvm`, `jconsole`).
- Поддержка многопоточности и параллельных вычислений.

### Как JVM управляет памятью, включая стек и кучу?

- Heap (Куча): область динамического выделения объектов; управляется сборщиком мусора. Все объекты создаются здесь.
    
- Stack: каждый поток имеет свой стек с кадрами методов; содержит локальные переменные, параметры методов и операнды. Стек работает по принципу LIFO.
    
- Method Area: хранит метаданные классов, статические переменные.
    
- PC Register: указывает текущую инструкцию метода.
    

JVM автоматически управляет этими областями:

- Объекты создаются в куче;
- Локальные переменные хранятся в стеке;
- Сборщик мусора периодически очищает неиспользуемые объекты из кучи;
- Стек очищается при завершении метода или потока.