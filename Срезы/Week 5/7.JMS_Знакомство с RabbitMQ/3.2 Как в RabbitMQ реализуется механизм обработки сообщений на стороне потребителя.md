–ú–µ—Ö–∞–Ω–∏–∑–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è –≤ **RabbitMQ** —Å—Ç—Ä–æ–∏—Ç—Å—è –≤–æ–∫—Ä—É–≥ **–æ—á–µ—Ä–µ–¥–µ–π –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (acknowledgements)**. –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º –ø–æ–¥—Ä–æ–±–Ω–æ, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.
## 1Ô∏è‚É£ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ—á–µ—Ä–µ–¥—å
- **Consumer** –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—á–µ—Ä–µ–¥—å (`queue`) –∏ –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è.
- –ü–æ–¥–ø–∏—Å–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π** (`autoAck`) –∏–ª–∏ **—Ä—É—á–Ω–æ–π** (explicit ack).
–ü—Ä–∏–º–µ—Ä –Ω–∞ Java (Spring AMQP):
```java
@RabbitListener(queues = "orders")
public void receiveOrder(String message) {
    System.out.println("Received: " + message);
}
```
- –ö–∞–∂–¥—ã–π consumer –ø–æ–ª—É—á–∞–µ—Ç **—Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –º–µ—Ä–µ –∏—Ö –ø–æ—è–≤–ª–µ–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥–∏**.
- –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ consumers –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ –æ–¥–Ω—É –æ—á–µ—Ä–µ–¥—å, RabbitMQ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è **round-robin**, —Ç.–µ. –ø–æ –æ–¥–Ω–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é –∫–∞–∂–¥–æ–º—É.
## 2Ô∏è‚É£ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è, consumer –º–æ–∂–µ—Ç:
1. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–∫–∞–∑, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å email).
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É—Å–ø–µ—à–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É RabbitMQ (`ack`).
3. –ü—Ä–∏ —Å–±–æ–µ –º–æ–∂–µ—Ç:
    - –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Üí RabbitMQ –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∏—Ç –µ–≥–æ –¥—Ä—É–≥–æ–º—É consumer;
    - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Dead Letter Exchange (DLX)** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–µ—É–¥–∞—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
## 3Ô∏è‚É£ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (Acknowledgements)
### –í–∞—Ä–∏–∞–Ω—Ç—ã:
1. **Auto Ack (`autoAck=true`)**
    - –°–æ–æ–±—â–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∞–≤–∫–∏.
    - –†–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –µ—Å–ª–∏ consumer —É–ø–∞–¥—ë—Ç –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.
2. **Manual Ack (`autoAck=false`)**
    - Consumer —Å–∞–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —É—Å–ø–µ—à–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É:
        ```java
        channel.basicAck(deliveryTag, false);
        ```
    - –ï—Å–ª–∏ consumer –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª ack ‚Äî RabbitMQ **–ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –¥—Ä—É–≥–æ–º—É consumer**.
## 4Ô∏è‚É£ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ QoS
- RabbitMQ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ **–Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π**, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∞–µ—Ç consumer:
    ```java
    channel.basicQos(10);
    ```
- –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ consumer –ø–æ–ª—É—á–∏—Ç –Ω–µ –±–æ–ª–µ–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
- –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ ack ‚Üí –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
- –ü–æ–º–æ–≥–∞–µ—Ç **–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É** –∏ –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å consumer.
## 5Ô∏è‚É£ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –°–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å:
    - –º–æ–∂–Ω–æ **–ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å**;
    - –º–æ–∂–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤ **DLX (Dead Letter Queue)** –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞;
    - –º–æ–∂–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã.
## 6Ô∏è‚É£ –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è
```
Queue "orders" ‚Üí Consumer
          ‚îú‚îÄ –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
          ‚îú‚îÄ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
          ‚îú‚îÄ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç ack (—É—Å–ø–µ—Ö)
          ‚îî‚îÄ –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Üí message –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ DLQ –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å
```
## üîπ –ò—Ç–æ–≥
–ú–µ—Ö–∞–Ω–∏–∑–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è –≤ RabbitMQ —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞:
1. **–ü–æ–¥–ø–∏—Å–∫–µ –Ω–∞ –æ—á–µ—Ä–µ–¥—å** –∏ –¥–æ—Å—Ç–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π.
2. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ** —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (QoS).
3. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è—Ö (ack)** –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –Ω–∞–¥–µ–∂–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏.
4. **–û–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫** —á–µ—Ä–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É –∏–ª–∏ Dead Letter Queue.
> –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **—É—Å—Ç–æ–π—á–∏–≤—É—é –∏ –Ω–∞–¥–µ–∂–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π**, –ø–æ–∑–≤–æ–ª—è—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ.