### 1. Что такое SQL?

SQL (Structured Query Language) — это язык структурированных запросов, предназначенный для управления и работы с реляционными базами данных. Он позволяет создавать, изменять, извлекать и управлять данными и структурами данных.

---

### 2. Какие операции можно выполнять с помощью DML?

DML (Data Manipulation Language) — язык манипуляции данными. Основные операции:

- `SELECT` — извлечение данных
- `INSERT` — добавление новых записей
- `UPDATE` — изменение существующих данных
- `DELETE` — удаление данных

Эти операции позволяют работать с содержимым таблиц без изменения их структуры.

---

### 3. Чем отличается DDL от DML?

- DDL (Data Definition Language) — язык определения структуры базы данных: создание, изменение и удаление объектов базы (таблиц, индексов, схем). Примеры: `CREATE`, `ALTER`, `DROP`.
- DML — язык работы с данными внутри объектов: вставка, обновление, удаление, выборка данных.

Краткое отличие:  
_DDL управляет структурой базы данных; DML управляет содержимым таблиц._

---

### 4. Как можно изменить структуру таблицы, используя DDL?

Для изменения структуры таблицы используют команды:

- `ALTER TABLE` — добавление, удаление или изменение столбцов и ограничений.

Пример:

```sql
-- Добавить новый столбец
ALTER TABLE employees ADD COLUMN salary DECIMAL(10,2);

-- Изменить тип столбца
ALTER TABLE employees ALTER COLUMN name VARCHAR(100);

-- Удалить столбец
ALTER TABLE employees DROP COLUMN age;
```

---

### 5. Приведите пример команды DCL.

DCL (Data Control Language) управляет правами доступа и безопасностью.

Пример:


```sql
-- Назначить пользователю права на таблицу
GRANT SELECT, INSERT ON employees TO user1;

-- Ограничить права пользователя
REVOKE DELETE ON employees FROM user1;
```

---

### 6. Какие транзакции поддерживает TCL и как их использовать?

TCL (Transaction Control Language) управляет транзакциями:

- `COMMIT` — подтверждение изменений
- `ROLLBACK` — откат изменений
- `SAVEPOINT` — установка точки сохранения внутри транзакции

Пример использования:


```sql
BEGIN TRANSACTION;
UPDATE accounts SET balance = balance - 100 WHERE account_id = 1;
UPDATE accounts SET balance = balance + 100 WHERE account_id = 2;

-- Если все хорошо:
COMMIT;

-- Если возникла ошибка:
ROLLBACK;
```

Это обеспечивает целостность данных при выполнении нескольких операций как единого блока.

---

### 7. Какие стратегии оптимизации запросов вы знаете?

Некоторые распространённые стратегии:

- Использование индексов для ускорения поиска.
- Избегание SELECT *, выбор только нужных колонок.
- Использование JOIN вместо подзапросов там, где это возможно.
- Анализ плана выполнения (`EXPLAIN`) для выявления узких мест.
- Разделение больших запросов на меньшие части.
- Кэширование результатов часто используемых запросов.
- Обеспечение правильной статистики для оптимизатора.

---

### 8. Как реализовать версионирование данных в реляционной базе данных?

Подходы:

- Добавление поля `version_number` или `timestamp`, которое обновляется при каждом изменении записи.
- Использование механизма "отмены" или "истории изменений" через отдельные таблицы аудита.

Пример:


```sql
CREATE TABLE documents (
    id INT PRIMARY KEY,
    content TEXT,
    version INT DEFAULT 1,
    last_modified TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

При обновлении увеличивается значение `version`, что позволяет отслеживать изменения.

---

### 9. Пример использования всех четырёх типов команд (DDL, DML, DCL, TCL) в рамках одного бизнес-сценария

Представим сценарий: менеджер создает таблицу сотрудников, добавляет данные, устанавливает права доступа и выполняет транзакцию по обновлению зарплаты.


```sql
-- DDL: Создание таблицы сотрудников
CREATE TABLE employees (
    id INT PRIMARY KEY,
    name VARCHAR(50),
    salary DECIMAL(10,2)
);

-- DCL: Назначение прав пользователю на таблицу
GRANT SELECT, UPDATE ON employees TO hr_user;

-- DML: Вставка новых данных о сотруднике
INSERT INTO employees (id, name, salary) VALUES (1, 'Иван Иванов', 50000);

-- TCL: Транзакция по обновлению зарплаты с подтверждением или откатом
BEGIN TRANSACTION;
UPDATE employees SET salary = salary + 5000 WHERE id = 1;
-- Предположим, все прошло успешно:
COMMIT;
```

Этот сценарий показывает создание структуры базы данных (DDL), управление доступом (DCL), работу с данными (DML) и контроль транзакций (TCL).