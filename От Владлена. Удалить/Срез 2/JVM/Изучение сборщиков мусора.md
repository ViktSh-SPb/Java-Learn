### Что такое сборщик мусора в Java?

Сборщик мусора (Garbage Collector, GC) — это автоматическая система управления памятью в JVM, которая автоматически обнаруживает и освобождает память, занятую объектами, которые больше не используются программой. Это позволяет разработчикам не заботиться вручную о выделении и освобождении памяти, снижая риск ошибок и утечек.

### Какие основные типы сборщиков мусора вы знаете?

- Serial GC — однопоточный сборщик, подходит для небольших приложений.
- Parallel GC (Throughput Collector) — использует несколько потоков для ускорения сборки.
- CMS (Concurrent Mark-Sweep) — минимизирует паузы за счет параллельной и конвейерной работы.
- G1 Garbage Collector — разбивает heap на регионы и работает параллельно, балансируя между паузами и пропускной способностью.
- ZGC (Z Garbage Collector) — низкопауза, масштабируемый сборщик для больших heap.
- Shenandoah — также низкопауза, ориентирован на минимальные задержки.

### Как работает механизм автоматической сборки мусора в JVM?

Общий принцип:

1. Обнаружение объектов-«мусора»: JVM отслеживает объекты, к которым больше нет ссылок или они недоступны из корней (стеков, статических переменных).
2. Обозначение: сборщик помечает такие объекты как мусор.
3. Освобождение памяти: выделенная память возвращается в пул свободных блоков для дальнейшего использования.
4. В зависимости от типа сборщика процесс может включать фазы маркировки, копирования или компактизации.

### Чем отличается сборка мусора Mark-Sweep от Copying?

- Mark-Sweep:
    
    - Обозначает все живые объекты (маркировка).
    - Затем освобождает память, проходя по всему heap.
    - Может приводить к фрагментации памяти.
    - Недостаток: паузы при маркировке и очистке.
- Copying:
    
    - Разделяет heap на две области.
    - Копирует живые объекты из одной области в другую.
    - Освобождает всю старую область целиком.
    - Меньше фрагментации, быстрее для коротких объектов.
    - Недостаток: требует двойного объема памяти.

### Какие преимущества и недостатки у G1 Garbage Collector по сравнению с CMS?

G1 GC:

- Преимущества:
    - Минимальные паузы благодаря разбитию heap на регионы.
    - Предсказуемое время пауз.
    - Хорошо масштабируется на большие heap.
- Недостатки:
    - Более сложная настройка.
    - В некоторых случаях чуть ниже пропускная способность по сравнению с Parallel GC.

CMS:

- Преимущества:
    - Быстрые паузы за счет параллельной работы.
    - Хорошо подходит для приложений с низкими задержками.
- Недостатки:
    - Может приводить к фрагментации памяти.
    - Требует больше ресурсов CPU для параллельных фаз.

### Как работает сборщик мусора ZGC и для каких задач он наиболее подходит?

ZGC — это низкопауза масштабируемый сборщик мусора:

- Работает параллельно с приложением без значительных пауз (обычно менее нескольких миллисекунд).
- Использует технологии цветных меток и виртуализацию памяти для минимизации задержек.
- Особенно подходит для систем с большими объемами данных (гигантские heap), где важна минимизация задержек (например, базы данных, высоконагруженные серверы).

### Какие оптимизации используются сборщиками мусора для уменьшения пауз при сборке?

- Параллельная обработка — использование нескольких потоков для маркировки и перемещения объектов.
- Конкурентные фазы — выполнение большинства работ одновременно с выполнением приложения.
- Мягкое копирование/перемещение объектов — избегание остановки приложения на длительное время.
- Механизмы предсказания и адаптации — динамическая настройка параметров GC под текущую нагрузку.

### Какие нововведения были реализованы в сборщике мусора Shenandoah по сравнению с другими сборщиками?

- Минимальные паузы благодаря полностью конкурентной работе всех фаз сбора мусора.
- Использование технологий «прогрессивного» перемещения объектов без остановки приложения.
- Улучшенная масштабируемость на больших heap'ах и снижение влияния на задержки.

### Как JVM определяет, что объект является 'мусором' и его можно удалить?

JVM использует граф ссылок:

1. Объекты считаются «живыми», если доступны из корней (стеков потоков, статических переменных).
2. Объекты без путей из корней считаются «мусором».
3. Алгоритмы маркировки проходят по графу ссылок начиная с корней; все достижимые объекты помечаются как живые.
4. Все непомеченные объекты считаются мусором и подлежат удалению при следующей фазе очистки.