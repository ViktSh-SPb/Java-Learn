–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ **–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ ‚Äî —ç—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∑–∞–¥–∞—á–∞ **–±–∞–ª–∞–Ω—Å–∞ –º–µ–∂–¥—É —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å—é –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é**.
## 1Ô∏è‚É£ –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (Optimistic Concurrency Control)
- **–ò–¥–µ—è:** —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —á–∏—Ç–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–ø–∏—Å–∏.
- **–ú–µ—Ö–∞–Ω–∏–∑–º:** –≤–µ—Ä—Å–∏—è –∑–∞–ø–∏—Å–∏ –∏–ª–∏ `timestamp`:
```sql
UPDATE accounts
SET balance = balance - 100, version = version + 1
WHERE id = 1 AND version = 1;
```
- **–ü–ª—é—Å—ã:**
    - –ù–µ—Ç —É–¥–µ—Ä–∂–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –Ω–∞ —á—Ç–µ–Ω–∏–µ ‚Üí –≤—ã—Å–æ–∫–∞—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å.
    - –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏.
- **–ú–∏–Ω—É—Å—ã:**
    - –ï—Å–ª–∏ —á–∞—Å—Ç–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Üí –≤–æ–∑–º–æ–∂–Ω—ã –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –æ—Ç–∫–∞—Ç—ã.
## 2Ô∏è‚É£ –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ü—Ä–∏–Ω—Ü–∏–ø:** —Ä–∞–∑–±–∏–≤–∞—Ç—å –∫—Ä—É–ø–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ **–ª–æ–∫–∞–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ –Ω–∞ –æ–¥–Ω–æ–º —É–∑–ª–µ.
- –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É–∑–ª–æ–≤ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Saga pattern** –≤–º–µ—Å—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.
- **Saga pattern**:
    1. –ö–∞–∂–¥–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –∞—Ç–æ–º–∞—Ä–Ω–∞.
    2. –ï—Å–ª–∏ –æ–¥–∏–Ω —à–∞–≥ –Ω–µ—É–¥–∞—á–µ–Ω, –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**.
- **–ü–ª—é—Å—ã:** –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —É–º–µ–Ω—å—à–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
- **–ú–∏–Ω—É—Å—ã:** —Å–ª–æ–∂–Ω–µ–µ –ª–æ–≥–∏–∫–∞ –æ—Ç–∫–∞—Ç–æ–≤.
## 3Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ MVCC** (Multi-Version Concurrency Control)
- **MVCC** –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º **–≤–∏–¥–µ—Ç—å —Å–≤–æ—é –≤–µ—Ä—Å–∏—é –¥–∞–Ω–Ω—ã—Ö**, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –¥—Ä—É–≥–∏—Ö.
- **–ü—Ä–∏–Ω—Ü–∏–ø:**
    - –ß—Ç–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å –º–æ–º–µ–Ω—Ç–∞ –Ω–∞—á–∞–ª–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
    - –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –∑–∞–ø–∏—Å–∏, —Å—Ç–∞—Ä–∞—è –æ—Å—Ç–∞—ë—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω–æ–π –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:** PostgreSQL, Oracle, MySQL/InnoDB.
- **–ü–ª—é—Å—ã:**
    - –í—ã—Å–æ–∫–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
    - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å.
## 4Ô∏è‚É£ –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–º–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- –ï—Å–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω—É–∂–Ω—ã (–ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥):
    - **–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏**, –∞ –Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ —Ç–∞–±–ª–∏—Ü—ã.
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** ‚Üí —É–º–µ–Ω—å—à–µ–Ω–∏–µ –≤–∑–∞–∏–º–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
    - –£–º–µ–Ω—å—à–∏—Ç—å –≤—Ä–µ–º—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Üí –±—ã—Å—Ç—Ä–µ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
## 5Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π –∏–∑–æ–ª—è—Ü–∏–∏ —Å –±–∞–ª–∞–Ω—Å–æ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **READ COMMITTED + –ª–æ–∫–∞–ª—å–Ω—ã–µ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** ‚Üí –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –±–µ–∑ —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –ø–æ—Ç–µ—Ä—å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞.
- **SERIALIZABLE** –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—É—é –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å, –Ω–æ —Å–Ω–∏–∂–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–∑-–∑–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ –æ—Ç–∫–∞—Ç–æ–≤.
- –ß–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç **REPEATABLE READ + –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞.
## 6Ô∏è‚É£ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏ –∏ –±–∞—Ç—á–∏ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –Ω–∞ **–∫–æ—Ä–æ—Ç–∫–∏–µ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ —à–∞–≥–∏**, –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π (Kafka, RabbitMQ).
- **–ü–ª—é—Å—ã:** –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
- **–ú–∏–Ω—É—Å—ã:** –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π —à–∞–≥, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –¥–ª—è –æ—Ç–∫–∞—Ç–æ–≤.
## üîπ –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

|–°—Ç—Ä–∞—Ç–µ–≥–∏—è|–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞|–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è|
|---|---|---|
|–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞|–í—ã—Å–æ–∫–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º, –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫|–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö|
|–õ–æ–∫–∞–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ + Saga|–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å|–°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–∫–∞—Ç–æ–≤|
|MVCC|–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å|–ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π|
|–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–º–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫|–ú–µ–Ω—å—à–µ –æ–∂–∏–¥–∞–Ω–∏–π, –º–µ–Ω—å—à–µ –≤–∑–∞–∏–º–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫|–ù–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã|
|–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏ –∏ –±–∞—Ç—á–∏|–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å|–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ —à–∞–≥–∞|
üí° **–í—ã–≤–æ–¥:**
–ß—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å **–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –±–µ–∑ —É—Ö—É–¥—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
1. –°—Ç–∞–≤—å—Ç–µ MVCC –∏–ª–∏ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É.
2. –î–µ–ª–∞–π—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º–∏.
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Saga –∏–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —à–∞–≥–∏ –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
4. –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —á–µ—Ä–µ–∑ –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å.
