–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è **–≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ RabbitMQ** –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫**, –∫–æ—Ç–æ—Ä—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –ø–æ—Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ —Å–±–æ–µ –±—Ä–æ–∫–µ—Ä–∞ –∏–ª–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è.
## 1Ô∏è‚É£ –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –±—Ä–æ–∫–µ—Ä–æ–≤
- **–°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä RabbitMQ** –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É–∑–ª–æ–≤.
- –í—Å–µ —É–∑–ª—ã —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Ö—Ä–∞–Ω—è—Ç **–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ—á–µ—Ä–µ–¥–µ–π, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ bindings**.
- –ï—Å–ª–∏ –æ–¥–∏–Ω —É–∑–µ–ª —É–ø–∞–ª ‚Üí –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç—É, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è –ø—Ä–æ—Å—Ç–æ–π.
**–ü—Ä–∏–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É–∑–ª–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä:**
```bash
rabbitmqctl join_cluster rabbit@node1
rabbitmqctl start_app
```
## 2Ô∏è‚É£ –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–µ–π (Mirrored Queues)
- **Mirrored queues** ‚Äî —ç—Ç–æ –æ—á–µ—Ä–µ–¥—å —Å –∫–æ–ø–∏—è–º–∏ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É–∑–ª–∞—Ö.
- **Master node** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø–∏—Å–∏, –∞ **mirrors** –¥–µ—Ä–∂–∞—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–ø–∏–∏.
- –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –º–∞—Å—Ç–µ—Ä–∞ –æ–¥–∏–Ω –∏–∑ mirrors —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–æ–≤—ã–º master ‚Üí —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.
**–ü—Ä–∏–º–µ—Ä –ø–æ–ª–∏—Ç–∏–∫–∏:**
```bash
rabbitmqctl set_policy ha-all ".*" '{"ha-mode":"all"}'
```
- –í—Å–µ –æ—á–µ—Ä–µ–¥–∏ –±—É–¥—É—Ç —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –≤—Å–µ —É–∑–ª—ã –∫–ª–∞—Å—Ç–µ—Ä–∞.
## 3Ô∏è‚É£ Persistent messages (—É—Å—Ç–æ–π—á–∏–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø—Ä–æ–¥—é—Å–µ—Ä–∞ –º–æ–∂–Ω–æ –ø–æ–º–µ—Ç–∏—Ç—å –µ–≥–æ –∫–∞–∫ **persistent**:
    ```java
    MessageProperties.PERSISTENT_TEXT_PLAIN
    ```
- RabbitMQ —Å–æ—Ö—Ä–∞–Ω–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ **–Ω–∞ –¥–∏—Å–∫**, —á—Ç–æ–±—ã –æ–Ω–æ –Ω–µ –ø–æ—Ç–µ—Ä—è–ª–æ—Å—å –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –±—Ä–æ–∫–µ—Ä–∞.
## 4Ô∏è‚É£ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (Acknowledgements)
- Consumer –¥–æ–ª–∂–µ–Ω **–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É** —Å–æ–æ–±—â–µ–Ω–∏—è (`ack`).
- –ï—Å–ª–∏ consumer —É–ø–∞–ª –¥–æ ack ‚Üí RabbitMQ –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –¥—Ä—É–≥–æ–º—É consumer.
- –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Ç–µ—Ä—é —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ —Å–±–æ—è—Ö –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π.
## 5Ô∏è‚É£ Dead Letter Queues (DLQ)
- –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ **–æ—á–µ—Ä–µ–¥—å –º—ë—Ä—Ç–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π**.
- –ü–æ–∑–≤–æ–ª—è–µ—Ç:
    - –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏,
    - –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è,
    - –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –ø–æ—Ç–æ–∫ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö.
## 6Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Publisher Confirms
- –î–ª—è –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å **Publisher Confirms**, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ **–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å**.
- –ü—Ä–∏ —Å–±–æ–µ –ø—Ä–æ–¥—é—Å–µ—Ä –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ.
## 7Ô∏è‚É£ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **RabbitMQ Management Plugin** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
    - –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–µ–π,
    - —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–µ—Ä–∫–∞–ª—å–Ω—ã—Ö –æ—á–µ—Ä–µ–¥–µ–π,
    - –∑–∞–≥—Ä—É–∑–∫–∏ —É–∑–ª–æ–≤,
    - –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (unacked).
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ **–∞–ª–µ—Ä—Ç–æ–≤** –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–±–æ–∏.
## 8Ô∏è‚É£ –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π
- –ù–µ—Å–∫–æ–ª—å–∫–æ consumer‚Äô–æ–≤ —á–∏—Ç–∞—é—Ç –∏–∑ –æ–¥–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ ‚Üí —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏.
- –ï—Å–ª–∏ –æ–¥–∏–Ω consumer —É–ø–∞–ª ‚Üí –¥—Ä—É–≥–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π.
## üîπ –ò—Ç–æ–≥
**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ RabbitMQ:**
1. **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –±—Ä–æ–∫–µ—Ä–æ–≤** ‚Üí –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ —É–∑–ª–æ–≤.
2. **Mirrored queues** ‚Üí —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–∑–ª–æ–≤.
3. **Persistent messages** ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –¥–∏—Å–∫.
4. **Manual acknowledgements** ‚Üí –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ —Å–±–æ–µ consumer‚Äô–∞.
5. **Dead Letter Queues** ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
6. **Publisher Confirms** ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø—Ä–æ–¥—é—Å–µ—Ä–∞.
7. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã** ‚Üí –±—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–ª–∏–∫ –Ω–∞ —Å–±–æ–∏.
8. **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π** ‚Üí –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å.