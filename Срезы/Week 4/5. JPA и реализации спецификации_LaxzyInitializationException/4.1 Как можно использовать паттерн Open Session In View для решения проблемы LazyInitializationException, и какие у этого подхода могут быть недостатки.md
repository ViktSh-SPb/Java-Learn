## üîπ 1. –ß—Ç–æ —Ç–∞–∫–æ–µ Open Session In View (OSIV)
**–ò–¥–µ—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞:**
> –î–µ—Ä–∂–∞—Ç—å Hibernate `Session` (–∏–ª–∏ JPA `EntityManager`) **–æ—Ç–∫—Ä—ã—Ç–æ–π –¥–æ –∫–æ–Ω—Ü–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–∞**,  
> –≤–∫–ª—é—á–∞—è —ç—Ç–∞–ø —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ View –∏–ª–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ JSON.
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ª–µ–Ω–∏–≤—ã–µ –ø–æ–ª—è (`fetch = LAZY`) –º–æ–≥—É—Ç –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å—Å—è **–Ω–∞ –ª–µ—Ç—É**, –¥–∞–∂–µ –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø –∫ –Ω–∏–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è.
### üîπ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Spring Boot
Spring Boot –≤–∫–ª—é—á–∞–µ—Ç OSIV –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
```properties
spring.jpa.open-in-view=true
```
–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º:
- Spring —Å–æ–∑–¥–∞–µ—Ç **—Ñ–∏–ª—å—Ç—Ä `OpenEntityManagerInViewFilter`** (–¥–ª—è JPA) –∏–ª–∏ **`OpenSessionInViewFilter`** (–¥–ª—è Hibernate).
- –≠—Ç–æ—Ç —Ñ–∏–ª—å—Ç—Ä **–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–µ—Å—Å–∏—é –≤ –Ω–∞—á–∞–ª–µ –∑–∞–ø—Ä–æ—Å–∞** –∏ **–∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤ –∫–æ–Ω—Ü–µ**.
- –õ—é–±—ã–µ –ª–µ–Ω–∏–≤—ã–µ —Å–≤—è–∑–∏, –∫ –∫–æ—Ç–æ—Ä—ã–º –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏–ª–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä JSON, –º–æ–≥—É—Ç –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥—Ä—É–∂–µ–Ω—ã.
### üîπ –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã
```java
@RestController
@RequiredArgsConstructor
public class AuthorController {
    private final AuthorRepository authorRepository;

    @GetMapping("/authors/{id}")
    public Author getAuthor(@PathVariable Long id) {
        // findById() –∑–∞–≥—Ä—É–∂–∞–µ—Ç Author –±–µ–∑ –∫–Ω–∏–≥ (LAZY)
        Author author = authorRepository.findById(id).orElseThrow();

        // Jackson —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç Author ‚Üí –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ getBooks()
        // LAZY-–ø–æ–ª–µ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è OSIV
        return author;
    }
}
```
**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ SQL:**
1. Hibernate –≤—ã–±–∏—Ä–∞–µ—Ç –∞–≤—Ç–æ—Ä–∞:
```sql
SELECT * FROM authors WHERE id = ?
```
2. –ü—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ JSON Hibernate –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç:
```sql
SELECT * FROM books WHERE author_id = ?
```
## üîπ 2. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ OSIV

|–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ|–û–±—ä—è—Å–Ω–µ–Ω–∏–µ|
|---|---|
|‚úÖ –†–µ—à–∞–µ—Ç `LazyInitializationException`|–õ—é–±—ã–µ –ª–µ–Ω–∏–≤—ã–µ –ø–æ–ª—è –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ª–µ—Ç—É|
|‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ|–ù–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏–ª–∏ DTO|
|‚úÖ –£–¥–æ–±–Ω–æ –¥–ª—è —Å—Ç–∞—Ä—ã—Ö MVC-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π|–ù–∞–ø—Ä–∏–º–µ—Ä, Thymeleaf –∏–ª–∏ JSP, –≥–¥–µ View —Ç—Ä–µ–±—É–µ—Ç –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö|
## üîπ 3. –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –∏ —Ä–∏—Å–∫–∏ OSIV

|–ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫|–ü–æ—á–µ–º—É|
|---|---|
|‚ùå –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ N+1 –∑–∞–ø—Ä–æ—Å—ã|–ö–∞–∂–¥—ã–π –¥–æ—Å—Ç—É–ø –∫ –ª–µ–Ω–∏–≤–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π SQL|
|‚ùå –°–ª–æ–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å SQL|–õ—é–±–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ LAZY-–ø–æ–ª—é –≤—ã–∑—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ ¬´–Ω–∞ –ª–µ—Ç—É¬ª|
|‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ —Å–ª–æ–µ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è|Persistence-—Å–µ—Å—Å–∏—è —Ç–µ–ø–µ—Ä—å –∂–∏–≤—ë—Ç –≤ Web-—Å–ª–æ–µ ‚Üí —Å–º–µ—à–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä|
|‚ùå –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥–æ–ª–≥–∏–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º|–°–µ—Å—Å–∏—è –¥–µ—Ä–∂–∏—Ç—Å—è –¥–æ –∫–æ–Ω—Ü–∞ –∑–∞–ø—Ä–æ—Å–∞, –≤–∫–ª—é—á–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é|
|‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è REST API –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ|REST –ª—É—á—à–µ –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å DTO –∏ –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ|
### üîπ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OSIV
- –í **legacy MVC-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö** (Thymeleaf, JSP), –≥–¥–µ View —Ç—Ä–µ–±—É–µ—Ç –ª–µ–Ω–∏–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ **–±—ã—Å—Ç—Ä–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å `LazyInitializationException`** –±–µ–∑ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞.
### üîπ –ö–æ–≥–¥–∞ **–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**
- –í **REST API / –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö** ‚Äî –ª—É—á—à–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å DTO —Å –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ (`JOIN FETCH` / `EntityGraph`).
- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å SQL-–∑–∞–ø—Ä–æ—Å–æ–≤.
## üîπ 4. –ü—Ä–∏–º–µ—Ä –≤–∫–ª—é—á–µ–Ω–∏—è OSIV –≤ Spring Boot
```properties
# –í–∫–ª—é—á–∏—Ç—å Open Session In View (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)
spring.jpa.open-in-view=true
```
–î–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ DTO –∏ @EntityGraph):
```properties
spring.jpa.open-in-view=false
```
### üîπ –†–µ–∑—é–º–µ

|–ê—Å–ø–µ–∫—Ç|–°—É—Ç—å|
|---|---|
|–ß—Ç–æ –¥–µ–ª–∞–µ—Ç OSIV|–î–µ—Ä–∂–∏—Ç Hibernate `Session`/JPA `EntityManager` –æ—Ç–∫—Ä—ã—Ç–æ–π –¥–æ –∫–æ–Ω—Ü–∞ –∑–∞–ø—Ä–æ—Å–∞|
|–ü–æ–ª—å–∑–∞|–†–µ—à–∞–µ—Ç `LazyInitializationException` ¬´–Ω–∞ –ª–µ—Ç—É¬ª|
|–ú–∏–Ω—É—Å—ã|N+1 –∑–∞–ø—Ä–æ—Å—ã, —Å–º–µ—à–µ–Ω–∏–µ —Å–ª–æ–µ–≤, —Å–ª–æ–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å SQL, –¥–æ–ª–≥–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏|
|–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è|–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è legacy-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π; –¥–ª—è REST API ‚Äî –ª—É—á—à–µ DTO –∏ JOIN FETCH|
