**Stream API** - —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–π –∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ, –ø–æ—è–≤–∏–≤—à–∏–π—Å—è –≤ Java 8. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å –ª–∞–∫–æ–Ω–∏—á–Ω—ã–π –∏ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ –¥—Ä—É–≥–∏—Ö –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏.
# –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Stream API
- –ù–µ –∏–∑–º–µ–Ω—è–µ—Ç –∏—Å—Ö–æ–¥–Ω—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ–ø–∏–µ–π –¥–∞–Ω–Ω—ã—Ö)
- –õ–µ–Ω–∏–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è (–º–Ω–æ–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (*parallelStream()*)
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ *–ª—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏–π* –∏ *method references*)
# –°–æ–∑–¥–∞–Ω–∏–µ Stream (–∏—Å—Ç–æ—á–Ω–∏–∫–∏)
Stream –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
## 1. –ò–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–π
```java
List<String> list = Arrays.asList("a", "b", "c");
Stream<String> stream = list.stream(); // –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫
Stream<String> pStream = list.parallelStream() // –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫
```
## 2. –ò–∑ –º–∞—Å—Å–∏–≤–∞
```java
String[] array = {"a", "b", "c"};
Stream<String> stream = Arrays.stream(array);
```
## 3. –ò–∑ –∑–Ω–∞—á–µ–Ω–∏–π (Stream.of())
```java
Stream<String> stream = Stream.of("a", "b", "c");
```
## 4. –ò–∑ —Ñ–∞–π–ª–æ–≤ (Files.lines())
```java
Stream<String> lines = Files.lines(Paths.get("file.txt"));
```
## 5. –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ (Stream.iterate(), Stream.generate())
```java
Stream<Integer> infiniteNumbers = Stream.iterate(0, n -> n + 1); // 0, 1, 2, ...
Stream<Double> randomNumbers = Stream.generate(Math::random); // –°–ª—É—á–∞–π–Ω—ã–µ —á–∏—Å–ª–∞
```
# –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (Intermediate Operations)
–ù–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É, –∞ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç "–∫–æ–Ω–≤–µ–π–µ—Ä" –æ–ø–µ—Ä–∞—Ü–∏–π.

| –û–ø–µ—Ä–∞—Ü–∏—è              | –û–ø–∏—Å–∞–Ω–∏–µ                                                                  | –ü—Ä–∏–º–µ—Ä                                    |
| --------------------- | ------------------------------------------------------------------------- | ----------------------------------------- |
| **filter(Predicate)** | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤  –ø–æ —É—Å–ª–æ–≤–∏—é                                          | `stream.filter(s -> s.length() > 3`       |
| **map(Function)**     | –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞                                           | `stream.map(String::toUpperCase)`         |
| **flatMap(Function)** | "–†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç" –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, *List\<List> ‚Üí List*)      | `stream.flatMap(List::stream)`            |
| **distinct()**        | –£–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã                                                         | `stream.distinct()`                       |
| **sorted()**          | –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–º–æ–∂–Ω–æ —Å –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–æ–º)                                         | `stream.sorted(Comparator.reverseOrder()` |
| **peek(Consumer)**    | –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ) | `stream.peek(System.out::println)`        |
| **limit(n)**          | –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤                                         | `stream.limit(5)`                         |
| **skip(n)**           | –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø–µ—Ä–≤—ã–µ n —ç–ª–µ–º–µ–Ω—Ç–æ–≤                                             | `stream.skip(2)`                          |
# –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (Terminal operations)
–ó–∞–ø—É—Å–∫–∞—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ–≥–æ –∫–æ–Ω–≤–µ–π–µ—Ä–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

| –û–ø–µ—Ä–∞—Ü–∏—è                                  | –û–ø–∏—Å–∞–Ω–∏–µ                                                  | –ü—Ä–∏–º–µ—Ä                                   |
| ----------------------------------------- | --------------------------------------------------------- | ---------------------------------------- |
| **forEach(Consumer)**                     | –í—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞                   | `stream.forEach(System.out::println`     |
| **collect(Collector)**                    | –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –ø–æ—Ç–æ–∫ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é (*List, Set, Map*, –∏ —Ç.–¥.)  | `stream.collect(Collectors.toList())`    |
| **toArray()**                             | –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –ø–æ—Ç–æ–∫ –≤ –º–∞—Å—Å–∏–≤                                | `stream.toArray(String[]::new)`          |
| **reduce()**                              | –ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—É–º–º–∞, –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è)       | `stream.reduce(0, Integer::sum)`         |
| **min() / max()**                         | –ù–∞—Ö–æ–¥–∏—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π/–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç (—Å –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–æ–º) | `stream.max(Comparator.naturalOrder())`  |
| **count()**                               | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤                           | `stream.count()`                         |
| **anyMatch() / allMatch() / noneMatch()** | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—Ç –ª–∏ —ç–ª–µ–º–µ–Ω—Ç—ã —É—Å–ª–æ–≤–∏—é              | `stream.anyMatch(s -> s.startWith("a"))` |
| **findFirst() / findAny()**               | –ù–∞—Ö–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–π/–ª—é–±–æ–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π —ç–ª–µ–º–µ–Ω—Ç                   | `stream.findFirst()`                     |
# –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
## 1. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
```java
List<String> names = Arrays.asList("Alice", "Bob", "Charlie", "Anna");

List<String> filtered = names.stream()
	.filter(name -> name.startWith("A"))    // ["Alice", "Anna"]
	.map(String::toUpperCase)               // ["ALICE", "ANNA"]
	.collect(Collectors.toList());          // –°–æ–±–∏—Ä–∞–µ–º –≤ List
```
## 2. –†–∞–±–æ—Ç–∞ —Å —á–∏—Å–ª–∞–º–∏ (—Å—É–º–º–∞, —Å—Ä–µ–¥–Ω–µ–µ)
```java
List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5);
int sum = numbers.stream().reduce(0, Integer::sum);                 // 15
double avg = numbers.stream().mapToInt(i -> i).average().orElse(0); // 3.0
```
## 3. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ (Collectors.groupingBy)
```java
List<String> words = Arrays.asList("apple", "banana", "cherry", "avocado");

Map<Character, List<String>> grouped = words.stream()
	.collect(Collectors.groupingBy(s -> s.charAt(0)));
// {'a' = ["apple", "avocado"], 'b' = ["banana"], 'c' = ["cherry"]}
```
## 4. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
```java
List<Integer> bigList = /* –æ–≥—Ä–æ–º–Ω—ã–π —Å–ø–∏—Å–æ–∫ */
long count = bigList.parallelStream() // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç ForkJoinPool
	.filter(i -> i % 2 == 0)
	.count();
```
# –õ–µ–Ω–∏–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è (Lazy Evaluation) –≤ Java Stream API
**–õ–µ–Ω–∏–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è** - —ç—Ç–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É, –∞ –æ—Ç–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –¥–æ –º–æ–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–µ–Ω. –í Java Stream API –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (*intermediate operations*) —è–≤–ª—è—é—Ç—Å—è –ª–µ–Ω–∏–≤—ã–º–∏ (*lazy*), –∞ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–µ (*terminal operations*) - –∂–∞–¥–Ω—ã–º–∏ (*eager*).
## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?
1. –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, *filter, map, sorted*) –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–Ω–≤–µ–π–µ—Ä, –Ω–æ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É.
2. –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, (–Ω–∞–ø—Ä–∏–º–µ—Ä, *collect, forEach, count*) –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤–µ—Å—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∏ —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è.
### –ü—Ä–∏–º–µ—Ä:
```java
List<String> names = Arrays.asList("Alice", "Bob", "Charlie");

// –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ª–µ–Ω–∏–≤—ã–µ)
Stream<String> stream = names.stream()
	.filter(name -> {
		System.out.println("–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: " + name); // –ù–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Å—Ä–∞–∑—É
		return name.length() > 3;
	})
	.map(name -> {
		System.out.println("–ú–∞–ø–ø–∏–Ω–≥: " + name); // –¢–æ–∂–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è
		return name.toUpperCase();
	});

// –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)
List<String> result = stream.collect(Collectors.toList())
```
–í—ã–≤–æ–¥:
```bash
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: Alice
–ú–∞–ø–ø–∏–Ω–≥: Alice
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: Bob
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: Charlie
–ú–∞–ø–ø–∏–Ω–≥: Charlie
```
üñù –ü–æ—á–µ–º—É `Bob` –Ω–µ –ø—Ä–æ—à–µ–ª –≤ `map`? –ü–æ—Ç–æ–º—É —á—Ç–æ `filter` –æ—Ç—Å–µ—è–ª –µ–≥–æ (–¥–ª–∏–Ω–∞ ‚â§ 3), –∏ –¥–∞–ª—å—à–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ –ø–æ—à–ª–∞.
## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ª–µ–Ω–∏–≤—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
### 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ù–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ª–∏—à–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø–æ—Å–ª–µ *filter* —Å—Ç–æ–∏—Ç *limit(1)*, —Ç–æ *Stream* –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã).
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É–∂–µ –ø–æ–ª—É—á–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, *findFirst()*).
### 2. –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ—Ç–æ–∫–∏
–õ–µ–Ω–∏–≤–æ—Å—Ç—å –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º–∏ *Stream* (–Ω–∞–ø—Ä–∏–º–µ—Ä, *Stream.iterate()*), —Ç–∞–∫ –∫–∞–∫ —ç–ª–µ–º–µ–Ω—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
```java
Stream<Integer> infiniteNumbers = Stream.iterate(0, n -> n + 1);
infiniteNumbers
	.filter(n -> n > 100)
	.limit(5) // –í–æ–∑—å–º–µ–º —Ç–æ–ª—å–∫–æ 5 —á–∏—Å–µ–ª –ø–æ—Å–ª–µ 100
	.forEach(System.out::println); // 101, 102, 103, 104, 105
```
### 3. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
–õ–µ–Ω–∏–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –∑–∞–¥–∞—á–∏ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ *parallelStream()*.
## –ü—Ä–∏–º–µ—Ä—ã –ª–µ–Ω–∏–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
### 1. filter + findFirst (–∫–æ—Ä–æ—Ç–∫–æ–µ –∑–∞–º—ã–∫–∞–Ω–∏–µ)
```java
List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5);

Optional<Integer> firstEven = numbers.stream()
	.filter(n -> {
		System.out.println("–ü—Ä–æ–≤–µ—Ä–∫–∞: " + n); // –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è 1, 2
		return n % 2 == 0;
	})
	.findFirst(); // –ù–∞—à–µ–ª 2 –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è
System.out.println(firstEven.get()); // 2
```
–í—ã–≤–æ–¥:
```bash
–ü—Ä–æ–≤–µ—Ä–∫–∞: 1
–ü—Ä–æ–≤–µ—Ä–∫–∞: 2
2
```
### 2. limit + map (–Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ª–∏—à–Ω–µ–µ)
```java
Stream.of("a", "b", "c", "d")
	.map(s -> {
		System.out.println("–ú–∞–ø–ø–∏–Ω–≥: " + s); // –¢–æ–ª—å–∫–æ a, b, c
		return s.toUpperCase();
	})
	.limit(3) // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–æ 3 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
	.forEach(System.out::println);
```
–í—ã–≤–æ–¥:
```bash
–ú–∞–ø–ø–∏–Ω–≥: a
A
–ú–∞–ø–ø–∏–Ω–≥: b
B
–ú–∞–ø–ø–∏–Ω–≥: —Å
C
```
–≠–ª–µ–º–µ–Ω—Ç `d` –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ `limit(3)` —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω.
## –ö–æ–≥–¥–∞ –ª–µ–Ω–∏–≤–æ—Å—Ç—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?
–õ–µ–Ω–∏–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –¥–ª—è:
- –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (*collect, forEach, count*  –∏ –¥—Ä.) - –æ–Ω–∏ –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ.
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ JVM (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∏–º—ã *IntStream* –º–æ–≥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∏–Ω–∞—á–µ).
## –í—ã–≤–æ–¥
- –õ–µ–Ω–∏–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ *Stream API* –ø–æ–∑–≤–æ–ª—è—é—Ç –æ—Ç–∫–ª–∞–¥—ã–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –¥–æ –≤—ã–∑–æ–≤–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.
- **–ü–ª—é—Å—ã:** –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —Ä–∞–±–æ—Ç–∞ —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞.
- **–ú–∏–Ω—É—Å—ã:** –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–º –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∑–∞–±—ã—Ç—å –≤—ã–∑–≤–∞—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é, –ø–æ—Ç–æ–∫ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è).
# Parallel Stream
**Parallel Stream** - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º **Java Stream API** –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ (—è–¥—Ä–∞–º–∏ CPU) –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.
## –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç ForkJoinPool –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º).
- **–£—Å–∫–æ—Ä—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö** (–Ω–æ –º–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª—è—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ –º–∞–ª—ã—Ö –∫–æ–ª–ª–µ–∫—Ü–∏—è—Ö –∏–∑-–∑–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤).
- **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–ª–∏ –∏–∑–º–µ–Ω—è–µ–º—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è).
- **–ü–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∞—Ç—å—Å—è** (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è forEachOrdered).
## –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å Parallel Stream?
–ï—Å—Ç—å –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞:
### 1. –ò–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ parallelStream()
```java
List<String> list = Arrays.asList("a", "b", "c");
Stream<String> parallelStream = list.parallelStream(); // –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫
```
### 2. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–π Stream –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π —á–µ—Ä–µ–∑ parallel()
```java
Stream<String> stream = Stream.of("a", "b", "c");
Stream<String> parallelStream = stream.parallel(); // –î–µ–ª–∞–µ–º –ø–æ—Ç–æ–∫ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º
```
## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Parallel Stream?
1. –î–∞–Ω–Ω—ã–µ —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ —á–∞—Å—Ç–∏ (*splitting*)
2. –ö–∞–∂–¥–∞—è —á–∞—Å—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ (*ForkJoinPool.commonPool()*)
3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è (*combining*).
## –ü—Ä–∏–º–µ—Ä:
```java
List<Integer> numbers = List.of(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

// –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ (–æ–±—ã—á–Ω—ã–π Stream)
long seqTime = System.currentTimeMillis();
numbers.stream()
	.map(n -> n * 2)
	.forEach(System.out.println);
System.out.println("Sequential time: " + (System.currentTimeMillis()- seqTime) + " ms");

// –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ (Parallel Stream)
long parTime = System.currentTimeMillis();
numbers.parallelStream()
	.map(n -> n * 2)
	.forEach(System.out::println);
System.out.println("Parallel time: " + (System.curentTimeMillis() - parTime) + " ms");
```
**üñù –í—ã–≤–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Ä–∞–∑–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, —Ç–∞–∫ –∫–∞–∫ –ø–æ—Ç–æ–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.**
### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Parallel Stream?
- <span style="color:green">üóπ</span> **–ë–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã –¥–∞–Ω–Ω—ã—Ö** (–æ—Ç 10 000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- <span style="color:green">üóπ</span>**–í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ-—Å–ª–æ–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—Å—á–µ—Ç—ã).
- <span style="color:green">üóπ</span>**–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** (–Ω–µ—Ç shared mutable state).
### –ö–æ–≥–¥–∞ –ù–ï —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
- <span style="color:red">üóµ</span>**–ú–∞–ª–µ–Ω—å–∫–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏** (–Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ –ø—Ä–µ–≤—ã—Å—è—Ç –≤—ã–≥–æ–¥—É).
- <span style="color:red">üóµ</span>**–û–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏** (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, IO-–æ–ø–µ—Ä–∞—Ü–∏–∏).
- <span style="color:red">üóµ</span>**–ö–æ–≥–¥–∞ –≤–∞–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤** (–µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è forEachOrdered).
## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
### 1. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞
```java
List<Integer> numbers = List.of(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

List<Integer> evenSquares = numbers.parallelStream()
	.filter(n -> n % 2 == 0)
	.map(n -> n * n)
	.collect(Collectors.toList());
System.out.println(evenSquares); // [4, 16, 36, 64, 100]
```
### 2. –°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (reduce –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ)
```java
int sum = numbers.parallelStream()
	.reduce(0, Integer::sum); // 55
```
### 3. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ (groupingByConcurrent –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤)
```java
Map<Integer, List<String>> grouped = words.parallelStream()
	.collect(Collectors.groupingByConcurrent(String::length)); // –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∞–Ω–∞–ª–æ–≥ groupingBy
```
## –ü—Ä–æ–±–ª–µ–º—ã –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏
### 1. –°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏ (Race Condition)
–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑–º–µ–Ω—è–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä –≤–Ω–µ—à–Ω—è—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è), –≤–æ–∑–º–æ–∂–Ω—ã –æ—à–∏–±–∫–∏:
```java
List<Integer> list = new ArrayList<>();
IntStream.range(0, 1000)
	.parallel()
	.forEach(list::add); // –ú–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å ConcurrentModificationException
```
–†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (*ConcurrentHashMap, CopyOnWriteArrayList*) –∏–ª–∏ *collect()*:
```java
List<Integer> safeList = IntStream.range(0, 1000)
	.parallel()
	.boxed()
	.collect(Collectors.toList());
```
### 2. –ü–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
```java
List<Integer> nums = List.of(1, 2, 3, 4, 5);
nums.parallelStream().forEach(System.out::print); // –ú–æ–∂–µ—Ç –≤—ã–≤–µ—Å—Ç–∏ "3 1 5 2 4"
```
–ï—Å–ª–∏ –ø–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω:
```java
nums.parallelStream().forEachOrdered(System.out::print); // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫: 1 2 3 4 5
```
### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –Ω–µ –≤—Å–µ–≥–¥–∞ –±—ã—Å—Ç—Ä–µ–µ** (–∏–∑-–∑–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤).
- **–ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —è–¥–µ—Ä CPU** (–Ω–∞ 2-—è–¥–µ—Ä–Ω–æ–º CPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ, —á–µ–º 16-—è–¥–µ—Ä–Ω–æ–º).
## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Parallel Stream
### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ ForkJoinPool
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é *Parallel Stream* –∏—Å–ø–æ–ª—å–∑—É–µ—Ç *ForkJoinPool.commonPool()*.
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–¥–∞—Ç—å —Å–≤–æ–π –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤:
```java
ForkJoinPool customPool = new ForkJoinPool(4); // –ü—É–ª –∏–∑ 4 –ø–æ—Ç–æ–∫–æ–≤
customPool.submit(() -> numbers.parallelStream()
	.map(n -> n * 2)
	.forEach(System.out::println)
).get();
```
### 2. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞
```java
System.setProperty("java.util.concurrent.ForkJoinPool.common.parallelism", "8"); // 8 –ø–æ—Ç–æ–∫–æ–≤
```
# Statless –∏ Stateful –æ–ø–µ—Ä–∞—Ü–∏–∏
–í Java Stream API –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–µ–ª—è—Ç—Å—è –Ω–∞ –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–∞: statless (–±–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è) –∏ stateful (—Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º). –≠—Ç–æ —Ä–∞–∑–ª–∏—á–∏–µ –≤–∞–∂–Ω–æ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤.
## Stateless Operations (–±–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è)
Stateless –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ—Ç–æ–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞. –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.
### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
- –ú–æ–≥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
- –ù–µ —Ç—Ä–µ–±—É—é—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö
- –û–±—ã—á–Ω–æ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã
### –ü—Ä–∏–º–µ—Ä—ã stateless –æ–ø–µ—Ä–∞—Ü–∏–π:
- filter() - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- map() - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- flatMap() - "—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ" –ø–æ—Ç–æ–∫–æ–≤
- peek() - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
```java
list.stream()
	.filter(x -> x > 10) // stateless
	.map(x -> x * 2) // stateless
	.forEach(System.out::println);
```
## Stateful Operations (—Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º)
Stateful –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ—Ç–æ–∫–∞ –∏ —Ç—Ä–µ–±—É—é—Ç –∑–Ω–∞–Ω–∏—è –æ –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç—ã.
### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
- –ú–æ–≥—É—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ–≥–æ –ø–æ—Ç–æ–∫–∞ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ß–∞—Å—Ç–æ —Ç—Ä–µ–±—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ú–æ–≥—É—Ç —Å–Ω–∏–∂–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö
### –ü—Ä–∏–º–µ—Ä—ã stateful –æ–ø–µ—Ä–∞—Ü–∏–π:
- distinct() - —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- sorted() - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- limit() - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- skip() - –ø—Ä–æ–ø—É—Å–∫ –ø–µ—Ä–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
```java
list.stream()
	.distinct() // stateful
	.sorted() // stateful
	.limit(5) // stateful
	.forEach(System.out.println);
```
## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
1. –ü–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π: –û–ø—Ç–∏–º–∞–ª—å–Ω–æ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å stateless –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ stateful, —á—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö –¥–ª—è stateful –æ–±—Ä–∞–±–æ—Ç–∫–∏.
2. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏: Stateful –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–≥—É—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∑–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –∏–∑-–∑–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.
3. –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –ü–æ—Ç–æ–∫–∏ –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ—Å–ª–µ stateful –æ–ø–µ—Ä–∞—Ü–∏–π.