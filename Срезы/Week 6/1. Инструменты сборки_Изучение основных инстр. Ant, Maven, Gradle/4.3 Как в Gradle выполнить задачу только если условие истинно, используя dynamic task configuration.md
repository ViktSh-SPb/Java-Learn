## üß© 1. –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è
–í Gradle –∫–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –∏–º–µ–µ—Ç **`onlyIf {}`** ‚Äî –±–ª–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–¥–∞—á–∏:
```groovy
task myTask {
    doLast {
        println "–í—ã–ø–æ–ª–Ω—è—é –∑–∞–¥–∞—á—É"
    }
    onlyIf {
        someCondition() // –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true –∏–ª–∏ false
    }
}
```
- –ï—Å–ª–∏ `onlyIf` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `false`, –∑–∞–¥–∞—á–∞ **–Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è**, –Ω–æ Gradle –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ–∫–∞–∂–µ—Ç –µ—ë –≤ –≥—Ä–∞—Ñ–µ –∑–∞–¥–∞—á.
- –≠—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π**, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª—è—Ç—å —É—Å–ª–æ–≤–∏–µ –≤–æ –≤—Ä–µ–º—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.
## üß© 2. –ü—Ä–∏–º–µ—Ä —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
```groovy
ext.isProduction = false

task deploy {
    doLast {
        println "–î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä"
    }
    onlyIf {
        isProduction
    }
}
```
- –ó–∞–ø—É—Å—Ç–∏—à—å `gradle deploy` ‚Üí –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ `isProduction = false`.
- –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å `isProduction` —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ:
```bash
gradle deploy -PisProduction=true
```
–ò –≤ `build.gradle`:
```groovy
ext.isProduction = project.hasProperty('isProduction') && project.property('isProduction') == 'true'
```
## üß© 3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å `tasks.register`
–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Gradle —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç **–ª–µ–Ω–∏–≤—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∑–∞–¥–∞—á**:
```groovy
tasks.register("conditionalTask") {
    doLast {
        println "–í—ã–ø–æ–ª–Ω—è—é —É—Å–ª–æ–≤–Ω—É—é –∑–∞–¥–∞—á—É"
    }
    onlyIf {
        // —É—Å–ª–æ–≤–∏–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        project.hasProperty('runTask') && project.property('runTask') == 'true'
    }
}
```
- –ó–∞–ø—É—Å–∫:
```bash
gradle conditionalTask -PrunTask=true
```
## üß© 4. –ü—Ä–∏–º–µ—Ä —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é –æ—Ç –¥—Ä—É–≥–æ–π –∑–∞–¥–∞—á–∏
–ú–æ–∂–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ **–Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥—Ä—É–≥–æ–π –∑–∞–¥–∞—á–∏**:
```groovy
tasks.register("prepare") {
    doLast {
        println "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö..."
        ext.shouldRunTask = true
    }
}

tasks.register("process") {
    doLast {
        println "–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö..."
    }
    onlyIf {
        tasks.named("prepare").get().ext.shouldRunTask == true
    }
}
```
- `process` –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `prepare` —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∞ —Ñ–ª–∞–≥.
## üß© 5. –õ–µ–Ω–∏–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `gradle.taskGraph.whenReady`
–ò–Ω–æ–≥–¥–∞ —É—Å–ª–æ–≤–∏–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –≥—Ä–∞—Ñ–∞ –∑–∞–¥–∞—á**:
```groovy
gradle.taskGraph.whenReady { graph ->
    if (!project.hasProperty('runSpecial')) {
        tasks.named("specialTask").configure {
            enabled = false
        }
    }
}
```
- –ó–∞–¥–∞—á–∞ `specialTask` –±—É–¥–µ—Ç **–æ—Ç–∫–ª—é—á–µ–Ω–∞**, –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ.
- –û—Ç–ª–∏—á–∏–µ: `enabled = false` –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–∞–µ—Ç –∑–∞–¥–∞—á—É –∏–∑ –≥—Ä–∞—Ñ–∞, —Ç–æ–≥–¥–∞ –∫–∞–∫ `onlyIf { false }` ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ—Ç, –Ω–æ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç.
## ‚úÖ –ò—Ç–æ–≥

|–°–ø–æ—Å–æ–±|–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å|
|---|---|
|`onlyIf {}`|–ü—Ä–æ—Å—Ç–æ–µ —É—Å–ª–æ–≤–∏–µ, –ø—Ä–æ–≤–µ—Ä—è–µ–º–æ–µ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–¥–∞—á–∏|
|`enabled = false`|–ü–æ–ª–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ –≥—Ä–∞—Ñ–∞ –∑–∞–¥–∞—á, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `whenReady`|
|–°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ (`project.hasProperty`)|–ü–µ—Ä–µ–¥–∞—á–∞ —É—Å–ª–æ–≤–∏—è –∏–∑–≤–Ω–µ (CLI, CI/CD)|
|`tasks.register("name") { ... }`|–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± –¥–ª—è –ª–µ–Ω–∏–≤–æ–π, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏|
