## ‚öôÔ∏è 1. –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
–ü—Ä–∏–º–µ—Ä:
```
my-app/
‚îú‚îÄ‚îÄ settings.gradle
‚îú‚îÄ‚îÄ build.gradle
‚îú‚îÄ‚îÄ moduleA/
‚îÇ   ‚îî‚îÄ‚îÄ build.gradle
‚îî‚îÄ‚îÄ moduleB/
    ‚îî‚îÄ‚îÄ build.gradle
```
–§–∞–π–ª `settings.gradle`:
```groovy
rootProject.name = "my-app"
include "moduleA", "moduleB"
```
## üß© 2. –°–ø–æ—Å–æ–± 1 ‚Äî –£–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏–∏ **–Ω–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ**, –∞ **–≤ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ –æ—Ç–¥–µ–ª—å–Ω–æ**
–°–∞–º—ã–π –ø—Ä—è–º–æ–π —Å–ø–æ—Å–æ–± ‚Äî –ø—Ä–æ—Å—Ç–æ **–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π Version Catalog** –∏ **–∑–∞–¥–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ**.
**`moduleA/build.gradle`:**
```groovy
plugins {
    id 'java'
}

dependencies {
    implementation "com.google.guava:guava:31.1-jre"
}
```
**`moduleB/build.gradle`:**
```groovy
plugins {
    id 'java'
}

dependencies {
    implementation "com.google.guava:guava:33.0.0-jre"
}
```
‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü—Ä–æ—Å—Ç–æ –∏ –æ—á–µ–≤–∏–¥–Ω–æ;
- –†–∞–±–æ—Ç–∞–µ—Ç "–∏–∑ –∫–æ—Ä–æ–±–∫–∏".
‚ö†Ô∏è **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ù–∏–∫–∞–∫–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ;
- –í–æ–∑–º–æ–∂–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –µ—Å–ª–∏ –º–æ–¥—É–ª–∏ –ø–æ—Ç–æ–º —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –æ–¥–∏–Ω –∞—Ä—Ç–µ—Ñ–∞–∫—Ç.
## üß© 3. –°–ø–æ—Å–æ–± 2 ‚Äî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Version Catalogs —Å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏**
–ï—Å–ª–∏ —Ç—ã –ø—Ä–∏–º–µ–Ω—è–µ—à—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —á–µ—Ä–µ–∑ `libs.versions.toml`, –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ—Ä—Å–∏–π –æ–¥–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ **–∞–ª–∏–∞—Å–∞–º–∏**.
üìÑ `gradle/libs.versions.toml`:
```toml
[versions]
guava_31 = "31.1-jre"
guava_33 = "33.0.0-jre"

[libraries]
guava-old = { module = "com.google.guava:guava", version.ref = "guava_31" }
guava-new = { module = "com.google.guava:guava", version.ref = "guava_33" }
```
–¢–µ–ø–µ—Ä—å –≤ —Ä–∞–∑–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –∞–ª–∏–∞—Å—ã:
**`moduleA/build.gradle`:**
```groovy
dependencies {
    implementation libs.guava.old
}
```
**`moduleB/build.gradle`:**
```groovy
dependencies {
    implementation libs.guava.new
}
```
‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –í—Å–µ –≤–µ—Ä—Å–∏–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã;
- IDE (IntelliJ/VS Code) –≤–∏–¥–∏—Ç –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞;
- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ, –±–µ–∑–æ–ø–∞—Å–Ω–æ.
‚ö†Ô∏è **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫:**
- –í –æ–¥–Ω–æ–º –∏—Ç–æ–≥–æ–≤–æ–º _fat jar_ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ Spring Boot) –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π, –µ—Å–ª–∏ –æ–±–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –ø–æ–ø–∞–¥—É—Ç –≤ classpath.
## üß© 4. –°–ø–æ—Å–æ–± 3 ‚Äî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (configurations)**
–ú–æ–∂–Ω–æ –æ–±—ä—è–≤–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —á—Ç–æ–±—ã —É–ø—Ä–∞–≤–ª—è—Ç—å –≤–µ—Ä—Å–∏—è–º–∏ –≥–∏–±–∫–æ.
–ü—Ä–∏–º–µ—Ä:
```groovy
configurations {
    guava31
    guava33
}

dependencies {
    guava31 "com.google.guava:guava:31.1-jre"
    guava33 "com.google.guava:guava:33.0.0-jre"
}

task showGuavaVersions {
    doLast {
        println "Guava 31 files: " + configurations.guava31.files
        println "Guava 33 files: " + configurations.guava33.files
    }
}
```
‚úÖ **–ü–ª—é—Å—ã:**
- –ú–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ;
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤, –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤.
‚ö†Ô∏è **–ú–∏–Ω—É—Å:**
- –≠—Ç–æ —É–∂–µ —Ä—É—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –Ω–µ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.
## üß© 5. –°–ø–æ—Å–æ–± 4 ‚Äî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Resolution Strategy** (—Ç–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π)
Gradle –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –≤–µ—Ä—Å–∏—é **–Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –ø–æ–¥–º–æ–¥—É–ª—è**.
**–ü—Ä–∏–º–µ—Ä:**  
–ø—É—Å—Ç—å `core` –∏ `service` –æ–±–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `guava`, –Ω–æ –≤ `core` –Ω—É–∂–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é.
üìÑ `core/build.gradle`
```groovy
dependencies {
    implementation "com.google.guava:guava:31.1-jre"
}
```
üìÑ `service/build.gradle`
```groovy
dependencies {
    implementation "com.google.guava:guava:33.0.0-jre"
}
```
üìÑ `root build.gradle` ‚Äî –ø—Ä–∏–º–µ–Ω–∏–º `resolutionStrategy` —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–¥—É–ª—è:
```groovy
subprojects {
    configurations.all {
        resolutionStrategy {
            // –ü—Ä–∏–º–µ—Ä –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
            // force "com.google.guava:guava:33.0.0-jre"
        }
    }
}

project(':core') {
    configurations.all {
        resolutionStrategy {
            force "com.google.guava:guava:31.1-jre"
        }
    }
}
```
‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ì–∏–±–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª–µ–π;
- –ú–æ–∂–Ω–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏.
‚ö†Ô∏è **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –µ–¥–∏–Ω–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞.
## üß© 6. –°–ø–æ—Å–æ–± 5 ‚Äî –ï—Å–ª–∏ –≤–µ—Ä—Å–∏–∏ –¥–æ–ª–∂–Ω—ã **—Å–æ—Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ shading)
–ï—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –æ–¥–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –±—ã–ª–∏ **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** –≤ –∏—Ç–æ–≥–æ–≤–æ–º JAR (—Ä–µ–¥–∫–∏–π —Å–ª—É—á–∞–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ API),  
–∏—Å–ø–æ–ª—å–∑—É—é—Ç **shadow plugin** –∏–ª–∏ **relocation** (–∫–∞–∫ –≤ Maven Shade).
üìÑ `build.gradle`:
```groovy
plugins {
    id 'java'
    id 'com.github.johnrengelman.shadow' version '8.1.1'
}

dependencies {
    implementation "com.google.guava:guava:31.1-jre"
    implementation "com.google.guava:guava:33.0.0-jre"
}

shadowJar {
    relocate 'com.google.common', 'shadow.guava.v31.com.google.common'
}
```
‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û–±–∞ –Ω–∞–±–æ—Ä–∞ –∫–ª–∞—Å—Å–æ–≤ –±—É–¥—É—Ç –≤ JAR, –Ω–æ –ø–æ–¥ —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞–º–∏ –∏–º—ë–Ω;
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –Ω–µ –±—É–¥–µ—Ç.
‚ö†Ô∏è **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ**, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏—é.
## üìò –ò—Ç–æ–≥–æ ‚Äî —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

|–°–ø–æ—Å–æ–±|–ì–¥–µ –∑–∞–¥–∞—ë—Ç—Å—è|–ì–∏–±–∫–æ—Å—Ç—å|–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è|–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è|
|---|---|---|---|---|
|1. –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤ –º–æ–¥—É–ª—è—Ö|–í –∫–∞–∂–¥–æ–º `build.gradle`|‚òÖ‚òÖ|‚úñ|–ü—Ä–æ—Å—Ç—ã–µ —Å–ª—É—á–∞–∏|
|2. Version Catalog (—Ä–∞–∑–Ω—ã–µ –∞–ª–∏–∞—Å—ã)|`libs.versions.toml`|‚òÖ‚òÖ‚òÖ|‚úÖ|–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã|
|3. –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏|–í–Ω—É—Ç—Ä–∏ `build.gradle`|‚òÖ‚òÖ‚òÖ‚òÖ|‚úñ|–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∑–∞–¥–∞—á–∏, –∞–Ω–∞–ª–∏–∑|
|4. Resolution Strategy|–ö–æ—Ä–Ω–µ–≤–æ–π –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π|‚òÖ‚òÖ‚òÖ‚òÖ|‚úÖ|–ò–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ|
|5. Shadow / relocate|–í `build.gradle`|‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ|‚úñ|–°–æ–≤–º–µ—â–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π|
‚úÖ **–ò—Ç–æ–≥–æ:**
> –ï—Å–ª–∏ —Ç–µ–±–µ –ø—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã —Ä–∞–∑–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –æ–¥–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏,  
> ‚Äî **—É–∫–∞–∂–∏ –≤–µ—Ä—Å–∏–∏ –ø—Ä—è–º–æ –≤ –º–æ–¥—É–ª—è—Ö**,  
> –∏–ª–∏, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Version Catalog, ‚Äî **—Å–æ–∑–¥–∞–π –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–ª–∏–∞—Å–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `guava-old` –∏ `guava-new`).