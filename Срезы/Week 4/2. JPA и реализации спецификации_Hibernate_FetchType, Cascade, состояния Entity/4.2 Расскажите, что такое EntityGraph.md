`EntityGraph` ‚Äî —ç—Ç–æ **–º–µ—Ö–∞–Ω–∏–∑–º JPA**, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π **—É–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ (`fetch`) —Å—É—â–Ω–æ—Å—Ç–µ–π** –±–æ–ª–µ–µ –≥–∏–±–∫–æ, —á–µ–º –ø—Ä–æ—Å—Ç—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ `FetchType.LAZY` –∏–ª–∏ `FetchType.EAGER`.
## üß© –ß—Ç–æ —Ç–∞–∫–æ–µ EntityGraph
`EntityGraph` ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± **–∑–∞—Ä–∞–Ω–µ–µ —É–∫–∞–∑–∞—Ç—å**, –∫–∞–∫–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ –ø–æ–¥–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞.  
–û–Ω –ø–æ–º–æ–≥–∞–µ—Ç:
- **–ò–∑–±–µ–∂–∞—Ç—å N+1 –∑–∞–ø—Ä–æ—Å–æ–≤**
- **–£—Å–∫–æ—Ä–∏—Ç—å –≤—ã–±–æ—Ä–∫—É** –¥–∞–Ω–Ω—ã—Ö
- **–ù–µ –º–µ–Ω—è—Ç—å** –ø–æ–≤–µ–¥–µ–Ω–∏–µ `FetchType` –≤ –º–æ–¥–µ–ª–∏
## üîπ –ü—Ä–∏–º–µ—Ä: –±–µ–∑ `EntityGraph`
```java
@Entity
public class User {
    @OneToMany(mappedBy = "user", fetch = FetchType.LAZY)
    private List<Order> orders;
}
```
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `orders` –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è **–ª–µ–Ω–∏–≤–æ**, —Ç.–µ. –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º.  
–ï—Å–ª–∏ —É –Ω–∞—Å 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–æ–ª—É—á–∏—Ç—Å—è 1 (–æ—Å–Ω–æ–≤–Ω–æ–π) + 100 (–Ω–∞ –∑–∞–∫–∞–∑—ã) –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí **–ø—Ä–æ–±–ª–µ–º–∞ N+1**.
## üîπ –ü—Ä–∏–º–µ—Ä —Å `EntityGraph`
```java
@EntityGraph(attributePaths = {"orders"})
@Query("SELECT u FROM User u")
List<User> findAllWithOrders();
```
üëâ –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ Hibernate –≤—ã–ø–æ–ª–Ω–∏—Ç **–æ–¥–∏–Ω JOIN-–∑–∞–ø—Ä–æ—Å** –∏ –∑–∞–≥—Ä—É–∑–∏—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π **–≤–º–µ—Å—Ç–µ —Å –∑–∞–∫–∞–∑–∞–º–∏**.  
–ü–æ–≤–µ–¥–µ–Ω–∏–µ `fetch = LAZY` –ø—Ä–∏ —ç—Ç–æ–º **–Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ**, –∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –∫ —ç—Ç–æ–º—É –∑–∞–ø—Ä–æ—Å—É**.
## üß± –í–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
### 1. **–ß–µ—Ä–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é `@EntityGraph`**
```java
public interface UserRepository extends JpaRepository<User, Long> {

    @EntityGraph(attributePaths = {"orders", "profile"})
    List<User> findAll();
}
```
### 2. **–ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ —á–µ—Ä–µ–∑ API**
```java
EntityGraph<User> graph = entityManager.createEntityGraph(User.class);
graph.addAttributeNodes("orders");

Map<String, Object> hints = new HashMap<>();
hints.put("javax.persistence.fetchgraph", graph);

User user = entityManager.find(User.class, 1L, hints);
```
## ‚öôÔ∏è –í–∏–¥—ã –≥—Ä–∞—Ñ–æ–≤

|–¢–∏–ø|–ö–ª—é—á|–ü–æ–≤–µ–¥–µ–Ω–∏–µ|
|---|---|---|
|`javax.persistence.fetchgraph`|**Fetch Graph**|–ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø–æ–ª—è; –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî –ª–µ–Ω–∏–≤–æ.|
|`javax.persistence.loadgraph`|**Load Graph**|–ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω—ã–µ + —Ç–µ, —á—Ç–æ —É–∂–µ `EAGER` –ø–æ –º–æ–¥–µ–ª–∏.|
## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
‚úÖ –ò–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç N+1 –∑–∞–ø—Ä–æ—Å–∞  
‚úÖ –ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–≥—Ä—É–∑–∫–æ–π –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏  
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å `Spring Data JPA` –∏ `EntityManager`  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã (—á–µ—Ä–µ–∑ `"orders.items"`)
## üß† –ò—Ç–æ–≥–æ

|–ß—Ç–æ|–ó–∞—á–µ–º|
|---|---|
|**EntityGraph**|–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ —Å–≤—è–∑–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞—Ä–∞–Ω–µ–µ|
|**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è**|–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏|
|**–†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑**|`@EntityGraph` –∏–ª–∏ `EntityManager` hints|
|**–¢–∏–ø—ã**|`fetchgraph` –∏ `loadgraph`|
