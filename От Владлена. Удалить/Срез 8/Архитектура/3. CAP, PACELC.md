### Что обозначают аббревиатуры CAP и PACELC в контексте распределенных систем?

- **CAP:** Теорема CAP (Consistency, Availability, Partition tolerance) описывает три ключевых свойства распределенной системы:
  - **Consistency (Согласованность):** все узлы видят одинаковое состояние данных в один момент времени.
  - **Availability (Доступность):** система продолжает отвечать на запросы даже при сбоях узлов.
  - **Partition tolerance (Устойчивость к разделениям):** система продолжает работать при сетевых разделениях или сбоях связи между узлами.

- **PACELC:** Расширенная версия теоремы CAP, которая учитывает не только разделения сети, но и задержки при отсутствии разделений:
  - **P:** Partition tolerance
  - **A:** Availability
  - **C:** Consistency
  - **E:** Else (при отсутствии разделений)
  - **L:** Latency (задержка)
  - **C:** Consistency

### Какой компонент теоремы CAP невозможно достичь одновременно с двумя другими?

- В рамках теоремы CAP невозможно одновременно обеспечить **согласованность**, **доступность** и **устойчивость к разделениям**.  
  То есть, при наличии сетевого разделения (Partition) система должна выбрать между:
  - Обеспечением согласованности и отказом в доступе (C + P), или
  - Обеспечением доступности и отказом в согласованности (A + P).

### Опишите основное отличие между теоремой CAP и теоремой PACELC.

- **Теорема CAP** фокусируется на выборе между согласованностью, доступностью и устойчивостью к разделениям во время сетевых разделений — она говорит, что нельзя одновременно реализовать все три свойства при наличии разделения сети.

- **Теорема PACELC** расширяет этот подход, указывая, что даже без разделений системы сталкиваются с компромиссами между задержками (latency) и согласованностью.  
  То есть:
  - В случае разделения сети (P) необходимо выбирать между C и A.
  - В случае отсутствия разделений (E) возникает компромисс между задержкой (L) и согласованностью (C).  

Это позволяет более полно учитывать поведение систем в реальных условиях, включая задержки и производительность.

### Как влияет разделение (Partitioning) на доступность (Availability) и согласованность (Consistency) в теореме CAP?

- **Разделение сети (Partitioning)** — ситуация, когда узлы системы не могут обмениваться данными из-за сбоев или сетевых проблем.  
- В условиях разделения системы **не могут одновременно обеспечить** и **доступность**, и **согласованность**.  
- **Выбор при разделении:**
  - **Обеспечить согласованность (C):** система может отказаться от обработки запросов, чтобы гарантировать, что все узлы видят одинаковое состояние данных. Это — режим **CP** (Consistency + Partition tolerance).  
  - **Обеспечить доступность (A):** система продолжает отвечать на запросы, даже если данные могут быть несогласованными — это режим **AP** (Availability + Partition tolerance).  

Итак, при наличии разделения приходится выбирать между согласованностью и доступностью.

### На какие две части делится выбор в теореме PACELC и что они означают?

- Теорема PACELC делит выбор между свойствами системы на два периода:
  - **P (Partition tolerance):** при наличии разделения сети необходимо выбирать между согласованностью и доступностью.
  - **E (Else):** в отсутствие разделений система сталкивается с компромиссом между задержками (latency) и согласованностью.
  
- Таким образом:
  - В условиях разделения (P) — выбор между C и A.
  - В условиях отсутствия разделений (E) — выбор между низкой задержкой (L) и высокой согласованностью (C).

Это расширяет модель CAP, учитывая влияние задержек и производительности.

### Какие типы распределенных систем лучше всего соответствуют каждому из трех принципов CAP (C, A, P)?

- **Согласованность (C):**  
  - Подходит для систем, где важна точная актуальность данных и их целостность.  
  - Примеры: банковские системы, системы учета запасов, системы бронирования.

- **Доступность (A):**  
  - Предпочтительна для систем, где важно быстро отвечать на запросы даже при возможной несогласованности данных.  
  - Примеры: социальные сети, кэш-сервисы, системы потоковой передачи данных.

- **Устойчивость к разделениям (Partition tolerance):**  
  - Неотъемлемая характеристика всех современных распределенных систем — они должны продолжать работать при сетевых сбоях.  
  - Все крупные распределенные системы проектируются с учетом P, поскольку сеть может иногда разделяться.

Обратите внимание: большинство систем выбирают два свойства из трех в зависимости от требований бизнеса и сценариев использования.

### Объясните, как теорема PACELC расширяет и дополняет теорему CAP.

- **Теорема CAP** утверждает, что в условиях разделения сети (Partition) невозможно одновременно обеспечить все три свойства: согласованность (C), доступность (A) и устойчивость к разделениям (P). В результате при разделении приходится выбирать между C и A.

- **Теорема PACELC** расширяет эту концепцию, добавляя важный аспект — поведение системы **вне условий разделения**:
  - **P (Partition tolerance):** при наличии разделения необходимо выбирать между C и A.
  - **E (Else):** в отсутствие разделений система сталкивается с компромиссом между задержками (L) и согласованностью (C).

- Таким образом, PACELC показывает, что даже без разделений системы должны балансировать между низкой задержкой и высокой согласованностью, что делает модель более полной и реалистичной для современных систем.

### Какие компромиссы следует рассмотреть при проектировании системы с высокой доступностью в условиях разделения сети, согласно PACELC?

- В условиях **разделения сети (P)**:
  - **Выбор между доступностью и согласованностью:**
    - Обеспечить **доступность** — система продолжает отвечать на запросы, даже если данные могут быть несогласованными.
    - Обеспечить **согласованность** — система может отказаться от обработки запросов или вернуть ошибку, чтобы гарантировать целостность данных.

- В условиях **отсутствия разделений (E)**:
  - **Выбор между низкой задержкой и высокой согласованностью:**
    - Для низкой задержки — использовать асинхронные операции или кеширование.
    - Для высокой согласованности — применять синхронные протоколы, что может увеличить задержки.

Проектировщики должны учитывать эти компромиссы в зависимости от требований к системе.

### В каких сценариях использования распределенных систем предпочтение согласованности перед доступностью (и наоборот) может быть оправдано, исходя из теорем PACELC и CAP?

- **Предпочтение согласованности (C):**
  - В системах, где точность данных критична: банковские системы, системы учета запасов, системы бронирования.
  - Там, где несогласованные данные могут привести к серьезным ошибкам или убыткам.

- **Предпочтение доступности (A):**
  - В системах с высоким трафиком и требованиями к быстрому отклику: социальные сети, потоковые сервисы, кэш-сервисы.
  - Где небольшая несогласованность не критична или временно допустима.

- **Обоснование выбора:**
  - Согласно PACELC и CAP, если важна целостность данных — выбирают системы с акцентом на C.
  - Если важна скорость реакции и отказоустойчивость — выбирают системы с акцентом на A.
  
Это зависит от бизнес-требований и сценариев использования. Например:
- В финансовых приложениях предпочтительнее высокая согласованность.
- В социальных сетях — высокая доступность важнее мгновенной точности данных.
