üëâ **–û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** (window functions) ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç SQL, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ **–±–µ–∑ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å—Ç—Ä–æ–∫**, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ `GROUP BY`.
üìå –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è:
> –û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `OVER` –¥–ª—è **—Ä–∞—Å—á—ë—Ç–∞ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –ø–æ ‚Äú–æ–∫–Ω—É‚Äù** ‚Äî –Ω–∞–±–æ—Ä—É —Å—Ç—Ä–æ–∫, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
## üßÆ 1. **–ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏**
```sql
–ê–ì–†–ï–ì–ê–¢–ù–ê–Ø_–§–£–ù–ö–¶–ò–Ø(...) OVER (
    [PARTITION BY —Å—Ç–æ–ª–±—Ü—ã]
    [ORDER BY —Å—Ç–æ–ª–±—Ü—ã]
    [ROWS ...]
)
```
- `PARTITION BY` ‚Äî —Ä–∞–∑–±–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≥—Ä—É–ø–ø—ã (–∫–∞–∫ `GROUP BY`), –Ω–æ **–Ω–µ —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –∏—Ö**.
- `ORDER BY` ‚Äî –∑–∞–¥–∞—ë—Ç –ø–æ—Ä—è–¥–æ–∫ –≤–Ω—É—Ç—Ä–∏ –æ–∫–Ω–∞ (—á–∞—Å—Ç–æ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –∫—É–º—É–ª—è—Ç–∏–≤–Ω—ã—Ö —Å—É–º–º).
- `ROWS` –∏–ª–∏ `RANGE` ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã –æ–∫–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
## üß≠ 2. üìä –ü—Ä–∏–º–µ—Ä —Å `SUM()` –∫–∞–∫ –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π
–î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ `sales`:

|id|department|amount|
|---|---|---|
|1|Sales|1000|
|2|Sales|2000|
|3|IT|1500|
|4|IT|500|
|5|HR|800|
‚úÖ –ó–∞–ø—Ä–æ—Å:
```sql
SELECT 
    department,
    amount,
    SUM(amount) OVER (PARTITION BY department) AS total_by_department
FROM sales;
```
üì§ –†–µ–∑—É–ª—å—Ç–∞—Ç:

|department|amount|total_by_department|
|---|---|---|
|Sales|1000|3000|
|Sales|2000|3000|
|IT|1500|2000|
|IT|500|2000|
|HR|800|800|
üìù –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ **—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è**, –Ω–æ –∫ –Ω–µ–π –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞–≥—Ä–µ–≥–∞—Ç –ø–æ –æ–∫–Ω—É.
## üßÆ 3. üìà –ü—Ä–∏–º–µ—Ä —Å –∫—É–º—É–ª—è—Ç–∏–≤–Ω–æ–π —Å—É–º–º–æ–π
‚úÖ –ó–∞–ø—Ä–æ—Å:
```sql
SELECT
    department,
    amount,
    SUM(amount) OVER (
        PARTITION BY department
        ORDER BY id
        ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW
    ) AS running_total
FROM sales;
```
üì§ –†–µ–∑—É–ª—å—Ç–∞—Ç:

|department|amount|running_total|
|---|---|---|
|Sales|1000|1000|
|Sales|2000|3000|
|IT|1500|1500|
|IT|500|2000|
|HR|800|800|
üëâ –ó–¥–µ—Å—å `SUM` –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å—Ç—Ä–æ—á–Ω–æ –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª–∞.
## üßÆ 4. üìä –ü—Ä–∏–º–µ—Ä —Å `COUNT()` –∫–∞–∫ –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π
‚úÖ –ó–∞–ø—Ä–æ—Å:
```sql
SELECT
    department,
    COUNT(*) OVER (PARTITION BY department) AS employees_in_department
FROM employees;
```
üì§ –†–µ–∑—É–ª—å—Ç–∞—Ç:  
–ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ –µ—ë –æ—Ç–¥–µ–ª–µ.
## üßÆ 5. üìä –ü—Ä–∏–º–µ—Ä —Å `AVG()` ‚Äî —Å—Ä–µ–¥–Ω–µ–µ –ø–æ –æ–∫–Ω—É
‚úÖ –ó–∞–ø—Ä–æ—Å:
```sql
SELECT
    department,
    amount,
    AVG(amount) OVER (PARTITION BY department) AS avg_by_department
FROM sales;
```
üëâ –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ ¬´—Å—Ö–ª–æ–ø—ã–≤–∞–µ—Ç¬ª —Å—Ç—Ä–æ–∫–∏, –∫–∞–∫ —Å `GROUP BY`, –∞ –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ—â—ë –æ–¥–∏–Ω —Å—Ç–æ–ª–±–µ—Ü.
## ‚ö° –û—Ç–ª–∏—á–∏—è `GROUP BY` –∏ –æ–∫–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

|`GROUP BY`|–û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏|
|---|---|
|–°–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏ –≤ –≥—Ä—É–ø–ø—ã|–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏|
|–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ –∞–≥—Ä–µ–≥–∞—Ç–µ|–ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –æ–±—ã—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏|
|–ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `WHERE`|–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞—Ö, CTE –∏ —Ç.–¥.|
## üìå –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –æ–∫–æ–Ω–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö:
- `SUM()` ‚Äî —Å—É–º–º–∞
- `AVG()` ‚Äî —Å—Ä–µ–¥–Ω–µ–µ
- `COUNT()` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- `MAX()` ‚Äî –º–∞–∫—Å–∏–º—É–º
- `MIN()` ‚Äî –º–∏–Ω–∏–º—É–º
(–ê —Ç–∞–∫–∂–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è: `ROW_NUMBER()`, `RANK()`, `DENSE_RANK()`, `NTILE()` ‚Äî –æ–Ω–∏ —Ç–æ–∂–µ –æ–∫–æ–Ω–Ω—ã–µ, –Ω–æ –Ω–µ –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ.)
‚úÖ **–í—ã–≤–æ–¥:**  
–û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ **–±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä–æ–∫**, —á—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è:
- –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç—á—ë—Ç–æ–≤,
- —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è,
- —Ä–∞—Å—á—ë—Ç–∞ –¥–æ–ª–µ–π, –∫—É–º—É–ª—è—Ç–∏–≤–Ω—ã—Ö —Å—É–º–º –∏ —Å—Ä–µ–¥–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π,
- —Å—Ä–∞–≤–Ω–µ–Ω–∏–π –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø.