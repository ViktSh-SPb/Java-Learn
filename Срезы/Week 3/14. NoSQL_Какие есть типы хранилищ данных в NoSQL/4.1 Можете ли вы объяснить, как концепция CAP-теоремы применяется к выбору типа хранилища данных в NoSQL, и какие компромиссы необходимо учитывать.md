**CAP-ัะตะพัะตะผะฐ** โ ะพะดะธะฝ ะธะท ะบะปััะตะฒัั ะฟัะธะฝัะธะฟะพะฒ, ะบะพัะพััะน ะฝัะถะฝะพ ะฟะพะฝะธะผะฐัั ะฟัะธ ะฒัะฑะพัะต ัะธะฟะฐ ััะฐะฝะธะปะธัะฐ ะดะฐะฝะฝัั, ะพัะพะฑะตะฝะฝะพ ะฒ ะผะธัะต **NoSQL**.  
ะะฝะฐ ะฟะพะผะพะณะฐะตั ะพะฑัััะฝะธัั, **ะบะฐะบะธะต ะบะพะผะฟัะพะผะธััั ะฟัะธัะพะดะธััั ะดะตะปะฐัั** ะฟัะธ ะฟัะพะตะบัะธัะพะฒะฐะฝะธะธ ะธ ะฒัะฑะพัะต ัะฐัะฟัะตะดะตะปัะฝะฝัั ัะธััะตะผ ััะฐะฝะตะฝะธั.
## ๐งญ ะงัะพ ะณะพะฒะพัะธั CAP-ัะตะพัะตะผะฐ
CAP โ ััะพ ะฐะฑะฑัะตะฒะธะฐัััะฐ ะพั:
- **C** โ _Consistency_ (**ัะพะณะปะฐัะพะฒะฐะฝะฝะพััั**)
- **A** โ _Availability_ (**ะดะพัััะฟะฝะพััั**)
- **P** โ _Partition Tolerance_ (**ัััะพะนัะธะฒะพััั ะบ ัะฐะทะดะตะปะตะฝะธั ัะตัะธ**)
๐ **ะกััั ัะตะพัะตะผั** (ะญัะธะบ ะััะตั, 2000):
> ะ ััะปะพะฒะธัั ัะตัะตะฒัั ัะฐะทะดะตะปะตะฝะธะน ัะธััะตะผะฐ ะผะพะถะตั ะณะฐัะฐะฝัะธัะพะฒะฐัั **ะฝะต ะฑะพะปะตะต ะดะฒัั** ะธะท ัััั ัะฒะพะนััะฒ:  
> **C**, **A** ะธะปะธ **P**.
## ๐ ะะพะดัะพะฑะฝะพ ะพ ะบะฐะถะดะพะผ ัะฒะพะนััะฒะต
### ๐งฎ 1. Consistency โ ะกะพะณะปะฐัะพะฒะฐะฝะฝะพััั
ะัะต ัะทะปั ัะธััะตะผั ะฒ ะพะดะธะฝ ะธ ัะพั ะถะต ะผะพะผะตะฝั ะฒัะตะผะตะฝะธ ะฒะธะดัั **ะพะดะฝะธ ะธ ัะต ะถะต ะดะฐะฝะฝัะต**.  
ะะพัะปะต ะทะฐะฟะธัะธ ะดะฐะฝะฝัะต ะผะพะผะตะฝัะฐะปัะฝะพ ััะฐะฝะพะฒัััั ะฒะธะดะฝั ะฝะฐ ะฒัะตั ัะทะปะฐั.
๐ ะัะธะผะตั:  
ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะพะฑะฝะพะฒะธะป ะฟัะพัะธะปั, ะธ ััั ะถะต ัะดะตะปะฐะป ะฟะพะฒัะพัะฝัะน ะทะฐะฟัะพั โ ะพะฝ ะฟะพะปััะธั ะพะฑะฝะพะฒะปัะฝะฝัะต ะดะฐะฝะฝัะต, ะฝะตะทะฐะฒะธัะธะผะพ ะพั ัะพะณะพ, ะบ ะบะฐะบะพะผั ัะตัะฒะตัั ะฟะพะฟะฐะป.
๐ ะะฑััะฝะพ ะดะพััะธะณะฐะตััั ัะตัะตะท ัััะพะณัั ัะธะฝััะพะฝะธะทะฐัะธั ะผะตะถะดั ัะทะปะฐะผะธ.
### ๐ข 2. Availability โ ะะพัััะฟะฝะพััั
ะะฐะถะดัะน ะทะฐะฟัะพั ะบ ัะธััะตะผะต **ะฟะพะปััะธั ะพัะฒะตั**, ะดะฐะถะต ะตัะปะธ ะฝะตะบะพัะพััะต ัะทะปั ะฝะตะดะพัััะฟะฝั.  
ะัะฒะตั ะผะพะถะตั ะฝะต ะณะฐัะฐะฝัะธัะพะฒะฐัั, ััะพ ััะพ ะฟะพัะปะตะดะฝะธะต ะดะฐะฝะฝัะต, ะฝะพ ัะธััะตะผะฐ **ะฝะต ะฟะฐะดะฐะตั** ะธ **ะฝะต ะฑะปะพะบะธััะตััั**.
๐ ะัะธะผะตั:  
ะัะปะธ ะพะดะธะฝ ัะตัะฒะตั ะฝะต ะพัะฒะตัะฐะตั, ะทะฐะฟัะพั ะพะฑัะฐะฑะฐััะฒะฐะตััั ะดััะณะธะผ. ะะพะปัะทะพะฒะฐัะตะปั ะฒัั ัะฐะฒะฝะพ ะฟะพะปััะฐะตั ะดะฐะฝะฝัะต (ะฒะพะทะผะพะถะฝะพ, ัััะฐัะตะฒัะธะต).
### ๐ 3. Partition Tolerance โ ะฃััะพะนัะธะฒะพััั ะบ ัะฐะทะดะตะปะตะฝะธั ัะตัะธ
ะกะธััะตะผะฐ ะฟัะพะดะพะปะถะฐะตั ัะฐะฑะพัะฐัั, ะดะฐะถะต ะตัะปะธ ัะฒัะทั ะผะตะถะดั ัะทะปะฐะผะธ ะฝะฐัััะตะฝะฐ (ัะตัั ยซัะฐะทะฑะธัะฐยป ะฝะฐ ัะตะณะผะตะฝัั).  
ะญัะพ **ะฝะตะธะทะฑะตะถะฝะพะต ััะปะพะฒะธะต** ะดะปั ะฒัะตั ัะตะฐะปัะฝะพ ัะฐัะฟัะตะดะตะปัะฝะฝัั ัะธััะตะผ.
๐ ะัะธะผะตั:  
ะัะปะธ ัะฐััั ะดะฐัะฐ-ัะตะฝััะฐ ะฝะตะดะพัััะฟะฝะฐ ะธะท-ะทะฐ ะพะฑััะฒะฐ ัะฒัะทะธ, ะพััะฐะปัะฝัะต ัะทะปั ะฟัะพะดะพะปะถะฐัั ะพะฑัะฐะฑะฐััะฒะฐัั ะทะฐะฟัะพัั.
๐ ะ ัะพะฒัะตะผะตะฝะฝัั ัะฐัะฟัะตะดะตะปัะฝะฝัั ัะธััะตะผะฐั **P ะฝะต ะพะฑััะถะดะฐะตััั โ ะพะฝะพ ะพะฑัะทะฐัะตะปัะฝะพ**.
## โ๏ธ ะะพะผะฟัะพะผะธัั CAP
ะะพัะบะพะปัะบั **P ะฝะตะธะทะฑะตะถะฝะพ**, ัะฐะทัะฐะฑะพััะธะบะธ ัะฐะบัะธัะตัะบะธ ะฒัะฑะธัะฐัั ะผะตะถะดั:
- **CP** โ Consistency + Partition tolerance (ัััะพะณะฐั ัะพะณะปะฐัะพะฒะฐะฝะฝะพััั, ะฝะพ ะผะพะณัั ะฑััั ะทะฐะดะตัะถะบะธ ะฒ ะดะพัััะฟะฝะพััะธ)
- **AP** โ Availability + Partition tolerance (ะฒััะพะบะฐั ะดะพัััะฟะฝะพััั, ะฝะพ ะฒะพะทะผะพะถะฝะฐ ะฒัะตะผะตะฝะฝะฐั ะฝะตัะพะณะปะฐัะพะฒะฐะฝะฝะพััั ะดะฐะฝะฝัั)
๐ **CA** (Consistency + Availability ะฑะตะท Partition tolerance) ะฒะพะทะผะพะถะฝะพ **ัะพะปัะบะพ ะฒ ัะตะฝััะฐะปะธะทะพะฒะฐะฝะฝัั ัะธััะตะผะฐั**, ะฝะต ะฒ ัะฐัะฟัะตะดะตะปัะฝะฝัั.
## ๐งญ ะะฐะบ ััะพ ะฒะปะธัะตั ะฝะฐ ะฒัะฑะพั NoSQL-ััะฐะฝะธะปะธัะฐ
ะะฐะทะฝัะต NoSQL ะกะฃะะ ะดะตะปะฐัั **ัะฐะทะฝัะต ะฐะบัะตะฝัั** ะฟะพ CAP:

|ะขะธะฟ NoSQL|ะัะธะผะตัั|ะะพะดะตะปั CAP|ะัะพะฑะตะฝะฝะพััะธ|
|---|---|---|---|
|**CP**|HBase, MongoDB (ะฒ ัััะพะณะพะผ ัะตะถะธะผะต), Zookeeper|Consistency + Partition tolerance|ะกะธััะตะผะฐ ะณะฐัะฐะฝัะธััะตั ะฐะบััะฐะปัะฝะพััั ะดะฐะฝะฝัั, ะฝะพ ะฒ ัะปััะฐะต ัะฐะทะดะตะปะตะฝะธั ัะตัะธ ะผะพะถะตั ะฒัะตะผะตะฝะฝะพ ะฟะพัะตัััั ะดะพัััะฟะฝะพััั|
|**AP**|Cassandra, Riak, DynamoDB|Availability + Partition tolerance|ะกะธััะตะผะฐ ะฒัะตะณะดะฐ ะพัะฒะตัะฐะตั, ะฝะพ ะผะพะถะตั ะฒะตัะฝััั ัััะฐัะตะฒัะธะต ะดะฐะฝะฝัะต (eventual consistency)|
|**CA**|ะะตะปััะธะพะฝะฝัะต ะกะฃะะ ะฒ ะพะดะฝะพะผ ัะทะปะต|Consistency + Availability|ะะฐะฑะพัะฐะตั ัะพัะพัะพ ะฒ ะฝะตัะฐัะฟัะตะดะตะปัะฝะฝะพะน ััะตะดะต, ะฝะพ ะฝะตัััะพะนัะธะฒะฐ ะบ ัะตัะตะฒัะผ ัะฑะพัะผ|
## ๐ฐ๏ธ Eventual Consistency (ะฒ AP-ัะธััะตะผะฐั)
ะะฝะพะณะธะต NoSQL-ะฑะฐะทั ะฝะต ะฟะพะดะดะตัะถะธะฒะฐัั ัััะพะณัั ัะพะณะปะฐัะพะฒะฐะฝะฝะพััั, ะฐ ะธัะฟะพะปัะทััั **ะผะพะดะตะปั ยซะฒ ะบะพะฝะตัะฝะพะผ ะธัะพะณะต ัะพะณะปะฐัะพะฒะฐะฝะฝะพััะธยป**:
- ะะพัะปะต ะทะฐะฟะธัะธ ะดะฐะฝะฝัะต **ัะฐัะฟัะพัััะฐะฝััััั ะฟะพ ัะทะปะฐะผ ั ะทะฐะดะตัะถะบะพะน**;
- ะะฐ ะบะพัะพัะบะพะต ะฒัะตะผั ัะฐะทะฝัะต ะฟะพะปัะทะพะฒะฐัะตะปะธ ะผะพะณัั ะฒะธะดะตัั ัะฐะทะฝัะต ะฒะตััะธะธ ะดะฐะฝะฝัั;
- ะงะตัะตะท ะฝะตะบะพัะพัะพะต ะฒัะตะผั ะดะฐะฝะฝัะต ัะธะฝััะพะฝะธะทะธัััััั ะธ ััะฐะฝะพะฒัััั ะพะดะธะฝะฐะบะพะฒัะผะธ ะฒะตะทะดะต.
๐ ะัะธะผะตั: ะฒ **Cassandra** ะพะฑะฝะพะฒะปะตะฝะธะต ะผะพะถะตั ะทะฐะฝััั ะฝะตัะบะพะปัะบะพ ะผะธะปะปะธัะตะบัะฝะด ะธะปะธ ัะตะบัะฝะด, ะฝะพ eventually ะฒัะต ัะตะฟะปะธะบะธ ะฑัะดัั ะพะดะธะฝะฐะบะพะฒัะผะธ.
## ๐ง ะะฐะบ ะฒัะฑะธัะฐัั ะผะพะดะตะปั ะฒ ัะตะฐะปัะฝัั ะฟัะพะตะบัะฐั
### โ CP-ัะธััะตะผั
ะะพะดัะพะดัั, ะตัะปะธ:
- โ ะขัะตะฑัะตััั ัััะพะณะฐั ะบะพะฝัะธััะตะฝัะฝะพััั (ะฑะฐะฝะบะธะฝะณ, ัะธะฝะฐะฝัะพะฒัะต ััะฐะฝะทะฐะบัะธะธ, ะฑัะพะฝะธัะพะฒะฐะฝะธะต).
- โณ ะะพะฟัััะธะผะพ, ััะพ ัะธััะตะผะฐ ะฒัะตะผะตะฝะฝะพ ะฝะต ะพัะฒะตัะธั ะฟัะธ ัะฑะพัั ัะตัะธ.
- ะัะธะผะตั: ะพะฝะปะฐะนะฝ-ะฑะฐะฝะบะธะฝะณ โ ะฝะตะปัะทั ะฟะพะบะฐะทะฐัั ััะฐััะน ะฑะฐะปะฐะฝั.
### โ AP-ัะธััะตะผั
ะะพะดัะพะดัั, ะตัะปะธ:
- ๐ข ะะฐะถะฝะฐ ะฒััะพะบะฐั ะดะพัััะฟะฝะพััั (ัะตัะฒะธั ะฝะต ะดะพะปะถะตะฝ ะฟะฐะดะฐัั ะฟัะธ ัะฑะพะต ัะทะปะฐ).
- ๐ค ะะพะฟัััะธะผะฐ ะฒัะตะผะตะฝะฝะฐั ัะฐััะพะณะปะฐัะพะฒะฐะฝะฝะพััั ะดะฐะฝะฝัั.
- ะัะธะผะตั: ัะพัะธะฐะปัะฝัะต ัะตัะธ โ ะตัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะต ัะฒะธะดะธั ััะฐะทั ะฝะพะฒัะน ะปะฐะนะบ, ะฝะธัะตะณะพ ะบัะธัะธัะฝะพะณะพ ะฝะต ะฟัะพะธะทะพะนะดัั.
## โ๏ธ ะะธะฑัะธะดะฝัะต ะฟะพะดัะพะดั (Tunable Consistency)
ะกะพะฒัะตะผะตะฝะฝัะต ัะธััะตะผั (ะฝะฐะฟัะธะผะตั, **Cassandra**, **MongoDB**) ะฟะพะทะฒะพะปััั **ะฝะฐัััะฐะธะฒะฐัั ััะพะฒะตะฝั ัะพะณะปะฐัะพะฒะฐะฝะฝะพััะธ**:
- `ONE` โ ะฑััััะตะต, ะฝะพ ะฒะพะทะผะพะถะฝั ัััะฐัะตะฒัะธะต ะดะฐะฝะฝัะต;
- `QUORUM` โ ะฑะฐะปะฐะฝั ะผะตะถะดั ะดะพัััะฟะฝะพัััั ะธ ะบะพะฝัะธััะตะฝัะฝะพัััั;
- `ALL` โ ะฟะพะปะฝะฐั ัะพะณะปะฐัะพะฒะฐะฝะฝะพััั, ะฝะพ ััะถะต ะดะพัััะฟะฝะพััั.
๐ ะญัะพ ะดะฐัั ะณะธะฑะบะพััั: ัะฐะทะฝัะต ะพะฟะตัะฐัะธะธ ะผะพะณัั ะธัะฟะพะปัะทะพะฒะฐัั ัะฐะทะฝัะต ััะพะฒะฝะธ ะณะฐัะฐะฝัะธะธ.
## ๐งพ ะัะพะณ: ััะพ ะดะฐัั CAP ะดะปั ะฒัะฑะพัะฐ NoSQL

|ะัะธัะตัะธะน|CP-ัะธััะตะผะฐ|AP-ัะธััะตะผะฐ|
|---|---|---|
|ะกะพะณะปะฐัะพะฒะฐะฝะฝะพััั ะดะฐะฝะฝัั|ะกััะพะณะฐั|ะ ะบะพะฝะตัะฝะพะผ ะธัะพะณะต|
|ะะพัััะฟะฝะพััั|ะะพะถะตั ัะฝะธะถะฐัััั ะฟัะธ ัะฑะพัั ัะตัะธ|ะะฐัะฐะฝัะธััะตััั|
|ะะฐัััะฐะฑะธััะตะผะพััั|ะกะปะพะถะฝะตะต|ะัะปะธัะฝะฐั|
|ะัะธะผะตัั|MongoDB (strict), HBase|Cassandra, Riak, DynamoDB|
|ะะฑะปะฐััะธ ะฟัะธะผะตะฝะตะฝะธั|ะะฐะฝะบะธะฝะณ, ะฑัะพะฝะธัะพะฒะฐะฝะธะต, ัะธะฝะฐะฝัั|ะกะพััะตัะธ, ะปะพะณะธัะพะฒะฐะฝะธะต, ะผะพะฝะธัะพัะธะฝะณ|
โ **ะะปััะตะฒะฐั ะผััะปั:**
> CAP-ัะตะพัะตะผะฐ ะฝะต ะณะพะฒะพัะธั, ััะพ ะพะดะฝะพ ัะฒะพะนััะฒะพ ยซะปัััะตยป, ะฐ ะดััะณะพะต ยซััะถะตยป. ะะฝะฐ ะฟะพะผะพะณะฐะตั **ะพัะพะทะฝะฐะฝะฝะพ ะฒัะฑะธัะฐัั ะบะพะผะฟัะพะผะธัั**, ะบะพัะพััะน ะปัััะต ะฟะพะดัะพะดะธั ะฒะฐัะตะผั ััะตะฝะฐัะธั.