### 1. Создание индексов. Виды и типы индексов

Индексы — структуры данных, ускоряющие поиск и сортировку данных в таблицах.

Виды и типы индексов:

- Однопольные (простые) — индекс по одному столбцу.
- Составные (композитные) — индекс по нескольким столбцам.
- Уникальные — гарантируют уникальность значений.
- Кластеризованные (кластерные) — определяют физический порядок хранения данных.
- Некластеризованные (некластерные) — отдельная структура, не влияющая на физический порядок.
- Полнотекстовые — для поиска по тексту.
- Хеш-индексы — используют хеш-функции для быстрого поиска.

---

### 2. Для чего используются индексы в реляционных базах данных?

Индексы ускоряют операции поиска (`SELECT`), сортировки (`ORDER BY`), группировки (`GROUP BY`) и соединения таблиц (`JOIN`). Они уменьшают время выполнения запросов за счет быстрого доступа к данным.

---

### 3. Что такое кластеризованный и некластеризованный индекс?

- Кластеризованный индекс: упорядочивает физический порядок строк таблицы по ключу. В таблице может быть только один кластеризованный индекс. Обычно используется для первичного ключа.
    
- Некластеризованный индекс: создается как отдельная структура, указывающая на строки таблицы через указатели или ссылки. Можно иметь несколько некластеризованных индексов.
    

---

### 4. Какие плюсы и минусы вы можете выделить при использовании индексов?

Плюсы:

- Быстрый доступ к данным
- Ускорение поиска, сортировки, группировки
- Улучшение производительности сложных запросов

Минусы:

- Дополнительное место для хранения
- Замедление операций вставки, обновления и удаления (так как нужно обновлять индекс)
- Увеличение времени при массовых операциях записи

---

### 5. Какие принципы нужно соблюдать при проектировании составного индекса?

- Включайте в индекс только те столбцы, которые часто используются вместе в условиях поиска (`WHERE`, `JOIN`)
- Расположите наиболее селективные столбцы первыми
- Избегайте избыточных или излишне больших составных индексов
- Анализируйте частоту использования комбинаций столбцов

---

### 6. Какие есть структуры для хранения индекса?

Основные структуры:

- B-дерево: сбалансированное дерево с множеством ключей, обеспечивает быстрый поиск, вставку и удаление.
- Хеш-таблица: обеспечивает очень быстрый доступ по точному совпадению ключа, но не поддерживает диапазонные запросы.
- Битовые карты (bitmaps): эффективны для небольшого числа уникальных значений.

---

### 7. Разница между индексами B-дерева и хеш-индексами; предпочтительные случаи использования

|Характеристика|B-дерево|Хеш-индикс|
|---|---|---|
|Поддержка диапазонных запросов|Да|Нет|
|Быстрый поиск по точному совпадению|Да|Очень быстро|
|Использование памяти|Среднее|Меньше|
|Предпочтительно при|Большом диапазоне значений, диапазонных запросах|Точечных поисках по равенству|

Когда использовать:

- B-дерево: для диапазонных запросов, сортировки, группировки.
- Хеш-индикс: для быстрого поиска по точному значению.

---

### 8. Как работает индекс с использованием внешних функций (например, `lower()`) и как это влияет на производительность запросов?

Индексы с функциями создаются через так называемые вычисляемые или функциональные индексы (например, `CREATE INDEX ON table (lower(column))`). Они позволяют ускорить запросы с условиями вида `WHERE lower(column) = 'value'`. Однако такие индексы требуют дополнительного места и могут замедлить операции вставки/обновления, так как нужно обновлять индекс.

---

### 9. Особенности использования индексов в распределенных базах данных

В распределенных системах:

- Индексы могут быть локальными или глобальными.
- Требуется учитывать сетевые задержки при доступе к данным на разных узлах.
- Балансировка нагрузки важна: создание слишком многих или сложных индексов может снизить производительность.
- Некоторые системы используют специальные механизмы репликации и согласованности для поддержания целостности индексов.