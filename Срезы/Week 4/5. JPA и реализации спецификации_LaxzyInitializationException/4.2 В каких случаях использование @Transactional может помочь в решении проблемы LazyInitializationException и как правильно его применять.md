## 1Ô∏è‚É£ –ü–æ—á–µ–º—É `@Transactional` –ø–æ–º–æ–≥–∞–µ—Ç
`LazyInitializationException` –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –≤—ã –æ–±—Ä–∞—â–∞–µ—Ç–µ—Å—å –∫ –ª–µ–Ω–∏–≤–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ **–≤–Ω–µ –∞–∫—Ç–∏–≤–Ω–æ–π Hibernate Session** (–∏–ª–∏ JPA EntityManager).
`@Transactional` **–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–µ—Å—Å–∏—é –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é** –Ω–∞ –≤–µ—Å—å –º–µ—Ç–æ–¥, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ–Ω–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞:
```java
@Transactional
public Author getAuthor(Long id) {
    Author author = authorRepository.findById(id).orElseThrow();
    // –ó–¥–µ—Å—å Session –µ—â—ë –æ—Ç–∫—Ä—ã—Ç–∞
    author.getBooks().size(); // ‚úÖ LAZY-–ø–æ–ª–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è
    return author;
}
```
- –ü–æ–∫–∞ –º–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç, Hibernate –º–æ–∂–µ—Ç **–ø–æ–¥–≥—Ä—É–∑–∏—Ç—å –ª–µ–Ω–∏–≤—ã–µ –ø–æ–ª—è**.
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞ —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –±—ã–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã, `LazyInitializationException` –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç.
## 2Ô∏è‚É£ –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –∫–æ–≥–¥–∞ `@Transactional` –ø–æ–º–æ–≥–∞–µ—Ç

|–°—Ü–µ–Ω–∞—Ä–∏–π|–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç|
|---|---|
|–î–æ—Å—Ç—É–ø –∫ –ª–µ–Ω–∏–≤—ã–º –∫–æ–ª–ª–µ–∫—Ü–∏—è–º –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞|–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ ‚Üí Hibernate –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ|
|–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Hibernate.initialize()`|–°–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–∞ ‚Üí –º–æ–∂–Ω–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å LAZY-–ø–æ–ª—è|
|–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ DTO –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–∞|–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ ‚Üí –≤—Å–µ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è –ø–æ–¥–≥—Ä—É–∂–µ–Ω—ã –¥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞|
## 3Ô∏è‚É£ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ `@Transactional`
### üîπ 1. –ü—Ä–∏–º–µ–Ω—è—Ç—å –∫ **—Å–µ—Ä–≤–∏—Å–Ω–æ–º—É —Å–ª–æ—é**, –∞ –Ω–µ –∫ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º
```java
@Service
@RequiredArgsConstructor
public class AuthorService {
    private final AuthorRepository authorRepository;

    @Transactional(readOnly = true)
    public Author getAuthorWithBooks(Long id) {
        Author author = authorRepository.findById(id).orElseThrow();
        author.getBooks().size(); // –ø–æ–¥–≥—Ä—É–∑–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
        return author;
    }
}
```
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Ç–æ–ª—å–∫–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å.
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω –¥–µ—Ä–∂–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –æ—Ç–∫—Ä—ã—Ç–æ–π.
### üîπ 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `readOnly = true` –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏—è
```java
@Transactional(readOnly = true)
public List<Author> findAllAuthors() { ... }
```
- Hibernate –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∫—ç—à–µ–º –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π.
- –°–Ω–∏–∂–∞–µ—Ç—Å—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –±–∞–∑—É.
### üîπ 3. –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@Transactional` –Ω–∞ **–ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–∞—Ö**
```java
@Transactional
private void doSomething() { ... } // ‚ùå –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç!
```
- Spring –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ–∫—Å–∏ –Ω–∞ **–ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –±–∏–Ω–∞**.
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –Ω–µ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ –ø—Ä–æ–∫—Å–∏ ‚Üí —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è.
### üîπ 4. –û–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –≤—Å—é –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å –ª–µ–Ω–∏–≤—ã–º–∏ –ø–æ–ª—è–º–∏
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å LAZY-–ø–æ–ª—è–º–∏ ‚Äî –≤–µ—Å—å –±–ª–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–≤–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**.
```java
@Transactional
public AuthorDto getAuthorDto(Long id) {
    Author author = authorRepository.findById(id).orElseThrow();
    Hibernate.initialize(author.getBooks());
    return mapper.toDto(author);
}
```
## 4Ô∏è‚É£ –ü—Ä–∏–º–µ—Ä—ã —Å–∏—Ç—É–∞—Ü–∏–π —Å `LazyInitializationException` –∏ —Ä–µ—à–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ `@Transactional`

|–°–∏—Ç—É–∞—Ü–∏—è|–ë–µ–∑ `@Transactional`|–° `@Transactional`|
|---|---|---|
|–°–µ—Ä–≤–∏—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—É—â–Ω–æ—Å—Ç—å –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, –∫–æ–ª–ª–µ–∫—Ü–∏–∏ LAZY|Exception –ø—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏|–ö–æ–ª–ª–µ–∫—Ü–∏–∏ –ø–æ–¥–≥—Ä—É–∂–µ–Ω—ã –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ ‚Üí JSON —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ|
|–°–µ—Ä–≤–∏—Å –≤—ã–∑—ã–≤–∞–µ—Ç –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç LAZY|Exception, –µ—Å–ª–∏ –ø—Ä–æ–∫—Å–∏ –∑–∞–∫—Ä—ã—Ç|–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø–æ–¥–≥—Ä—É–∑–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç|
|DTO —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ —Å–µ—Ä–≤–∏—Å–∞|Exception –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ LAZY|–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞, DTO –±–µ–∑–æ–ø–∞—Å–Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è|
## 5Ô∏è‚É£ –†–µ–∑—é–º–µ
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@Transactional` –¥–ª—è —Ä–µ—à–µ–Ω–∏—è LazyInitializationException:**
1. –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª–µ–Ω–∏–≤—ã–º–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ **–≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è**.
2. –ö–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ **–ø–æ–¥–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–æ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**.
3. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `Hibernate.initialize()` –∏–ª–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç–µ DTO –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–µ–Ω–∏–≤—ã—Ö –ø–æ–ª–µ–π.
**–ü—Ä–∞–≤–∏–ª–∞:**
- –ê–Ω–Ω–æ—Ç–∏—Ä—É–π—Ç–µ **–ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–∞**, –Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `readOnly = true` –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏—è.
- –û–±–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ –≤–µ—Å—å –±–ª–æ–∫ —Ä–∞–±–æ—Ç—ã —Å –ª–µ–Ω–∏–≤—ã–º–∏ –ø–æ–ª—è–º–∏ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é.
- –î–ª—è REST API –ª—É—á—à–µ —Å–æ—á–µ—Ç–∞—Ç—å —Å DTO/`JOIN FETCH` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è SQL.