# ACID
Принцип ACID описывает свойства транзакций. Расшифровывается так:
### 1. Atomicity (Атомарность)

### 2. Consistency (Согласованность)
Транзакция переводит базу данных из одного корректного состояния в другое, соблюдая все правила и ограничения (например, уникальность ключей, целостность связей).
### 3. Isolation (Изолированность)
Параллельные транзакции не влияют друг на друга. Например, одна транзакция не видит промежуточных данных другой (уровни изоляции бывают разными: Read, Commited, Serializable, и т.д.).
### 4. Durability (Долговечность)
После успешного завершения (commit) результаты транзакции сохраняются даже при сбое системы (например, благодаря записи в журнал транзакций).
## Пример:
Когда вы переводите деньги с одного счета на другой, ACID гарантирует, что:
- Если списание прошло, а зачисление нет - транзакция отменится (атомарность).
- Сумма не потеряется и не появится "из воздуха" (согласованность).
- Другие операции не увидят промежуточного состояния (изолированность).
- После подтверждения перевод сохранится даже при отключении электричества (долговечность).
Эти принципы критичны для реляционных СУБД (PostgreSQL, MySQL, Oracle и т.д.), а в NoSQL они часто ослаблены в пользу производительности.
## 1. Atomicity (Атомарность)
Определение: Транзакция выполняется как единое целое: либо все ее операции применяются, либо ни одна. Если что-то пошло не так, происходит откат (rollback).
### Как это работает?
- Если в процессе транзакции происходит ошибка (например, разрыв соединения, сбой сервера), система откатывает (rollback) все изменения, сделанные до этого момента.
- Для этого СУБД используют журнал транзакций (transaction log), где фиксируются все шаги транзакции перед их фактическим применением к данным.
### Пример:
Допустим, есть транзакция перевода денег:
```sql
BEGIN TRANSACTION;
	UPDATE accounts SET balance = balance - 100 WHERE user_id = 1; -- Списание
	UPDATE accounts SET balance = balance + 100 WHERE user_id = 2; -- Зачисление
COMMIT;
```