## üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ ReentrantLock
`ReentrantLock` ‚Äî —ç—Ç–æ –∫–ª–∞—Å—Å –∏–∑ –ø–∞–∫–µ—Ç–∞ `java.util.concurrent.locks`, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç **–±–ª–æ–∫–∏—Ä–æ–≤–∫—É —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞—Ö–≤–∞—Ç–∞ (reentrant)**.
- **Reentrant** –∑–Ω–∞—á–∏—Ç: –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ lock –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–∞–º–æ–≥–æ —Å–µ–±—è.
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **–±–æ–ª–µ–µ –≥–∏–±–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**, —á–µ–º `synchronized`.
## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã ReentrantLock

|–ú–µ—Ç–æ–¥|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|---|---|
|`lock()`|–ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –ø–æ—Ç–æ–∫ –∂–¥—ë—Ç, –µ—Å–ª–∏ lock –∑–∞–Ω—è—Ç.|
|`unlock()`|–û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ `finally`).|
|`tryLock()`|–ü—ã—Ç–∞–µ—Ç—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å lock –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true`/`false`.|
|`tryLock(long timeout, TimeUnit unit)`|–ü—ã—Ç–∞–µ—Ç—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å lock —Å —Ç–∞–π–º–∞—É—Ç–æ–º –æ–∂–∏–¥–∞–Ω–∏—è.|
|`lockInterruptibly()`|–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–µ—Ä–≤–∞—Ç—å –ø–æ—Ç–æ–∫ –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è lock.|
## üîπ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```java
import java.util.concurrent.locks.ReentrantLock;

class Counter {
    private int count = 0;
    private final ReentrantLock lock = new ReentrantLock();

    public void increment() {
        lock.lock(); // –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
        try {
            count++;
        } finally {
            lock.unlock(); // –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
        }
    }

    public int getCount() {
        lock.lock();
        try {
            return count;
        } finally {
            lock.unlock();
        }
    }
}
```
‚úÖ –í–∞–∂–Ω–æ: **–≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `finally` –¥–ª—è unlock**, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å deadlock –ø—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è—Ö.
## üîπ –û—Ç–ª–∏—á–∏—è –æ—Ç `synchronized`

|–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å|`synchronized`|`ReentrantLock`|
|---|---|---|
|**–ì–∏–±–∫–æ—Å—Ç—å**|–ü—Ä–æ—Å—Ç–µ–π—à–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞ –æ–±—ä–µ–∫—Ç–µ|–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–∞–π–º–∞—É—Ç–æ–≤, –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è, tryLock|
|**–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–Ω–∏–µ**|–î–∞, –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤–æ–π—Ç–∏ –≤ synchronized|–î–∞, –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å lock|
|**–ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è**|–ù–µ—Ç|–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `lockInterruptibly()`|
|**–¢–∞–π–º–∞—É—Ç—ã**|–ù–µ—Ç|–ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —Ç–∞–π–º–∞—É—Ç —á–µ—Ä–µ–∑ `tryLock(timeout)`|
|**–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å**|–ù–µ—Ç|–ï—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å fair lock (`new ReentrantLock(true)`)|
|**–û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏**|–ù–∞ –æ–±—ä–µ–∫—Ç –∏–ª–∏ –º–µ—Ç–æ–¥|–ù–∞ –æ–±—ä–µ–∫—Ç lock, –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –±–ª–æ–∫–∞–º–∏ –∫–æ–¥–∞|

## üîπ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ReentrantLock
1. –ù—É–∂–Ω–æ **—Ç–∞–π–º–∞—É—Ç –∏–ª–∏ –ø—Ä–µ—Ä—ã–≤–∞–µ–º–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ lock**.
2. –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ **—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞** (fair lock).
3. –ù—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å **–±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º —É—á–∞—Å—Ç–∫–µ –∫–æ–¥–∞**, –∞ –Ω–µ –Ω–∞ –≤–µ—Å—å –º–µ—Ç–æ–¥.
4. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ **—Å–ª–æ–∂–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–∞—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**, –≥–¥–µ `synchronized` —Å–ª–∏—à–∫–æ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω.
‚úÖ **–ò—Ç–æ–≥:**
- `synchronized` –ø—Ä–æ—â–µ –∏ –≤—Å—Ç—Ä–æ–µ–Ω –≤ —è–∑—ã–∫ ‚Äî –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á.
- `ReentrantLock` –≥–∏–±—á–µ –∏ –¥–∞—ë—Ç **–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**: —Ç–∞–π–º–∞—É—Ç—ã, –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ, —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å –∏ tryLock.
- **–í–∞–∂–Ω–æ**: –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ ReentrantLock –≤—Å–µ–≥–¥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å lock –≤ `finally`.