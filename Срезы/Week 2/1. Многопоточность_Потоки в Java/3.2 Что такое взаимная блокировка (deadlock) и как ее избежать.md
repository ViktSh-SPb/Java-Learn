## üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ –≤–∑–∞–∏–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (deadlock)?
**Deadlock (–≤–∑–∞–∏–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)** ‚Äî —ç—Ç–æ —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ –¥–≤–∞ –∏–ª–∏ –±–æ–ª–µ–µ –ø–æ—Ç–æ–∫–∞ **–Ω–∞–≤—Å–µ–≥–¥–∞ –∂–¥—É—Ç** –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤, –∑–∞—Ö–≤–∞—á–µ–Ω–Ω—ã—Ö –¥—Ä—É–≥ –¥—Ä—É–≥–æ–º.
üëâ –¢–æ –µ—Å—Ç—å –ø–æ—Ç–æ–∫ –ê –¥–µ—Ä–∂–∏—Ç —Ä–µ—Å—É—Ä—Å 1 –∏ –∂–¥—ë—Ç —Ä–µ—Å—É—Ä—Å 2, –∞ –ø–æ—Ç–æ–∫ B –¥–µ—Ä–∂–∏—Ç —Ä–µ—Å—É—Ä—Å 2 –∏ –∂–¥—ë—Ç —Ä–µ—Å—É—Ä—Å 1. –í –∏—Ç–æ–≥–µ –Ω–∏–∫—Ç–æ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É.
## üîπ –£—Å–ª–æ–≤–∏—è –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è deadlock (–ø–æ **Coffman‚Äôs conditions**)
Deadlock –≤–æ–∑–º–æ–∂–µ–Ω, –µ—Å–ª–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è 4 —É—Å–ª–æ–≤–∏—è:
1. **–í–∑–∞–∏–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ** ‚Äî —Ä–µ—Å—É—Ä—Å—ã –Ω–µ —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è (–æ–¥–∏–Ω –ø–æ—Ç–æ–∫ ‚Üí –æ–¥–∏–Ω —Ä–µ—Å—É—Ä—Å).
2. **–£–¥–µ—Ä–∂–∞–Ω–∏–µ –∏ –æ–∂–∏–¥–∞–Ω–∏–µ** ‚Äî –ø–æ—Ç–æ–∫ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–¥–∏–Ω —Ä–µ—Å—É—Ä—Å –∏ –∂–¥—ë—Ç –¥—Ä—É–≥–æ–π.
3. **–ù–µ—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è** ‚Äî —Ä–µ—Å—É—Ä—Å—ã –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–∞–º–∏–º –ø–æ—Ç–æ–∫–æ–º.
4. **–¶–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ** ‚Äî –ø–æ—Ç–æ–∫–∏ –∂–¥—É—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –ø–æ –∫—Ä—É–≥—É.
## üîπ –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å deadlock?
1. **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞—Ö–≤–∞—Ç–∞ —Ä–µ—Å—É—Ä—Å–æ–≤**  
    –í—Å–µ–≥–¥–∞ –±–ª–æ–∫–∏—Ä—É–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã –≤ –æ–¥–Ω–æ–º –∏ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ.
    ```java
    synchronized (lock1) {
        synchronized (lock2) {
            // —Ä–∞–±–æ—Ç–∞
        }
    }
    ```
    –ò –¥—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫ –¥–æ–ª–∂–µ–Ω —Ç–æ–∂–µ —Å–Ω–∞—á–∞–ª–∞ –±—Ä–∞—Ç—å `lock1`, –ø–æ—Ç–æ–º `lock2`.
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `tryLock()` (ReentrantLock)**  
    –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å —Ç–∞–π–º–∞—É—Ç –∏ –∏–∑–±–µ–∂–∞—Ç—å –≤–µ—á–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è.
    ```java
    Lock lock1 = new ReentrantLock();
    Lock lock2 = new ReentrantLock();
    
    if (lock1.tryLock() && lock2.tryLock()) {
        try {
            // —Ä–∞–±–æ—Ç–∞
        } finally {
            lock1.unlock();
            lock2.unlock();
        }
    } else {
        System.out.println("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –æ–±–∞ —Ä–µ—Å—É—Ä—Å–∞");
    }
    ```
1. **–ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫**  
    –î–µ—Ä–∂–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã —Ç–æ–ª—å–∫–æ –Ω–∞ –≤—Ä–µ–º—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–µ–∫—Ü–∏–∏, —Å—Ä–∞–∑—É –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å.
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**
    - `ExecutorService`, `Semaphore`, `CountDownLatch`, `Phaser`, `CyclicBarrier` ‚Äî –æ–Ω–∏ —É–º–µ–Ω—å—à–∞—é—Ç —Ä–∏—Å–∫ —Ä—É—á–Ω—ã—Ö deadlock.
3. **–ê–Ω–∞–ª–∏–∑ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**  
    –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ deadlock –º–æ–∂–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑:
    - `jstack` (—Å–Ω–∏–º–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤).
    - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è (VisualVM, JConsole).