## 1Ô∏è‚É£ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TTL —á–µ—Ä–µ–∑ CacheManager**
–í Spring Boot TTL –¥–ª—è Redis –∑–∞–¥–∞—ë—Ç—Å—è **–Ω–∞ —É—Ä–æ–≤–Ω–µ `CacheManager`**.
### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ TTL:
```java
import org.springframework.cache.CacheManager;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.cache.RedisCacheConfiguration;
import org.springframework.data.redis.cache.RedisCacheManager;
import org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory;

import java.time.Duration;

@Configuration
public class CacheConfig {

    @Bean
    public CacheManager cacheManager(LettuceConnectionFactory redisConnectionFactory) {
        RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig()
                .entryTtl(Duration.ofMinutes(5)) // TTL 5 –º–∏–Ω—É—Ç
                .disableCachingNullValues();

        return RedisCacheManager.builder(redisConnectionFactory)
                .cacheDefaults(config)
                .build();
    }
}
```
- –í—Å–µ –∫—ç—à–∏ –±—É–¥—É—Ç –∂–∏—Ç—å **5 –º–∏–Ω—É—Ç** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
- `disableCachingNullValues()` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `null`.
‚ö† TTL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫—ç—à–∞ –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ, —Å–æ–∑–¥–∞–≤–∞—è **–Ω–µ—Å–∫–æ–ª—å–∫–æ `RedisCacheConfiguration`**.
## 2Ô∏è‚É£ **–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ —á–µ—Ä–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏**
Spring Cache –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—ç—à–µ–º:

|–ê–Ω–Ω–æ—Ç–∞—Ü–∏—è|–û–ø–∏—Å–∞–Ω–∏–µ|
|---|---|
|`@Cacheable`|–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–µ—Ç–æ–¥–∞ –≤ –∫—ç—à–µ, –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã–∑–æ–≤—ã –±–µ—Ä—É—Ç –∏–∑ –∫—ç—à–∞|
|`@CacheEvict`|–£–¥–∞–ª—è–µ—Ç –∫–ª—é—á–∏ –∏–∑ –∫—ç—à–∞|
|`@CachePut`|–û–±–Ω–æ–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫—ç—à–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞|
### –ü—Ä–∏–º–µ—Ä—ã:
#### üîπ –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞
```java
@CacheEvict(value = "products", key = "#id")
public void deleteProduct(String id) {
    productRepository.deleteById(id);
}
```
- –ö–ª—é—á `products:id` —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ Redis –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞.
#### üîπ –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫—ç—à–∞
```java
@CacheEvict(value = "products", allEntries = true)
public void clearAllProductsCache() {
    // –£–¥–∞–ª—è–µ—Ç –≤–µ—Å—å –∫—ç—à products
}
```
#### üîπ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞
```java
@CachePut(value = "products", key = "#product.id")
public Product updateProduct(Product product) {
    return productRepository.save(product);
}
```
- –ú–µ—Ç–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –∫—ç—à, –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—è —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.
## 3Ô∏è‚É£ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TTL –≤–º–µ—Å—Ç–µ —Å `@Cacheable`**
- TTL –Ω–µ –∑–∞–¥–∞—ë—Ç—Å—è –≤ —Å–∞–º–æ–π –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ `@Cacheable`.
- TTL —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `CacheManager`/`RedisCacheConfiguration`.
- –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ TTL –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫—ç—à–µ–π:
```java
@Bean
public RedisCacheManager cacheManager(LettuceConnectionFactory factory) {
    Map<String, RedisCacheConfiguration> cacheConfigs = new HashMap<>();
    
    cacheConfigs.put("shortLived", RedisCacheConfiguration.defaultCacheConfig()
            .entryTtl(Duration.ofSeconds(30)));
    
    cacheConfigs.put("longLived", RedisCacheConfiguration.defaultCacheConfig()
            .entryTtl(Duration.ofHours(1)));

    return RedisCacheManager.builder(factory)
            .withInitialCacheConfigurations(cacheConfigs)
            .build();
}
```
- –ó–∞—Ç–µ–º –≤ `@Cacheable(value = "shortLived")` –±—É–¥–µ—Ç TTL 30 —Å–µ–∫—É–Ω–¥.
- –í `@Cacheable(value = "longLived")` ‚Äî 1 —á–∞—Å.
## 4Ô∏è‚É£ **–ò—Ç–æ–≥**
1. TTL –≤ Spring Cache —Å Redis —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **CacheManager / RedisCacheConfiguration**, –∞ –Ω–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏.
2. `@Cacheable` ‚Äî –¥–ª—è —á—Ç–µ–Ω–∏—è/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫—ç—à–∞.
3. `@CacheEvict` ‚Äî –¥–ª—è —è–≤–Ω–æ–π –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–ª—é—á–µ–π –∏–ª–∏ –≤—Å–µ–≥–æ –∫—ç—à–∞.
4. `@CachePut` ‚Äî –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—ç—à–∞ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –∏–∑ –∫—ç—à–∞.
5. –†–∞–∑–Ω—ã–µ TTL –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫—ç—à–µ–π —á–µ—Ä–µ–∑ **map –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**.
