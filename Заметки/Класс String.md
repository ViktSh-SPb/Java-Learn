Класс String представляет собой последовательность символов и является одним из наиболее часто используемых классов в языке.
## Основные особенности:
1. **Неизменяемость (Immutability)**. Строки в Java неизменяемы. Любая операция, которая "изменяет" строку, на самом деле создает новую. Это обеспечивает безопасность при многопоточном доступе.
2. **Создание строк.**
```java
String str1 = "Hello"; // строковый литерал (хранится в пуле строк)
String str2 = new String("Hello"); // через конструктор

char[] chars = {'H', 'e', 'l', 'l', 'o'};
String str3 = new String(chars) // из массива символов
```
3. **Пул строк.** Java оптимизирует хранение строк, используя пул строк. При создании строки через литерал, JVM сначала проверяет пул на наличие такой строки.
## Основные методы:
### Сравнение строк
```java
String s1 = "Hello";
String s2 = "Hello";
String s3 = new string("Hello");

s1.equals(s2); // true - сравнение содержимого
s1 == s2; // true - ссылки на один объект в пуле
s1 == s3; // false - разные объекты
s1.equals(s3); // true - содержимое одинаково
```
### Работа с содержимым
```java
String str = "Java Programming";

str.length(); // 16 - длина строки
str.charAt(2); // 'v' - символ по индексу
str.substring(5); // "Programming" - подстрока с индекса
str.substring(5,9); // "Prog" - подстрока от и до
str.indexOf("Prog"); // 5 - индекс подстроки
str.contains("Java"); // true - проверка содержимого
```
### Модификация (создание новых строк)
```java
String s = "Hello";

s.concat(" World"); // "Hello World"
s.toUpperCase(); // "HELLO"
s.toLowerCase(); // "hello"
s.replace('l', 'p'); // "Heppo"
s.trim(); // удаляет пробелы по краям
```
### Разделение и соединение
```java
String names = "John,Paul,George,Ringo";
String [] namesArr = names.split(","); // ["John", "Paul", "George", "Ringo"]
String joined = String.join("-", namesArr); // "John-Paul-George-Ringo"
```
### Форматирование
```java
String formatted = String.format("Name: %s, Age: %d", "Alice", 25); // "Name: Alice, Age: 25"
```
## Важные особенности
1. **StingBuilder** и **StringBuffer**. Для частых модификаций строк лучше использовать **StringBuilder** (не потокобезопасный) или **StringBuffer** (потокобезопасный), так как они изменяемы и более эффективны.
2. **Сравнение с null**. Всегда необходимо проверять строки на null перед вызовом их методов:
```java
if (str != null && !str.isEmpty()) {...}
```
3. **Символы Unicode**. Java использует *UTF-16* для хранения символов строки.
## Пул строк (String Pool)
**Пул строк** - это специальная область в куче (*heap*), где хранятся уникальные строковые литералы. Это механизм оптимизации, который позволяет повторно использовать строки, экономя память.
### Как работает пул строк
1. **Хранение литералов**. Когда я создаю строку через литерал `(String s = "hello")`, JVM сначала проверяет пул на наличие такой строки.
2. **Повторное использование**. Если строка уже есть в пуле, возвращается ссылка на существующий объект.
3. **Новые объекты**. При использовании `new String("hello")` создается новый объект внутри пула.
### Примеры работы
```java
String s1 = "Java"; // Добавляется в пул
String s2 = "Java"; // Используется существующая строка из пула
String s3 = new String("Java"); // Создается новый объект вне пула

System.out.println(s1 == s2); // true (один и тот же объект)
System.out.println(s1 == s3); // false (разные объекты)
```
### Метод intern()
Позволяет явно поместить строку в пул или получить ссылку на существующую:
```java
String s4 = new String("Python").intern();
String s5 = "Python";
System.out.println(s4 == s5); // true
```
### Особенности
1. **Неизменяемость**. Строки в Java иммутабельны, что делает пул безопасным.
2. **Размер пула**. До Java 7 пул находился в PermGen, теперь - в основной куче.
3. **Производительность**. Экономит память, но требует времени на поиск.
### Когда использовать
1. Для строковых констант
2. При частом использовании одинаковых строк
3. Когда важно экономить память
### Ограничения
1. Не подходит для строк, создаваемых динамически
2. Чрезмерное использование `intern()` может привести к утечкам памяти