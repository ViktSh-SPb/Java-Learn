–í **Java** –ø–æ–¥ **‚Äúreordering‚Äù (–ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π)** –ø–æ–Ω–∏–º–∞–µ—Ç—Å—è —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ **–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –º–µ–Ω—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π**, —á—Ç–æ–±—ã —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –Ω–æ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º –∫–æ–¥–µ –æ–Ω–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ **–Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º**, –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.
### 1Ô∏è‚É£ –ü—Ä–∏—á–∏–Ω—ã reordering
1. **–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä** ‚Äî –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Å—Ç–∞–≤–ª—è—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –µ—Å–ª–∏ —ç—Ç–æ **–Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ**.
2. **JVM / JIT** ‚Äî –º–æ–∂–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
3. **–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä** ‚Äî CPU –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∫–æ–º–∞–Ω–¥ –¥–ª—è –ª—É—á—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω–≤–µ–π–µ—Ä–∞ –∏ –∫—ç—à–µ–π.
### 2Ô∏è‚É£ –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã
```java
class Example {
    int a = 0;
    boolean flag = false;

    void writer() {
        a = 1;       // –æ–ø–µ—Ä–∞—Ü–∏—è 1
        flag = true; // –æ–ø–µ—Ä–∞—Ü–∏—è 2
    }

    void reader() {
        if (flag) {       // –æ–ø–µ—Ä–∞—Ü–∏—è 3
            System.out.println(a); // –æ–ø–µ—Ä–∞—Ü–∏—è 4
        }
    }
}
```
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–æ—Ç–æ–∫ `reader` –º–æ–∂–µ—Ç —É–≤–∏–¥–µ—Ç—å `flag = true`, –Ω–æ –µ—â—ë —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `a = 0`.
- –ü—Ä–æ–∏–∑–æ—à–ª–æ –±—ã –∏–∑-–∑–∞ reordering: –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –ø–æ–º–µ–Ω—è–ª–∏ –ø–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π 1 –∏ 2 –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.
### 3Ô∏è‚É£ –ö–∞–∫ –±–æ—Ä–æ—Ç—å—Å—è —Å reordering
- **`volatile`**: –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ **—á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ –±—É–¥—É—Ç –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã** –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –¥—Ä—É–≥–∏—Ö volatile –æ–ø–µ—Ä–∞—Ü–∏–π.
- **`synchronized`**: –≤—Ö–æ–¥ –∏ –≤—ã—Ö–æ–¥ –∏–∑ –±–ª–æ–∫–∞ —Å–æ–∑–¥–∞—é—Ç **happens-before**, –∑–∞–ø—Ä–µ—â–∞—é—â–∏–π reorder, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ä—É—à–∞–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏.
- **–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–ª–∞—Å—Å—ã (`AtomicInteger`, `AtomicReference`)**: –∏—Å–ø–æ–ª—å–∑—É—é—Ç CAS –∏ memory barriers –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è.
### 4Ô∏è‚É£ –ü—Ä–∏–º–µ—Ä —Å `volatile`
```java
class SafeExample {
    int a = 0;
    volatile boolean flag = false;

    void writer() {
        a = 1;
        flag = true; // –∑–∞–ø–∏—Å—å volatile –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç reordering
    }

    void reader() {
        if (flag) {
            System.out.println(a); // –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —É–≤–∏–¥–∏—Ç a = 1
        }
    }
}
```
üí° **–ò—Ç–æ–≥:**  
Reordering —É—Å–∫–æ—Ä—è–µ—Ç –∫–æ–¥, –Ω–æ –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º. –í Java –µ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç —á–µ—Ä–µ–∑ `volatile`, `synchronized` –∏ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç **happens-before** –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤–∏–¥–∏–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏.