# ‚úÖ 1. –í–∫–ª—é—á–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è: `@EnableCaching`
–í –≥–ª–∞–≤–Ω–æ–º –∫–ª–∞—Å—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª—è–µ–º –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é:
```java
@SpringBootApplication
@EnableCaching
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ Spring –Ω–∞—á–∏–Ω–∞–µ—Ç –∏—Å–∫–∞—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (`@Cacheable`, `@CacheEvict` –∏ —Ç.–¥.).
# ‚úÖ 2. –í—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∫—ç—à–∞
Spring Cache ‚Äî –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è. –û–Ω–∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
- **ConcurrentMapCache** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏)
- **Caffeine** (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à)
- **Redis** (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –∫—ç—à –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏)
- Ehcache, Hazelcast ‚Äî —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–µ–≥–æ–¥–Ω—è.
–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å, Spring —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ—Å—Ç–æ–π –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à –≤ –ø–∞–º—è—Ç–∏.
# 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –º–µ—Ç–æ–¥–∞—Ö
## ‚úÖ `@Cacheable` ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–µ—Ç–æ–¥–∞
```java
@Service
public class ProductService {

    @Cacheable("products")
    public Product getProduct(UUID id) {
        System.out.println("–í—ã–∑–æ–≤ –ë–î!");
        return repository.findById(id).orElseThrow();
    }
}
```
–ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ ‚Äî –ø–æ–π–¥—ë—Ç –≤ –ë–î, –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ ‚Äî –≤–æ–∑—å–º—É—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ –∫—ç—à–∞.
# 4. –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
## üîÑ `@CacheEvict`
```java
@CacheEvict(value = "products", key = "#id")
public void deleteProduct(UUID id) { ... }
```
## üîÑ –£–¥–∞–ª–∏—Ç—å –≤–µ—Å—å –∫—ç—à:
```java
@CacheEvict(value = "products", allEntries = true)
public void clearCache() { }
```
# 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ –≤—Ä—É—á–Ω—É—é
## üîÅ `@CachePut`
–ú–µ—Ç–æ–¥ –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–∏—à–µ—Ç –≤ –∫—ç—à.
```java
@CachePut(value = "products", key = "#product.id")
public Product update(Product product) {
    return repository.save(product);
}
```
# 6. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∫—ç—à–∞
# ‚ö° –í–∞—Ä–∏–∞–Ω—Ç –ê: Caffeine (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫—ç—à–µ–π)
### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:
```xml
<dependency>
    <groupId>com.github.ben-manes.caffeine</groupId>
    <artifactId>caffeine</artifactId>
</dependency>
```
### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:
```yaml
spring:
  cache:
    cache-names: products
    caffeine:
      spec: maximumSize=500,expireAfterWrite=10m
```
# ‚ö° –í–∞—Ä–∏–∞–Ω—Ç –ë: Redis (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –∫—ç—à, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö)
### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>
```
### –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
```yaml
spring:
  redis:
    host: localhost
    port: 6379
  cache:
    type: redis
    cache-names:
      - products
```
# 7. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `CacheManager` –≤—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
–ù–∞–ø—Ä–∏–º–µ—Ä, —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫—ç—à–µ–π:
```java
@Configuration
public class CacheConfig {

    @Bean
    public CaffeineCacheManager cacheManager() {
        CaffeineCacheManager manager = new CaffeineCacheManager("products", "users");
        manager.setCaffeine(
            Caffeine.newBuilder()
                    .expireAfterWrite(5, TimeUnit.MINUTES)
                    .maximumSize(1000)
        );
        return manager;
    }
}
```
# 8. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫—ç—à —Ä–∞–±–æ—Ç–∞–µ—Ç?
–ò—Å–ø–æ–ª—å–∑—É–π simple print:
```java
System.out.println("Method called");
```
–ò–ª–∏ Actuator:
```yaml
management:
  endpoints:
    web:
      exposure:
        include: "*"
```
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
```
GET /actuator/caches
```
# üìå –ò—Ç–æ–≥: –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
### 1. –î–æ–±–∞–≤–∏—Ç—å `@EnableCaching`
### 2. –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é `@Cacheable` –Ω–∞ –º–µ—Ç–æ–¥
### 3. (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –≤—ã–±—Ä–∞—Ç—å –∫—ç—à-–ø—Ä–æ–≤–∞–π–¥–µ—Ä ‚Äî Caffeine / Redis
### 4. (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å TTL, —Ä–∞–∑–º–µ—Ä –∏ –æ—á–∏—Å—Ç–∫—É