## 1Ô∏è‚É£ **–ß—Ç–æ —Ç–∞–∫–æ–µ Redis Cluster**
**Redis Cluster** ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± **–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è Redis**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç:
1. –î–µ–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —É–∑–ª–∞–º–∏ (—à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ).
2. –û–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å **–æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** —á–µ—Ä–µ–∑ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é.
3. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –∫–ª–∞—Å—Ç–µ—Ä–∞ –¥–∞–∂–µ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —á–∞—Å—Ç–∏ —É–∑–ª–æ–≤.
- Redis Cluster —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ **–º–∞—Å—Ç–µ—Ä–æ–≤ –∏ —Å–ª–µ–π–≤–æ–≤**.
- –î–∞–Ω–Ω—ã–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –º–µ–∂–¥—É –º–∞—Å—Ç–µ—Ä–∞–º–∏ —Å –ø–æ–º–æ—â—å—é **—Ö—ç—à-—Å–ª–æ—Ç–æ–≤**.
## 2Ô∏è‚É£ **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (Sharding)**
### üîπ –•—ç—à-—Å–ª–æ—Ç—ã
- Redis Cluster –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **16‚ÄØ384 —Ö—ç—à-—Å–ª–æ—Ç–æ–≤**.
- –ö–∞–∂–¥—ã–π –∫–ª—é—á —á–µ—Ä–µ–∑ `CRC16(key) % 16384` –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞.
- –ö–∞–∂–¥—ã–π –º–∞—Å—Ç–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ **—á–∞—Å—Ç—å —Å–ª–æ—Ç–æ–≤**.
### üîπ –ü—Ä–∏–º–µ—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
```
[Master1] ‚Üí —Å–ª–æ—Ç—ã 0-5000
[Master2] ‚Üí —Å–ª–æ—Ç—ã 5001-10000
[Master3] ‚Üí —Å–ª–æ—Ç—ã 10001-16383
```
- –ö–ª—é—á `"user:1"` ‚Üí —Å–ª–æ—Ç 1234 ‚Üí Master1
- –ö–ª—é—á `"order:100"` ‚Üí —Å–ª–æ—Ç 6789 ‚Üí Master2
### üîπ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–∞—Å—Ç–µ—Ä–∞ –∏ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–ª–æ—Ç—ã.
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –æ–¥–∏–Ω —É–∑–µ–ª.
## 3Ô∏è‚É£ **–†–µ–ø–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
- –ö–∞–∂–¥—ã–π –º–∞—Å—Ç–µ—Ä –∏–º–µ–µ—Ç **—Å–ª–µ–π–≤-—É–∑–µ–ª**, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –∫–æ–ø–∏—é –¥–∞–Ω–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–∞.
- –°–ª–µ–π–≤ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –º–∞—Å—Ç–µ—Ä–æ–º –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ –º–∞—Å—Ç–µ—Ä–∞.
### üîπ –ü—Ä–∏–º–µ—Ä
```
[Master1] ‚Üí —Å–ª–æ—Ç—ã 0-5000
    ‚îî‚îÄ [Slave1]

[Master2] ‚Üí —Å–ª–æ—Ç—ã 5001-10000
    ‚îî‚îÄ [Slave2]

[Master3] ‚Üí —Å–ª–æ—Ç—ã 10001-16383
    ‚îî‚îÄ [Slave3]
```
- –ï—Å–ª–∏ Master2 –ø–∞–¥–∞–µ—Ç, **Slave2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–∞—Å—Ç–µ—Ä–æ–º**.
- –ö–ª–∞—Å—Ç–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.
## 4Ô∏è‚É£ **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã Redis Cluster**
1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä (hash slot aware)**
    - –ö–ª–∏–µ–Ω—Ç –∑–Ω–∞–µ—Ç, –∫–∞–∫–æ–π –º–∞—Å—Ç–µ—Ä —Ö—Ä–∞–Ω–∏—Ç –Ω—É–∂–Ω—ã–π —Å–ª–æ—Ç.
    - –ï—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞ –º–∞—Å—Ç–µ—Ä–µ, –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç `MOVED` –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è.
2. **Failover**
    - –ö–∞–∂–¥—ã–π –º–∞—Å—Ç–µ—Ä –∏–º–µ–µ—Ç —Å–ª–µ–π–≤.
    - –°–ª–µ–π–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–∞—Å—Ç–µ—Ä–æ–º –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.
3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–æ–≤**
    - Redis Cluster –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–æ–≤**.
    - –°–ª–æ—Ç—ã –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –º–µ–∂–¥—É –Ω–æ–≤—ã–º–∏ –º–∞—Å—Ç–µ—Ä–∞–º–∏.
## 5Ô∏è‚É£ **–ò—Ç–æ–≥**

|–ü–∞—Ä–∞–º–µ—Ç—Ä|Redis Cluster|
|---|---|
|–®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ|16‚ÄØ384 —Ö—ç—à-—Å–ª–æ—Ç–æ–≤|
|–†–µ–ø–ª–∏–∫–∞—Ü–∏—è|–ö–∞–∂–¥—ã–π –º–∞—Å—Ç–µ—Ä –∏–º–µ–µ—Ç —Å–ª–µ–π–≤|
|–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å|Failover –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –º–∞—Å—Ç–µ—Ä–∞|
|–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ|–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ (–Ω–æ–≤—ã–µ –º–∞—Å—Ç–µ—Ä—ã)|
|–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞|Hash slot aware, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (MOVED)|
