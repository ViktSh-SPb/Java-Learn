–†–∞–∑–±–µ—Ä—ë–º —ç—Ç–∏ –¥–≤–∞ –≤–∞–∂–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ SQL: **—Ç–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –ø–ª–∞–Ω–µ –∑–∞–ø—Ä–æ—Å–∞** –∏ **—Ä–æ–ª—å –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ —ç—Ç–æ–º –ø–ª–∞–Ω–µ**.
## 1Ô∏è‚É£ –¢–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –ø–ª–∞–Ω–µ –∑–∞–ø—Ä–æ—Å–∞
–ü–ª–∞–Ω –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, **–∫–∞–∫–∏–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –°–£–ë–î**, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π:
### üîπ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- **Seq Scan (Sequential Scan)** ‚Äî –ø–æ–ª–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü—ã.
- **Index Scan / Index Seek** ‚Äî –ø–æ–∏—Å–∫ –ø–æ –∏–Ω–¥–µ–∫—Å—É.
- **Bitmap Index Scan** ‚Äî –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å–Ω—ã–π –ø–æ–∏—Å–∫, –∫–æ–≥–¥–∞ —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è bitmap, –∞ –ø–æ—Ç–æ–º –≤—ã–±–∏—Ä–∞—é—Ç—Å—è —Å—Ç—Ä–æ–∫–∏.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (`WHERE`) –∏–ª–∏ –ø—Ä–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü.
### üîπ JOIN-–æ–ø–µ—Ä–∞—Ü–∏–∏
- **Nested Loop Join** ‚Äî –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Ü–∏–∫–ª; —Ö–æ—Ä–æ—à–æ –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ç–∞–±–ª–∏—Ü, –¥–æ—Ä–æ–≥–æ–π –¥–ª—è –±–æ–ª—å—à–∏—Ö.
- **Hash Join** ‚Äî —Å—Ç—Ä–æ–∏—Ç—Å—è —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–∞ –ø–æ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ –∏ –∏—â–µ—Ç—Å—è –ø–æ –¥—Ä—É–≥–æ–π; —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
- **Merge Join** ‚Äî —Ç—Ä–µ–±—É–µ—Ç –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö; —Ö–æ—Ä–æ—à–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü —Å ORDER BY.
### üîπ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ –∞–≥—Ä–µ–≥–∞—Ç—ã
- **Sort** ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è ORDER BY –∏–ª–∏ Merge Join).
- **Aggregate / Group Aggregate** ‚Äî –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ (`GROUP BY`) –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (`SUM`, `COUNT`).
- **Distinct** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤.
### üîπ –î—Ä—É–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **Filter** ‚Äî –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π WHERE.
- **Limit / Top-N** ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —Å—Ç—Ä–æ–∫.
- **Materialize / Subquery Scan** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤.
- **CTE Scan** ‚Äî —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Common Table Expressions.
## 2Ô∏è‚É£ –ö–∞–∫ –∏–Ω–¥–µ–∫—Å—ã –≤–ª–∏—è—é—Ç –Ω–∞ –ø–ª–∞–Ω –∑–∞–ø—Ä–æ—Å–∞
–ò–Ω–¥–µ–∫—Å—ã —Å–∏–ª—å–Ω–æ –º–µ–Ω—è—é—Ç **–≤—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º**:
### üîπ –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞
```sql
SELECT * FROM orders WHERE customer_id = 10;
```
- –°–£–ë–î –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Seq Scan**, —Ç–æ –µ—Å—Ç—å –ø–µ—Ä–µ–±—Ä–∞—Ç—å –≤—Å–µ —Å—Ç—Ä–æ–∫–∏.
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞—Å—Ç—ë—Ç –ª–∏–Ω–µ–π–Ω–æ —Å —Ä–∞–∑–º–µ—Ä–æ–º —Ç–∞–±–ª–∏—Ü—ã.
### üîπ –° –∏–Ω–¥–µ–∫—Å–æ–º
```sql
CREATE INDEX idx_orders_customer_id ON orders(customer_id);
SELECT * FROM orders WHERE customer_id = 10;
```
- –°–£–ë–î –≤—ã–±–∏—Ä–∞–µ—Ç **Index Scan**, –æ–±—Ä–∞—â–∞—è—Å—å —Ç–æ–ª—å–∫–æ –∫ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∑–∞–ø–∏—Å—è–º.
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö —Å—Ç—Ä–æ–∫ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è, –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞–¥–∞–µ—Ç.
### üîπ –¢–∏–ø –∏–Ω–¥–µ–∫—Å–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—ã–±–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–∏

|–¢–∏–ø –∏–Ω–¥–µ–∫—Å–∞|–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–ª–∞–Ω|
|---|---|
|B-Tree|Index Scan, Index Seek, Range Scan, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç ORDER BY –∏ –¥–∏–∞–ø–∞–∑–æ–Ω—ã|
|Hash|Index Scan —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (=), –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω—ã|
|GiST / GIN|–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞, –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö –∏ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä|
### üîπ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏ —Å–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `LOWER(email)`) –ø–æ–∑–≤–æ–ª—è–µ—Ç –°–£–ë–î –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å, –µ—Å–ª–∏ –≤ WHERE –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è.
- **–°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å** (`(shard_key, field)`) –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –∏ JOIN—ã.
## 3Ô∏è‚É£ –û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏–Ω–¥–µ–∫—Å–∞ –Ω–∞ –ø–ª–∞–Ω
1. üìâ –°–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö —Å—Ç—Ä–æ–∫.
2. ‚ö° –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å Seq Scan –Ω–∞ Index Scan.
3. üß≠ –ú–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –º–µ—Ç–æ–¥ JOIN (–Ω–∞–ø—Ä–∏–º–µ—Ä, Nested Loop –≤–º–µ—Å—Ç–æ Hash Join, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —É–∂–µ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã –ø–æ –∏–Ω–¥–µ–∫—Å—É).
4. ü™∂ –£–º–µ–Ω—å—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, –µ—Å–ª–∏ –∏–Ω–¥–µ–∫—Å —É–∂–µ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –Ω—É–∂–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.
‚úÖ **–ò—Ç–æ–≥:**
- –ü–ª–∞–Ω –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **—á—Ç–æ –¥–µ–ª–∞–µ—Ç –°–£–ë–î –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ** (—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ñ–∏–ª—å—Ç—Ä, JOIN, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –∞–≥—Ä–µ–≥–∞—Ç—ã).
- –ò–Ω–¥–µ–∫—Å—ã **–º–æ–≥—É—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–º–µ–Ω–∏—Ç—å –ø–ª–∞–Ω**, —É—Å–∫–æ—Ä—è—è –ø–æ–∏—Å–∫ –∏ —É–º–µ–Ω—å—à–∞—è –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–∏—Å—Ç–µ–º—É.
