### Что такое JDBC?

JDBC (Java Database Connectivity) — это API (интерфейс программирования приложений) в Java, который обеспечивает стандартный способ взаимодействия с реляционными базами данных. Он позволяет выполнять SQL-запросы, управлять транзакциями и получать результаты из базы данных прямо из Java-приложений.

---

### Как выполнить SQL-запрос в Java с использованием JDBC?

Основные шаги:

1. Загрузка драйвера базы данных  
    Обычно это делается автоматически при использовании JDBC 4.0+ через Service Provider Interface (SPI), или вручную через `Class.forName()`.
2. Установка соединения

    ```java
    Connection conn = DriverManager.getConnection(url, username, password);
    ```

3. Создание Statement или PreparedStatement

    ```java
    Statement stmt = conn.createStatement();
    // или
    PreparedStatement pstmt = conn.prepareStatement(sql);
    ```
4. Выполнение SQL-запроса

    ```java
    ResultSet rs = stmt.executeQuery("SELECT * FROM table");
    // или для обновлений
    int rowsAffected = stmt.executeUpdate("INSERT INTO table ...");
    ```
    
5. Обработка результатов

    ```java
    while (rs.next()) {
        // чтение данных
        int id = rs.getInt("id");
        String name = rs.getString("name");
        // и т.д.
    }
    ```
6. Закрытие ресурсов

    ```java
    rs.close();
    stmt.close();
    conn.close();
    ```


---

### Какие преимущества использования JDBC перед другими методами доступа к базе данных?

- Стандартность: JDBC — стандартный API для работы с базами данных в Java.
- Многообразие драйверов: поддержка различных СУБД (MySQL, PostgreSQL, Oracle, SQL Server и др.).
- Гибкость: возможность выполнять любые SQL-запросы.
- Интеграция: легко интегрируется с другими Java-технологиями.
- Контроль: полный контроль над выполнением запросов и управлением транзакциями.

---

### Какие основные интерфейсы используются в JDBC?

- Driver — драйвер базы данных.
- Connection — соединение с базой данных.
- Statement — выполнение статических SQL-запросов.
- PreparedStatement — выполнение предварительно подготовленных запросов с параметрами.
- ResultSet — результат выполнения SELECT-запроса.
- SQLException — обработка ошибок при работе с базой.

---

### Как управлять транзакциями в JDBC?

По умолчанию `Connection` работает в режиме автокоммита (`autoCommit=true`). Для управления транзакциями:

```java
Connection conn = DriverManager.getConnection(...);
try {
    conn.setAutoCommit(false); // отключить автокоммит
    // выполнить несколько операций
    // ...
    conn.commit(); // подтвердить транзакцию
} catch (SQLException e) {
    conn.rollback(); // откатить при ошибке
} finally {
    conn.setAutoCommit(true); // вернуть режим по умолчанию
    conn.close();
}
```

Это позволяет группировать несколько операций как одну транзакцию.

---

### Как использовать PreparedStatement для защиты от SQL-инъекций?

`PreparedStatement` позволяет задавать параметры запроса через `?`, что предотвращает внедрение вредоносного SQL-кода:

```java
String sql = "SELECT * FROM users WHERE username = ? AND password = ?";
PreparedStatement pstmt = conn.prepareStatement(sql);
pstmt.setString(1, username);
pstmt.setString(2, password);
ResultSet rs = pstmt.executeQuery();
```

Это обеспечивает безопасное вставление пользовательских данных и предотвращает SQL-инъекции.

---

### Как реализовать пул соединений с базой данных в JDBC?

Пул соединений — это механизм повторного использования уже открытых соединений для повышения производительности.

Примеры популярных библиотек:

- HikariCP
- Apache DBCP
- C3P0

Пример использования HikariCP:

```java
HikariConfig config = new HikariConfig();
config.setJdbcUrl("jdbc:mysql://localhost:3306/mydb");
config.setUsername("user");
config.setPassword("password");
HikariDataSource ds = new HikariDataSource(config);

try (Connection conn = ds.getConnection()) {
    // использование соединения
}
```

Пул обеспечивает автоматическое управление соединениями, их создание и закрытие по мере необходимости.

---

### Какие шаблоны проектирования часто используются при работе с JDBC?

- DAO (Data Access Object) — отделяет бизнес-логику от доступа к данным, инкапсулируя работу с JDBC внутри специальных классов.
- Singleton — для управления пулом соединений или драйверами.
- Template Method (шаблон метода) — например, Spring JdbcTemplate использует этот паттерн для упрощения работы с JDBC, автоматического закрытия ресурсов и обработки исключений.

---

### Какие стратегии могут быть использованы для оптимизации производительности JDBC-приложений?

- Использование пулов соединений для снижения затрат на создание/закрытие соединений.
- Использование `PreparedStatement` вместо обычных `Statement` для повторных запросов.
- Минимизация количества запросов и выборка только нужных данных (`SELECT` только необходимых колонок).
- Использование батчевых операций (`addBatch()` и `executeBatch()`) для массовых вставок/обновлений.
- Кэширование результатов там, где это возможно.
- Оптимизация SQL-запросов и индексов базы данных.
- Настройка параметров драйвера и базы данных для повышения производительности.