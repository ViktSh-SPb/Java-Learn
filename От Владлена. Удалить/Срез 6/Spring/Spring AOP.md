### Что такое AOP?

AOP (Aspect-Oriented Programming) — это парадигма программирования, которая позволяет разделять сквозные или повторяющиеся аспекты приложения (например, логирование, безопасность, транзакции) и внедрять их в основной бизнес-код без его изменения. В Spring AOP это реализуется через создание аспектов, которые перехватывают выполнение методов и добавляют дополнительное поведение.

### Каковы основные принципы работы AOP в Spring?

Основные принципы:

- Разделение ответственности: отделение сквозных аспектов от бизнес-логики.
- Перехват точек входа (Join Points): возможность вставлять код в определённые места выполнения программы.
- Советы (Advices): действия, выполняемые в точках входа.
- Аспекты (Aspects): модули, содержащие советы и определения точек входа.
- Точки вступления (Pointcuts): выражения, определяющие, где именно применять советы.
- Внедрение аспектов: автоматическая интеграция аспектов в целевые объекты контейнером Spring.

### Какие проблемы решает Spring AOP?

Spring AOP помогает решить такие задачи:

- Логирование вызовов методов
- Управление транзакциями
- Безопасность и проверка прав доступа
- Кэширование результатов
- Обработка исключений
- Мониторинг и метрики

Это позволяет писать более чистый бизнес-код без дублирования кода для этих задач.

### Что такое точка вступления (Join point) в Spring AOP?

Join point — это конкретное место выполнения программы, где можно вставить дополнительный код. В Spring AOP обычно это вызовы методов или выполнение методов. Например:

- Вызов метода
- Выполнение метода
- Обработка исключения

Spring AOP работает только с методами (методы объектов), так как использует прокси.

### Как создать совет (advice) в Spring AOP?

Совет — это блок кода, который выполняется в определённой точке входа. В Spring можно создать совет с помощью аннотаций:

```java
@Aspect
@Component
public class LoggingAspect {

    @Before("execution(* com.example.service.*.*(..))")
    public void logBeforeMethod() {
        System.out.println("Метод вызывается");
    }
}
```

Здесь `@Before` — тип совета, а выражение внутри — точка входа.

### Какие типы советов (advice) поддерживает Spring AOP?

Основные типы советов:

- @Before: выполняется перед вызовом метода.
- @After: выполняется после завершения метода независимо от результата.
- @AfterReturning: после успешного завершения метода.
- @AfterThrowing: при возникновении исключения.
- @Around: обёртывает вызов метода; позволяет управлять выполнением полностью.

### Как реализовать аспекты с помощью аннотаций @Aspect в Spring?

Для этого:

1. Создайте класс с аннотацией `@Aspect`.
2. Объявите его как компонент (`@Component`).
3. Определите советы с помощью аннотаций (`@Before`, `@After`, `@Around` и т.д.) и укажите выражения pointcut.

Пример:

```java
@Aspect
@Component
public class MyAspect {

    @Before("execution(* com.example.service.*.*(..))")
    public void beforeMethod() {
        // логика перед методом
    }
}
```

### Как работает введение (introduction) в Spring AOP?

Introduction — это возможность добавлять новые интерфейсы или поведение к существующим классам без их изменения. В Spring AOP реализуется через так называемые "Introduction Advice", позволяющие расширять функциональность объектов.

Например, можно внедрить интерфейс `IsModified` к существующим бина для отслеживания изменений.

Пример:

```java
@DeclareParents(value="com.example..*", defaultImpl=DefaultModification.class)
public static IsModified mixin;
```

Это позволяет объектам "подмешивать" новые интерфейсы.

### Как настроить порядок выполнения аспектов в Spring AOP?

Порядок выполнения аспектов задаётся с помощью аннотации `@Order` или реализации интерфейса `Ordered`. Чем меньше значение — тем раньше выполняется аспект:

```java
@Aspect
@Component
@Order(1)
public class FirstAspect { ... }

@Aspect
@Component
@Order(2)
public class SecondAspect { ... }
```

Это важно при наличии нескольких аспектов, чтобы управлять их последовательностью.