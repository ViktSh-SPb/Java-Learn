–í JPA —Å–≤—è–∑—å **–æ–¥–∏–Ω-–∫–æ-–º–Ω–æ–≥–∏–º (One-to-Many)** —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π `@OneToMany` –∏ `@ManyToOne`.  
## üß© 1. –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä: –æ–¥–∏–Ω –∞–≤—Ç–æ—Ä ‚Äî –º–Ω–æ–≥–æ –∫–Ω–∏–≥
### üß† –ú–æ–¥–µ–ª—å
```java
@Entity
public class Author {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String name;

    // –û–¥–∏–Ω –∞–≤—Ç–æ—Ä -> –º–Ω–æ–≥–æ –∫–Ω–∏–≥
    @OneToMany(mappedBy = "author", cascade = CascadeType.ALL, orphanRemoval = true)
    private List<Book> books = new ArrayList<>();

    // —É–¥–æ–±–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω
    public void addBook(Book book) {
        books.add(book);
        book.setAuthor(this);
    }

    public void removeBook(Book book) {
        books.remove(book);
        book.setAuthor(null);
    }
}
```
```java
@Entity
public class Book {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String title;

    // –ú–Ω–æ–≥–∏–µ –∫–Ω–∏–≥–∏ -> –æ–¥–∏–Ω –∞–≤—Ç–æ—Ä
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "author_id") // –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á
    private Author author;
}
```
## üß† –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –í —Ç–∞–±–ª–∏—Ü–µ `book` —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ–ª–æ–Ω–∫–∞ `author_id`, –∫–æ—Ç–æ—Ä–∞—è —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ `author.id`.
- –í `Author` –º—ã –æ–±—ä—è–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ `books`, –∞ –≤ `Book` ‚Äî –ø–æ–ª–µ `author`.
- –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è `mappedBy = "author"` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ **–≤–ª–∞–¥–µ—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ ‚Äî `Book`** (–æ–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á).
## ‚öôÔ∏è 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Å–∫–∞–¥–æ–≤ (`cascade`)
`cascade` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è –∫ –¥–æ—á–µ—Ä–Ω–∏–º –æ–±—ä–µ–∫—Ç–∞–º.

|–ö–∞—Å–∫–∞–¥|–ß—Ç–æ –¥–µ–ª–∞–µ—Ç|
|---|---|
|`CascadeType.PERSIST`|–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∞–≤—Ç–æ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –∫–Ω–∏–≥–∏|
|`CascadeType.MERGE`|–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∞–≤—Ç–æ—Ä–∞ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–Ω–∏–≥–∏|
|`CascadeType.REMOVE`|–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∞–≤—Ç–æ—Ä–∞ —É–¥–∞–ª—è—é—Ç—Å—è –∫–Ω–∏–≥–∏|
|`CascadeType.ALL`|–í—Å–µ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è|
|`orphanRemoval = true`|–£–¥–∞–ª—è–µ—Ç –∫–Ω–∏–≥—É, –µ—Å–ª–∏ –æ–Ω–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∞–≤—Ç–æ—Ä–∞|
## üê¢ 3. –õ–µ–Ω–∏–≤—ã–µ –∏ –∂–∞–¥–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∫–∏
- `@OneToMany` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `LAZY` (–ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞): –∫–Ω–∏–≥–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏.
- `@ManyToOne` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `EAGER` (–∂–∞–¥–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞): –∞–≤—Ç–æ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –≤–º–µ—Å—Ç–µ —Å –∫–Ω–∏–≥–æ–π.
–õ—É—á—à–µ **—è–≤–Ω–æ** —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∏–ø –∑–∞–≥—Ä—É–∑–∫–∏:
```java
@OneToMany(mappedBy = "author", fetch = FetchType.LAZY)
@ManyToOne(fetch = FetchType.LAZY)
```
## üß± 4. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: —Å–≤—è–∑—å —á–µ—Ä–µ–∑ JoinTable (–Ω–µ —á–µ—Ä–µ–∑ FK –≤ –¥–æ—á–µ—Ä–Ω–µ–π —Ç–∞–±–ª–∏—Ü–µ)
–ò–Ω–æ–≥–¥–∞ `OneToMany` –¥–µ–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é —Ç–∞–±–ª–∏—Ü—É (—Ä–µ–¥–∫–æ, –Ω–æ –±—ã–≤–∞–µ—Ç –Ω—É–∂–Ω–æ):
```java
@OneToMany
@JoinTable(
    name = "author_books",
    joinColumns = @JoinColumn(name = "author_id"),
    inverseJoinColumns = @JoinColumn(name = "book_id")
)
private List<Book> books;
```
üìã –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ:
- —Å–æ–∑–¥–∞—ë—Ç—Å—è **–æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `author_books`**;
- –≤ `Book` —É–∂–µ –Ω–µ –Ω—É–∂–Ω–æ –ø–æ–ª–µ `author`.
## ‚ö†Ô∏è 5. –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

|–û—à–∏–±–∫–∞|–ü—Ä–∏—á–∏–Ω–∞ / —Ä–µ—à–µ–Ω–∏–µ|
|---|---|
|`mappedBy` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç|JPA —Å–æ–∑–¥–∞—Å—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é —Ç–∞–±–ª–∏—Ü—É ‚Äî –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ|
|–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏|–ò—Å–ø–æ–ª—å–∑—É–π `Set` –≤–º–µ—Å—Ç–æ `List`, –µ—Å–ª–∏ –¥—É–±–ª–∏–∫–∞—Ç—ã –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã|
|–û—à–∏–±–∫–∞ `TransientObjectException`|–ó–∞–±—ã–ª –¥–æ–±–∞–≤–∏—Ç—å `cascade = CascadeType.PERSIST`|
|–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–π JSON (`StackOverflowError`)|–ü—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ JSON –¥–æ–±–∞–≤–∏—Ç—å `@JsonManagedReference` –∏ `@JsonBackReference` –∏–ª–∏ `@JsonIgnore`|
## üí° –ü—Ä–∏–º–µ—Ä —Å Jackson-–∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ (–¥–ª—è REST API)
```java
@Entity
public class Author {
    ...
    @OneToMany(mappedBy = "author", cascade = CascadeType.ALL, orphanRemoval = true)
    @JsonManagedReference
    private List<Book> books;
}

@Entity
public class Book {
    ...
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "author_id")
    @JsonBackReference
    private Author author;
}
```