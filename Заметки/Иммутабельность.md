**Иммутабельный объект** - это объект, состояние которого нельзя изменить после создания. Все его поля объявлены как *final*, и он не предоставляет методов, меняющих внутреннее состояние.
## Основные принципы иммутабельности
Чтобы класс был иммутабельным, необходимо соблюдать следующие правила:
1. **Все поля - final.**
	- Поля должны быть объявлены как *final*, чтобы их нельзя было изменить после инициализации.
2. **Класс - final или имеет защиту от наследования.**
	- Если класс не *final*, то подклассы могут нарушить иммутабельность.
3. **Нет сеттеров (или других методов, изменяющих состояние).**
	- Объект не должен позволять менять свои поля после создания.
4. **Защита от изменяемых (mutable) объектов.**
	- Если класс содержит ссылки на изменяемые объекты (например, *Date, List*), нужно:
		- Делать глубокие копии при возврате из геттеров.
		- Сохранять копии при инициализации (не использовать переданные извне объекты напрямую).
## Пример иммутабельного класса
```java
import java.util.List;
import java.util.Collections;

pbulic final class ImmutablePerson{
	private final String name;
	private final int age;
	private final List<String> hobbies; // изменяемый объект!

	public ImmutablePerson (String name, int age, List<String> hobbies){
		this.name = name;
		this.age = age;
		this.hobbies = Collections.unmodifiableList (new ArrayList<>(hobbies)) // защитная копия
	}

	public String getName(){
		return name;
	}

	public int getAge(){
		return age;
	}

	public List<String> getHobbies(){
		return hobbies; // возвращает неизменяемый список
	}
}
```
### Почему это иммутабельно?
- Поля *final* - нельзя изменять после создания.
- Список `hobbies` защищен:
	- При создании делается копия (`new ArrayList<>`)
	- Возвращается  неизменяемая обертка (`Collections.unmodifiableList`).
## Преимущества иммутабельных объектов
1. **Потокобезопасность (Thread-safe)** - не нужна синхронизация, так как состояние не изменяется.
2. **Надежность** - объект нельзя случайно изменить после создания.
3. **Кеширование и повторное использование** -  например, *String* и *Integer* кешируются в пуле.
4. Упрощение отладки - состояние объекта всегда предсказуемо.
## Примеры иммутабельных классов в Java
- **String** - самый известный иммутабельный класс.
- Обертки примитивов (**Integer, Double, Boolean**)
- **LocalDate, Period, Duration** из *Java Time API*
- **Collections.unmodifiableList(), unmodifiableSet()** - обертки для коллекций
## Как сделать изменяемый объект иммутабельным
Если есть изменяемый класс, но нужно сделать его иммутабельным:
1. Cкопировать все изменяемые поля (например, `new ArrayList<>(originalList))`
2. Возвращать копии в геттерах (или неизменяемые обертки)
3. Убрать все сеттеры и методы, изменяющие состояние
## Записи (Records)
В Java 14+ появились Records - компактный способ создания иммутабельных классов:
```java
pbulic record ImmutablePerson(String name, int age, List<String> hobbies){
	// Автоматически генерируются final-поля, конструктор, геттеры, equals(), hashCode(), toString()
}
```