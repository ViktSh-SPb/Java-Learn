# üß© –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–∏ (Entity) –≤ Hibernate
–í—Å–µ–≥–æ –≤—ã–¥–µ–ª—è—é—Ç **3‚Äì4 –∫–ª—é—á–µ–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è**:

|–°–æ—Å—Ç–æ—è–Ω–∏–µ|–û–ø–∏—Å–∞–Ω–∏–µ|–ü—Ä–∏–º–µ—Ä|
|---|---|---|
|**Transient (–í—Ä–µ–º–µ–Ω–Ω–æ–µ / –û—Ç—Å–æ–µ–¥–∏–Ω—ë–Ω–Ω–æ–µ)**|–°—É—â–Ω–æ—Å—Ç—å **—Å–æ–∑–¥–∞–Ω–∞ –≤ –ø–∞–º—è—Ç–∏**, –Ω–æ **–Ω–µ —Å–≤—è–∑–∞–Ω–∞ —Å Hibernate Session** –∏ **–Ω–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ**.|`User user = new User();` (–µ—â—ë –Ω–µ `persist`)|
|**Persistent (–°—É—â–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª—è–µ–º–∞—è / –ü—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω–∞—è)**|–°—É—â–Ω–æ—Å—Ç—å **–ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ Session**; Hibernate **–æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è** –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å –ë–î –ø—Ä–∏ `flush`/`commit`.|`entityManager.persist(user);` –∏–ª–∏ `session.save(user);`|
|**Detached (–û—Ç—Å–æ–µ–¥–∏–Ω—ë–Ω–Ω–∞—è)**|–°—É—â–Ω–æ—Å—Ç—å **—Ä–∞–Ω—å—à–µ –±—ã–ª–∞ persistent**, –Ω–æ **—Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞** –∏–ª–∏ —Å—É—â–Ω–æ—Å—Ç—å –±—ã–ª–∞ –æ—Ç—Å–æ–µ–¥–∏–Ω–µ–Ω–∞. –ò–∑–º–µ–Ω–µ–Ω–∏—è **–Ω–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**.|`session.close(); user.setName("Alice");` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –±–µ–∑ `merge()`|
|**Removed (–£–¥–∞–ª—è–µ–º–∞—è)**|–°—É—â–Ω–æ—Å—Ç—å –ø–æ–º–µ—á–µ–Ω–∞ –¥–ª—è **—É–¥–∞–ª–µ–Ω–∏—è** –≤ –ë–î, –Ω–æ —É–¥–∞–ª–µ–Ω–∏–µ –µ—â—ë –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (–≤–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏).|`entityManager.remove(user);`|
## üìò –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –Ω–∞ —Å—Ö–µ–º–µ

```
Transient  --> persist/save --> Persistent --> commit/flush --> Detached
     ^                                     |
     |                                     |
     -------- remove() --------------------
```
## üîπ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
### 1. Transient
```java
User user = new User();
user.setName("Bob");  // –µ—â—ë –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
```
### 2. Persistent
```java
entityManager.persist(user);  // —Ç–µ–ø–µ—Ä—å Hibernate –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
user.setName("Alice");        // –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è –≤ –ë–î –ø—Ä–∏ commit
```
### 3. Detached
```java
entityManager.detach(user);   // –∏–ª–∏ session.close()
user.setName("Charlie");      // –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è
entityManager.merge(user);    // —Å–Ω–æ–≤–∞ —Å—Ç–∞–Ω–µ—Ç persistent
```
### 4. Removed
```java
entityManager.remove(user);   // –ø–æ–º–µ—á–µ–Ω–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
// —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–∏—Ç—Å—è –ø—Ä–∏ commit()
```
## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã
- **Persistent-—Å—É—â–Ω–æ—Å—Ç—å** —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –±–∞–∑–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (`dirty checking`).
- **Detached-—Å—É—â–Ω–æ—Å—Ç—å** —Ç—Ä–µ–±—É–µ—Ç `merge()`, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—ã–ª–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.
- **Transient-—Å—É—â–Ω–æ—Å—Ç—å** –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ –±–∞–∑–µ –∏ **–Ω–µ –∏–º–µ–µ—Ç ID**, –ø–æ–∫–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞.
- **Removed-—Å—É—â–Ω–æ—Å—Ç—å** ‚Äî special case: –ø–æ—Å–ª–µ `commit` –æ–Ω–∞ –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ –ë–î.