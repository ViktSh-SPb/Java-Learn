## üîπ –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ö–∞–Ω–∏–∑–º: CAS (Compare-And-Swap)
**–ò–¥–µ—è CAS:**
1. –ï—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `V` —Å —Ç–µ–∫—É—â–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º `expectedValue`.
2. –ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –µ—ë –Ω–∞ `newValue`, –Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `expectedValue`.
3. –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Üí –∑–∞–º–µ–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—Ç–æ–º–∞—Ä–Ω–æ.
4. –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è (–∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ—É–¥–∞—á–∏).
```java
boolean compareAndSet(expectedValue, newValue)
```
- **–ê—Ç–æ–º–∞—Ä–Ω–æ**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–∞–∫ –µ–¥–∏–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (`synchronized`), –ø–æ—ç—Ç–æ–º—É –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—ã—Å—Ç—Ä—ã–µ.
## üîπ –ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ
–ü—Ä–∏–º–µ—Ä –Ω–∞ –ø—Å–µ–≤–¥–æ–∫–æ–¥–µ –¥–ª—è `AtomicInteger.incrementAndGet()`:
```java
do {
    oldValue = value.get();           // —á–∏—Ç–∞–µ–º —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    newValue = oldValue + 1;          // —Å—á–∏—Ç–∞–µ–º –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
} while (!value.compareAndSet(oldValue, newValue));
return newValue;
```
- –ï—Å–ª–∏ –¥—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫ —É—Å–ø–µ–ª –∏–∑–º–µ–Ω–∏—Ç—å `value` –º–µ–∂–¥—É —á—Ç–µ–Ω–∏–µ–º –∏ –∑–∞–º–µ–Ω–æ–π ‚Üí `compareAndSet` –≤–µ—Ä–Ω—ë—Ç `false` ‚Üí –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è.
- –¢–∞–∫ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è **–ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**.
## üîπ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ CAS
1. **–ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫** ‚Üí –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.
2. **–ú–µ–Ω—å—à–µ —Ä–∏—Å–∫–∞ deadlock –∏–ª–∏ livelock**, —á–µ–º –ø—Ä–∏ `synchronized`.
3. **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—á—ë—Ç—á–∏–∫–æ–≤, —Ñ–ª–∞–≥–æ–≤ –∏ —Å—Å—ã–ª–æ–∫** –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ.
## üîπ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è CAS
- **ABA-–ø—Ä–æ–±–ª–µ–º–∞**: –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –º–æ–≥–ª–∞ –±—ã—Ç—å A ‚Üí B ‚Üí A –º–µ–∂–¥—É —á—Ç–µ–Ω–∏–µ–º –∏ –∑–∞–º–µ–Ω–æ–π.
    - –†–µ—à–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `AtomicStampedReference` –∏–ª–∏ `AtomicMarkableReference`.
- **–ú–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏** ‚Üí —Å–ø–∏–Ω–ª–æ–∫–∏ ‚Üí –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ CPU.
‚úÖ **–ò—Ç–æ–≥:**  
–í—Å–µ –∫–ª–∞—Å—Å—ã `Atomic` –≤ Java —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ **CAS (Compare-And-Swap)** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.