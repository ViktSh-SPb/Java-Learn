## üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
**–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (Optimistic Locking)** ‚Äî —ç—Ç–æ –ø–æ–¥—Ö–æ–¥ –∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –ø–æ—Ç–æ–∫–∏ **–Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —Ä–µ—Å—É—Ä—Å –∑–∞—Ä–∞–Ω–µ–µ**, –∞ **–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é—Ç, —á—Ç–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –Ω–µ –±—É–¥–µ—Ç**.
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ **–≤ –º–æ–º–µ–Ω—Ç –∑–∞–ø–∏—Å–∏**.
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–æ–º, –æ–ø–µ—Ä–∞—Ü–∏—è **–Ω–µ —É–¥–∞—ë—Ç—Å—è** –∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è.
–í Java –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–∞—Å—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ **CAS (Compare-And-Swap)**.
## üîπ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç CAS –≤ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
1. –ü–æ—Ç–æ–∫ —á–∏—Ç–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞.
2. –í—ã–ø–æ–ª–Ω—è–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫).
3. –ü—ã—Ç–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é CAS:
    - –ï—Å–ª–∏ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –æ–∂–∏–¥–∞–µ–º—ã–º ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ.
    - –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–æ–º ‚Üí CAS –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `false`, –∏ –ø–æ—Ç–æ–∫ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É.
**–í–∞–∂–Ω–æ:** –Ω–∏–∫–∞–∫–∏—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è, –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –ø—Ä–æ–±–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (spin-loop).
## üîπ –ö–æ–≥–¥–∞ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–∞
1. **–ù–∏–∑–∫–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è –∑–∞ —Ä–µ—Å—É—Ä—Å**
    - –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.
    - –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ —Ä–µ–¥–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.
2. **Lock-free –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö**
    - –ù–∞–ø—Ä–∏–º–µ—Ä, `ConcurrentLinkedQueue`, `AtomicInteger`, `AtomicReference`.
3. **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏**
    - –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ ‚Üí –Ω–µ—Ç —Ä–∏—Å–∫–∞ deadlock/livelock.
## üîπ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- Lock-free ‚Üí –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è **–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**.
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ **deadlock/livelock** –ø—Ä–æ–±–ª–µ–º.
- –ü—Ä–æ—Å—Ç–µ–π—à–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ **–∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ CAS**.
## üîπ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ü—Ä–∏ **–≤—ã—Å–æ–∫–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏** CAS –º–æ–∂–µ—Ç –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è ‚Üí –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ CPU.
- –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ–∫—Ü–∏–π —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
### ‚úÖ –ò—Ç–æ–≥
- **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ + CAS**: –ø–æ—Ç–æ–∫–∏ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é—Ç, —á—Ç–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ä–µ–¥–∫–∏, –∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏.
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è **—á–∞—Å—Ç–æ —á–∏—Ç–∞–µ–º—ã—Ö –∏ —Ä–µ–¥–∫–æ –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –∏ –¥–ª—è **lock-free —Å—Ç—Ä—É–∫—Ç—É—Ä**.
- –†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `Atomic` –∫–ª–∞—Å—Å—ã –∏ –º–µ—Ç–æ–¥—ã `compareAndSet()`.