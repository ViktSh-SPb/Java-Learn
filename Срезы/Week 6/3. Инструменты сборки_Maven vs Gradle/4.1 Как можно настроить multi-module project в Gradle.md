## 1️⃣ Структура проекта
Пример структуры:
```
my-app/
├── settings.gradle
├── build.gradle           ← корневой файл сборки
├── core/
│   └── build.gradle       ← модуль core
└── web/
    └── build.gradle       ← модуль web
```
- `core` — библиотека или логический модуль.
- `web` — модуль приложения, который зависит от `core`.
## 2️⃣ Настройка `settings.gradle`
Файл `settings.gradle` отвечает за регистрацию всех модулей:
```groovy
rootProject.name = 'my-app'

include 'core', 'web'
```
> Теперь Gradle знает, что `core` и `web` — подмодули проекта.
Для Kotlin DSL (`settings.gradle.kts`):
```kotlin
rootProject.name = "my-app"

include("core", "web")
```
## 3️⃣ Настройка корневого `build.gradle`
Корневой `build.gradle` обычно содержит **общие настройки для всех модулей**:
```groovy
plugins {
    id 'java'
}

allprojects {
    group = 'com.example'
    version = '1.0.0'

    repositories {
        mavenCentral()
    }
}

subprojects {
    apply plugin: 'java'

    dependencies {
        testImplementation 'org.junit.jupiter:junit-jupiter:5.10.0'
    }

    tasks.withType(Test) {
        useJUnitPlatform()
    }
}
```
> `allprojects` — настройки для всех проектов (включая root).  
> `subprojects` — настройки только для модулей.
## 4️⃣ Настройка модулей
### 4.1 `core/build.gradle`
```groovy
plugins {
    id 'java-library'
}

dependencies {
    // зависимости только для core
}
```
- `java-library` вместо `java` для библиотек, чтобы Gradle мог экспортировать API зависимостей.
- Модуль может иметь свои зависимости (`implementation`, `api`, `testImplementation`).
### 4.2 `web/build.gradle`
```groovy
plugins {
    id 'java'
    id 'application'
}

dependencies {
    implementation project(':core')  // зависимость от модуля core
    implementation 'org.springframework.boot:spring-boot-starter-web:3.3.0'
}

application {
    mainClass = 'com.example.web.Main'
}
```
- `project(':core')` — указывает Gradle использовать локальный модуль `core` как зависимость.
- Можно добавлять сторонние зависимости наряду с внутренними.
## 5️⃣ Сборка и запуск
- **Сборка всего проекта**:
```bash
gradle build
```
- **Сборка конкретного модуля и его зависимостей**:
```bash
gradle :web:build
```
- **Запуск приложения** (если модуль `web` — приложение):
```bash
gradle :web:run
```
> Gradle автоматически соберёт все необходимые модули (например, `core`) перед сборкой `web`.
## 6️⃣ Преимущества multi-module Gradle
1. **Централизованное управление зависимостями** — общие версии и плагины в корневом `build.gradle`.
2. **Инкрементальная сборка** — Gradle пересобирает только изменённые модули.
3. **Чёткая модульная структура** — облегчает поддержку и тестирование.
4. **Гибкость в зависимостях** — модули могут зависеть друг от друга через `project(':moduleName')`.
5. **Параллельная сборка** — Gradle выполняет независимые модули одновременно.