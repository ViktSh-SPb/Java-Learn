**Spring Cache** ‚Äî —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤ Spring Framework.  
–û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤ –≤ –∫—ç—à, —á—Ç–æ–±—ã –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—Ä–æ—Å—ã –≤ –ë–î, –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –≤—ã–∑–æ–≤—ã —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö API).
–¢–æ –µ—Å—Ç—å Spring Cache –¥–µ–ª–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–±—ã—Å—Ç—Ä–µ–µ**, **—ç–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã** –∏ **—Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã**.
# üîß **–ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Spring Cache?**
### ‚úî 1. –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ï—Å–ª–∏ –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ö, –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫—ç—à.
–ù–∞–ø—Ä–∏–º–µ—Ä:
```java
public Product getProductById(Long id) {
    return productRepository.findById(id).orElseThrow();
}
```
–ï—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ 100 —Ä–∞–∑, –æ–Ω 100 —Ä–∞–∑ –ø–æ–π–¥—ë—Ç –≤ –ë–î.  
–° –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º ‚Äî —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.
### ‚úî 2. –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
–ß–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –¥–∞–Ω–Ω—ã–º –ª—É—á—à–µ –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –∏–∑ –∫—ç—à–∞.
### ‚úî 3. –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
–ï—Å–ª–∏ –≤–∞—à –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π API –∏–ª–∏ –¥–µ–ª–∞–µ—Ç —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑–∫–æ —Å–Ω–∏–∂–∞–µ—Ç –∑–∞—Ç—Ä–∞—Ç—ã.
### ‚úî 4. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫—ç—à-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
Spring Cache –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∫—ç—à–∞–º–∏.  
–õ–µ–≥–∫–æ –º–µ–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é:
- ConcurrentHashMap (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é / SimpleCache)
- Caffeine
- Redis
- EhCache
- Hazelcast
- Infinispan –∏ –¥—Ä.
–ù—É–∂–Ω–æ –ª–∏—à—å –ø–æ–º–µ–Ω—è—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.
# üß© –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Spring Cache?
Spring Cache –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—ç—à–µ–º:
### üìå `@Cacheable`
–ö–ª–∞–¥—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–µ—Ç–æ–¥–∞ –≤ –∫—ç—à.  
–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—ã–∑–æ–≤–µ —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫—ç—à–∞.
```java
@Cacheable("products")
public Product getProduct(Long id) {
    return repository.findById(id).orElseThrow();
}
```
### üìå `@CacheEvict`
–£–¥–∞–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç(—ã) –∏–∑ –∫—ç—à–∞.
```java
@CacheEvict(value = "products", key = "#id")
public void deleteProduct(Long id) {
    repository.deleteById(id);
}
```
### üìå `@CachePut`
–û–±–Ω–æ–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –≤ –∫—ç—à–µ, –Ω–æ **–≤—Å–µ–≥–¥–∞** –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥.
```java
@CachePut(value = "products", key = "#product.id")
public Product updateProduct(Product product) {
    return repository.save(product);
}
```
### üìå `@Caching`
–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π (put/evict).
### üìå `@EnableCaching`
–í–∫–ª—é—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫—ç—à–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
```java
@Configuration
@EnableCaching
public class CacheConfig {
}
```
# üî• –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Å Caffeine
pom.xml:
```xml
<dependency>
    <groupId>com.github.ben-manes.caffeine</groupId>
    <artifactId>caffeine</artifactId>
</dependency>
```
Java config:
```java
@Bean
public CaffeineCacheManager cacheManager() {
    CaffeineCacheManager manager = new CaffeineCacheManager("products");
    manager.setCaffeine(
        Caffeine.newBuilder()
                .expireAfterWrite(10, TimeUnit.MINUTES)
                .maximumSize(1000)
    );
    return manager;
}
```
# üìù –ò—Ç–æ–≥–∏
### Spring Cache ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–µ—Ç–æ–¥–æ–≤;
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ –∫—ç—à–∞;
- —É—Å–∫–æ—Ä—è—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ;
- —Å–Ω–∏–∂–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ë–î –∏ API.
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ, –≥–¥–µ –¥–∞–Ω–Ω—ã–µ –º–µ–Ω—è—é—Ç—Å—è —Ä–µ–¥–∫–æ, –∞ —á–∏—Ç–∞—é—Ç—Å—è —á–∞—Å—Ç–æ üëá  
–∫–∞—Ç–∞–ª–æ–≥–∏ —Ç–æ–≤–∞—Ä–æ–≤, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏, –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç, –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ—Ç—á–µ—Ç—ã –∏ —Ç.–¥.