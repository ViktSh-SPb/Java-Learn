В SQL функция может принимать **входные параметры**, которые затем используются внутри тела функции для вычислений, фильтрации данных или других операций. Давай разберём пошагово.
## 1️⃣ **Общий синтаксис функции с параметрами**
**PostgreSQL пример:**
```sql
CREATE OR REPLACE FUNCTION имя_функции(параметр1 ТИП, параметр2 ТИП)
RETURNS ТИП_РЕЗУЛЬТАТА
AS $$
BEGIN
    -- тело функции
    RETURN выражение_с_использованием_параметров;
END;
$$ LANGUAGE plpgsql;
```
## 2️⃣ **Простой пример функции сложения двух чисел**
```sql
CREATE OR REPLACE FUNCTION add_numbers(a INTEGER, b INTEGER)
RETURNS INTEGER
AS $$
BEGIN
    RETURN a + b;
END;
$$ LANGUAGE plpgsql;
```
- `a` и `b` — входные параметры.
- Внутри функции мы просто складываем их и возвращаем результат.
**Вызов функции:**
```sql
SELECT add_numbers(5, 3);  -- Результат: 8
```
## 3️⃣ **Пример с использованием параметра для фильтрации таблицы**
Допустим, есть таблица `users`:
```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    name TEXT,
    status TEXT
);
```
Функция для получения пользователей по статусу:
```sql
CREATE OR REPLACE FUNCTION get_users_by_status(user_status TEXT)
RETURNS TABLE(id INT, name TEXT)  -- возвращает таблицу
AS $$
BEGIN
    RETURN QUERY
    SELECT id, name
    FROM users
    WHERE status = user_status;
END;
$$ LANGUAGE plpgsql;
```
**Вызов функции:**
```sql
SELECT * FROM get_users_by_status('active');
```
- Параметр `user_status` используется внутри `WHERE`.
- Функция возвращает все записи, где статус совпадает с параметром.
## 4️⃣ **Особенности работы с параметрами**
- Параметры **локальные** для функции, можно использовать в выражениях, `IF`, `CASE`, `LOOP` и т.д.
- Параметры можно комбинировать с константами и колонками таблиц.
- В PostgreSQL тип возвращаемого значения может быть `RETURNS TABLE(...)` или скалярный тип (`INTEGER`, `TEXT` и т.д.).
✅ **Итог:**
1. Определяем параметры в скобках при создании функции.
2. Используем их как обычные переменные внутри тела функции.
3. Вызываем функцию с конкретными значениями параметров.