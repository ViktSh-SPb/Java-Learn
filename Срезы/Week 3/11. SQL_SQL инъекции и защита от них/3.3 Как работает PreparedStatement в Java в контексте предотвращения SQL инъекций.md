`PreparedStatement` ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ **—Å–∞–º—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –∑–∞—â–∏—Ç—ã –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π –≤ Java**, –∏ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, **–∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äú–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º‚Äù**.
## üß± 1. –ß—Ç–æ —Ç–∞–∫–æ–µ `PreparedStatement`
`PreparedStatement` ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç JDBC, –∫–æ—Ç–æ—Ä—ã–π:
- –∑–∞—Ä–∞–Ω–µ–µ **–ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç** SQL-–∑–∞–ø—Ä–æ—Å –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –°–£–ë–î,
- –ø–µ—Ä–µ–¥–∞—ë—Ç **–∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ—Ç–¥–µ–ª—å–Ω–æ** –æ—Ç SQL-–∫–æ–¥–∞,
- –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ –±—É–¥—É—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ –∫–æ–º–∞–Ω–¥—ã SQL.
üìå –ü—Ä–∏–º–µ—Ä:
```java
String sql = "SELECT * FROM users WHERE email = ? AND password = ?";
PreparedStatement ps = connection.prepareStatement(sql);
ps.setString(1, userEmail);
ps.setString(2, userPassword);
ResultSet rs = ps.executeQuery();
```
## üß† 2. –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤–æ
### –®–∞–≥ 1. –ö–æ–º–ø–∏–ª—è—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–∞
- –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `connection.prepareStatement(sql)` –¥—Ä–∞–π–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å **–º–µ—Å—Ç–∞–º–∏ –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** (`?`) –≤ –°–£–ë–î.
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö **–ø–∞—Ä—Å–∏—Ç –∏ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç** —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å ‚Äî –Ω–æ **–±–µ–∑ –∑–Ω–∞—á–µ–Ω–∏–π**.
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ —É–∂–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞.
üìå –°–£–ë–î –≤–∏–¥–∏—Ç:
```sql
SELECT * FROM users WHERE email = ? AND password = ?
```
–∏ **–ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –ø–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**.
### –®–∞–≥ 2. –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `ps.setString(1, userEmail);`, –∑–Ω–∞—á–µ–Ω–∏–µ `userEmail` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **–æ—Ç–¥–µ–ª—å–Ω—ã–º –±–∏–Ω–∞—Ä–Ω—ã–º –ø–∞–∫–µ—Ç–æ–º**, –∞ –Ω–µ –∫–∞–∫ —á–∞—Å—Ç—å —Ç–µ–∫—Å—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞.
- –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –¥–∞–∂–µ –µ—Å–ª–∏ `userEmail` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π SQL, –æ–Ω –Ω–µ –∏–∑–º–µ–Ω–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–ø—Ä–æ—Å–∞.
üìå –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤—ë–ª:
```
' OR '1'='1
```
—Ç–æ –°–£–ë–î –Ω–µ ‚Äú—Å–∫–ª–µ–∏—Ç‚Äù —ç—Ç–æ —Å SQL ‚Äî –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç **—Å—Ç—Ä–æ–∫—É**, —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ.
### –®–∞–≥ 3. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –ü—Ä–∏ `ps.executeQuery()` –°–£–ë–î –ø—Ä–æ—Å—Ç–æ –±–µ—Ä—ë—Ç —É–∂–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏ **–≤—Å—Ç–∞–≤–ª—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏**, –Ω–µ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—è SQL.
- –õ—é–±–æ–π –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π –≤–≤–æ–¥ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω **–∫–∞–∫ –¥–∞–Ω–Ω—ã–µ**, –∞ –Ω–µ –∫–∞–∫ SQL.
## üß™ 3. –ü—Ä–∏–º–µ—Ä –∞—Ç–∞–∫–∏ –±–µ–∑ PreparedStatement (—É—è–∑–≤–∏–º—ã–π –∫–æ–¥):
```java
String sql = "SELECT * FROM users WHERE email = '" + email + "'";
Statement stmt = connection.createStatement();
ResultSet rs = stmt.executeQuery(sql);
```
–ï—Å–ª–∏ `email = "' OR '1'='1"` ‚Üí –ø–æ–ª—É—á–∏—Ç—Å—è:
```sql
SELECT * FROM users WHERE email = '' OR '1'='1'
```
üëâ –°—Ä–∞–±–æ—Ç–∞–µ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏—è.
## ‚úÖ 4. –¢–æ—Ç –∂–µ —Å–ª—É—á–∞–π —Å PreparedStatement (–±–µ–∑–æ–ø–∞—Å–Ω–æ):
```java
String sql = "SELECT * FROM users WHERE email = ?";
PreparedStatement ps = connection.prepareStatement(sql);
ps.setString(1, "' OR '1'='1");
ResultSet rs = ps.executeQuery();
```
–°–£–ë–î –≤–∏–¥–∏—Ç:
```sql
SELECT * FROM users WHERE email = '' OR '1'='1'
```
‚ö†Ô∏è –Ω–æ –∫–∞–∫:  
`WHERE email = ''' OR ''1''=''1'` ‚Äî —Ç.–µ. –∫–∞–∫ –æ–±—ã—á–Ω—É—é **—Å—Ç—Ä–æ–∫—É**, –∞ –Ω–µ SQL-–∫–æ–º–∞–Ω–¥—É.  
‚û°Ô∏è –ò–Ω—ä–µ–∫—Ü–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç.
## ‚ö° 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ PreparedStatement

|–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ|–û–ø–∏—Å–∞–Ω–∏–µ|
|---|---|
|üß∞ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å|–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏|
|üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å|–æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∑–∞–ø—Ä–æ—Å –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ ‚Äî –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏|
|üí¨ –£–¥–æ–±–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö|–º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `String`, `int`, `Date`, `Timestamp` –∏ –¥—Ä. –Ω–∞–ø—Ä—è–º—É—é|
|üîí –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ|–¥—Ä–∞–π–≤–µ—Ä JDBC —Å–∞–º —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, –≤ —Ç.—á. —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã|
|üìà –ü–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫—ç—à–∏—Ä—É–µ—Ç—Å—è|–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –°–£–ë–î|
## üß† 6. –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã –∏ best practices
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `PreparedStatement` –≤—Å–µ–≥–¥–∞**, –≥–¥–µ –µ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ.
- ‚ö†Ô∏è –ù–µ–ª—å–∑—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü, —Å—Ç–æ–ª–±—Ü–æ–≤ –∏ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ ‚Äî –∏—Ö –Ω—É–∂–Ω–æ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ **whitelist**.
- üßπ –û—Å–≤–æ–±–æ–∂–¥–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã (`try-with-resources`), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —É—Ç–µ—á–µ–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.
- üß≠ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Statement` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –≤–≤–æ–¥–æ–≤.
- üß™ –î–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `batch` —Å `PreparedStatement` –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
## üìå 7. –ö–æ—Ä–æ—Ç–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

|–ü–æ–¥—Ö–æ–¥|SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏ –≤–æ–∑–º–æ–∂–Ω—ã|–≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä—É—á–Ω—É—é|–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å|–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å|
|---|---|---|---|---|
|`Statement` + –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è|‚úÖ –î–∞|‚ùå –ù–µ–Ω–∞–¥—ë–∂–Ω–æ|‚ö†Ô∏è —Å—Ä–µ–¥–Ω—è—è|‚ùå –Ω–∏–∑–∫–∞—è|
|`PreparedStatement`|‚ùå –ù–µ—Ç|‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏|üöÄ –≤—ã—à–µ|‚úÖ –≤—ã—Å–æ–∫–∞—è|
‚úÖ **–ò—Ç–æ–≥:**  
`PreparedStatement` –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- —Ä–∞–∑–¥–µ–ª—è–µ—Ç –∫–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ –∏ –¥–∞–Ω–Ω—ã–µ,
- –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç SQL –æ–¥–∏–Ω —Ä–∞–∑,
- –≤—Å—Ç–∞–≤–ª—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏—è, –∞ –Ω–µ –∫–∞–∫ SQL,
- —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –≤—Å—ë –∑–∞ –≤–∞—Å.