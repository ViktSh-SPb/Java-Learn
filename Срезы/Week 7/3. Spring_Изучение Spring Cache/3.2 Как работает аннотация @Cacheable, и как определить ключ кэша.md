–ê–Ω–Ω–æ—Ç–∞—Ü–∏—è **`@Cacheable`** ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ö–∞–Ω–∏–∑–º Spring Cache. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç **–∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–µ—Ç–æ–¥–∞**: –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö —Å —Ç–µ–º–∏ –∂–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ Spring –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞, –Ω–µ –≤—ã–∑—ã–≤–∞—è –º–µ—Ç–æ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ.
# ‚úÖ **1. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç @Cacheable**
–ö–æ–≥–¥–∞ –º–µ—Ç–æ–¥ –ø–æ–º–µ—á–µ–Ω `@Cacheable`:
1. Spring —Å–æ–∑–¥–∞—ë—Ç –¥–ª—è –±–∏–Ω–∞ **–ø—Ä–æ–∫—Å–∏**.
2. –ü–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –º–µ—Ç–æ–¥–∞ –ø—Ä–æ–∫—Å–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫—ç—à–µ:
    - –µ—Å–ª–∏ –µ—Å—Ç—å ‚Üí _–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑ –∫—ç—à–∞_, –º–µ—Ç–æ–¥ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è;
    - –µ—Å–ª–∏ –Ω–µ—Ç ‚Üí _–≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥_, –∑–∞—Ç–µ–º –∫–ª–∞–¥—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫—ç—à.
–ü—Ä–∏–º–µ—Ä:
```java
@Cacheable("products")
public Product getProduct(Long id) {
    System.out.println("–í—ã–∑–æ–≤ –ë–î!");
    return repository.findById(id).orElseThrow();
}
```
–ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤: –º–µ—Ç–æ–¥ —Ä–µ–∞–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è  
–°–ª–µ–¥—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã: –∑–Ω–∞—á–µ–Ω–∏–µ –±–µ—Ä—ë—Ç—Å—è –∏–∑ –∫—ç—à–∞.
# ‚úÖ **2. –ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –∏–º—è –∫—ç—à–∞**
–ò–º—è –∫—ç—à–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ value:
```java
@Cacheable(value = "products")
```
–û–Ω–æ:
- –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç "–ø–∞–ø–∫—É" –≤ –∫—ç—à–µ,
- –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ TTL, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—á–∏—Å—Ç–∫–∏ –∏ —Ç.–¥.,
- –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –ø–æ—Ö–æ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ.
# ‚úÖ **3. –ö–∞–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–ª—é—á**
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–ª—é—á ‚Äî —ç—Ç–æ:
```
key = SimpleKey.of(allMethodArguments)
```
–¢–æ –µ—Å—Ç—å:
- –µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–¥–∏–Ω ‚Üí –∫–ª—é—á = –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Üí –∫–ª—é—á = –æ–±—ä–µ–∫—Ç `SimpleKey(a, b, c)`
- –µ—Å–ª–∏ –Ω–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ‚Üí –∫–ª—é—á = `SimpleKey.EMPTY`
### –ü—Ä–∏–º–µ—Ä—ã:
```java
@Cacheable("users")
public User getUser(Long id)
```
–ö–ª—é—á: `1`
```java
@Cacheable("products")
public Product getProduct(String code, String lang)
```
–ö–ª—é—á: `SimpleKey("P100", "ru")`
# ‚úÖ **4. –ö–∞–∫ –∑–∞–¥–∞—Ç—å –∫–ª—é—á –≤—Ä—É—á–Ω—É—é (SpEL)**
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä `key = ""`.
### ‚úî –ü—Ä–∏–º–µ—Ä ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –ø–æ id
```java
@Cacheable(value = "products", key = "#id")
public Product getProduct(Long id)
```
### ‚úî –ü—Ä–∏–º–µ—Ä ‚Äî —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á
```java
@Cacheable(value = "products", key = "{#code, #lang}")
public Product find(String code, String lang)
```
### ‚úî –ü—Ä–∏–º–µ—Ä ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –ø–æ–ª—é –æ–±—ä–µ–∫—Ç–∞
```java
@Cacheable(value = "products", key = "#product.id")
public Product get(Product product)
```
### ‚úî –ü—Ä–∏–º–µ—Ä ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞
```java
@Cacheable(value = "cards", key = "T(java.util.Objects).hash(#request.cardId, #request.type)")
public CardInfo getCard(CardRequest request)
```
# ‚úÖ **5. –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏ –∏–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è: `condition`**
–ú–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ–¥—Ö–æ–¥–∏—Ç:
```java
@Cacheable(value = "products", key = "#id", condition = "#id > 0")
```
# ‚úÖ **6. –û—Ç–∫–ª—é—á–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö: `unless`**
`unless` —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞.
–ü—Ä–∏–º–µ—Ä: –Ω–µ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å null:
```java
@Cacheable(value = "products", key = "#id", unless = "#result == null")
```
# üîç **7. –í–∞–∂–Ω—ã–π –Ω—é–∞–Ω—Å: @Cacheable –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ private –∏ self-invocation**
–¢–æ –µ—Å—Ç—å:
‚ùå –º–µ—Ç–æ–¥ private –Ω–µ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è  
‚ùå –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ –≤–Ω—É—Ç—Ä–∏ —Ç–æ–≥–æ –∂–µ –∫–ª–∞—Å—Å–∞ ‚Üí –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è (–ø—Ä–æ–∫—Å–∏ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç)
# üß† –ò—Ç–æ–≥
**`@Cacheable`:**
- –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏,
- –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫—ç—à–µ,
- –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
**–ö–ª—é—á –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é = –∞—Ä–≥—É–º–µ–Ω—Ç—ã –º–µ—Ç–æ–¥–∞.**
**–ö–ª—é—á –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ SpEL:**
- `#param`
- `{#param1, #param2}`
- `#object.field`
- `T(...)` –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤