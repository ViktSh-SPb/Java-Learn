–í **SOAP –≤–µ–±-—Å–µ—Ä–≤–∏—Å–∞—Ö** –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (–∫–∞–∫ HTTPS), –∞ **–≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–≥–æ SOAP-—Å–æ–æ–±—â–µ–Ω–∏—è** —Å –ø–æ–º–æ—â—å—é —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ **WS-Security (Web Services Security)**.  
–≠—Ç–æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç –∑–∞–¥–∞—ë—Ç, **–∫–∞–∫ –¥–æ–±–∞–≤–ª—è—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, –ø–æ–¥–ø–∏—Å—å, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä—è–º–æ –≤ XML**.
## üîê 1. –ß—Ç–æ —Ç–∞–∫–æ–µ WS-Security
**WS-Security** ‚Äî —ç—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è SOAP, –∫–æ—Ç–æ—Ä–æ–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
- –∫–∞–∫ **–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞**;
- –∫–∞–∫ **–ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å** –∏ **—à–∏—Ñ—Ä–æ–≤–∞—Ç—å** —Å–æ–æ–±—â–µ–Ω–∏—è;
- –∫–∞–∫ **–æ–±–µ—Å–ø–µ—á–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å** –∏ **–∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å** –¥–∞–Ω–Ω—ã—Ö;
- –∫–∞–∫ **–ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–æ–∫–µ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** (–ø–∞—Ä–æ–ª–∏, X.509 —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã, SAML –∏ —Ç. –¥.).
–í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ SOAP-—Å–æ–æ–±—â–µ–Ω–∏—è:
```xml
<soap:Header>
  <wsse:Security xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/07/secext">
    <!-- –ó–¥–µ—Å—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –ø–æ–¥–ø–∏—Å—å, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ -->
  </wsse:Security>
</soap:Header>
```
## ‚öôÔ∏è 2. –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã WS-Security
### ‚úÖ 2.1 –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (UsernameToken)
–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä–æ–ª—è:
```xml
<wsse:Security>
  <wsse:UsernameToken>
    <wsse:Username>user1</wsse:Username>
    <wsse:Password Type="wsse:PasswordDigest">
      eW91cl9wYXNzd29yZF9oYXNo
    </wsse:Password>
    <wsse:Nonce>abc123</wsse:Nonce>
    <wsu:Created>2025-11-01T19:43:00Z</wsu:Created>
  </wsse:UsernameToken>
</wsse:Security>
```
- **PasswordDigest** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –ø–∞—Ä–æ–ª—å –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ.
- **Nonce** –∏ **Created** –∑–∞—â–∏—â–∞—é—Ç –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π.
### üîè 2.2 –ü–æ–¥–ø–∏—Å—å —Å–æ–æ–±—â–µ–Ω–∏–π
–î–ª—è –∑–∞—â–∏—Ç—ã **—Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏** SOAP-—Å–æ–æ–±—â–µ–Ω–∏–π:
```xml
<ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
  <!-- –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ -->
  <ds:SignedInfo>
    <ds:Reference URI="#Body">
      <ds:DigestValue>...</ds:DigestValue>
    </ds:Reference>
  </ds:SignedInfo>
  <ds:SignatureValue>...</ds:SignatureValue>
</ds:Signature>
```
üìò –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **X.509 —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**, –∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–∏—Ñ—Ä–æ–≤—É—é –ø–æ–¥–ø–∏—Å—å.
### üîê 2.3 –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è **–∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏**:
- SOAP-Body (–∏–ª–∏ —á–∞—Å—Ç—å –µ–≥–æ) —à–∏—Ñ—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é **XML Encryption**.
- –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ –≤ `<wsse:Security>`.
## üß± 3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ Java
–û–±—ã—á–Ω–æ WS-Security —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏:
### üß© Apache CXF (—Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π)
–í `cxf.xml` –∏–ª–∏ —á–µ—Ä–µ–∑ `@EndpointProperty` –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏:
```xml
<jaxws:endpoint ...>
  <jaxws:inInterceptors>
    <bean class="org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor">
      <constructor-arg>
        <map>
          <entry key="action" value="UsernameToken Signature Encrypt"/>
          <entry key="passwordCallbackClass" value="com.example.PasswordCallbackHandler"/>
        </map>
      </constructor-arg>
    </bean>
  </jaxws:inInterceptors>
</jaxws:endpoint>
```
üì¶ CXF –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É **WSS4J**, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑—É–µ—Ç WS-Security.
### üß© Metro (JAX-WS Reference)
–í Metro –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∑–∞–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ **WS-Policy**, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```xml
<wsp:Policy xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
  <sp:SupportingTokens>
    <wsp:Policy>
      <sp:UsernameToken/>
    </wsp:Policy>
  </sp:SupportingTokens>
</wsp:Policy>
```
## üß∞ 4. –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é
–û–±—ã—á–Ω–æ **WS-Security –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å HTTPS**, —á—Ç–æ–±—ã:
- WS-Security –æ–±–µ—Å–ø–µ—á–∏–≤–∞–ª **—Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å** —Å–æ–æ–±—â–µ–Ω–∏–π,
- –∞ HTTPS ‚Äî **—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–∞–Ω–∞–ª–∞**.
## üí° 5. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ WS-Security

|–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å|–û–ø–∏—Å–∞–Ω–∏–µ|
|---|---|
|üßæ –ü–æ–¥–ø–∏—Å—å|–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–æ|
|üîí –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ|–ó–∞—â–∏—â–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ç –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö|
|üë§ –¢–æ–∫–µ–Ω—ã|–ü–æ–∑–≤–æ–ª—è—é—Ç –≥–∏–±–∫–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π|
|üîÑ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å|–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö –ª—é–±–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ (HTTP, SMTP, JMS)|
