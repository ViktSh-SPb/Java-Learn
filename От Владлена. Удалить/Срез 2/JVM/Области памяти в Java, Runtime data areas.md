### Что такое куча (Heap) в контексте JVM?

Куча (Heap) — это область памяти в JVM, предназначенная для динамического выделения объектов во время выполнения программы. В куче хранятся все объекты, созданные в процессе работы приложения, а также метаданные о них. Куча является общей для всех потоков и управляется сборщиком мусора.

### Какие типы памяти существуют в Java Virtual Machine (JVM)?

В JVM выделяются следующие основные типы памяти:

- Heap (Куча): для хранения объектов и данных, созданных во время выполнения.
- Stack (Стек): для хранения локальных переменных, вызовов методов и кадров стека.
- Metaspace: для хранения метаданных классов, загруженных JVM.
- Method Area: ранее использовалась для хранения информации о классах; сейчас заменена Metaspace.
- PC Register: содержит адрес текущей инструкции выполнения.
- Native Memory: память, используемая нативными библиотеками и системными вызовами.

### Опишите, что такое стек (Stack) в JVM и для чего он используется.

Стек — это область памяти, которая используется для хранения:

- локальных переменных,
- данных о вызовах методов,
- кадров стека (Stack Frames), содержащих информацию о текущем состоянии выполнения метода. Каждый поток имеет свой собственный стек. Стек работает по принципу LIFO (Last In, First Out) и обеспечивает управление выполнением методов.

### Как работает сборка мусора (Garbage Collection) в куче JVM?

Сборщик мусора автоматически освобождает память от объектов, которые больше не используются. Он периодически проходит по куче, определяет объекты без ссылок и удаляет их, делая память доступной для новых объектов. В JVM реализуются разные алгоритмы сборки мусора: маркировка-сборка, копирование, параллельная и concurrent GC.

### Каково назначение памяти Metaspace в JVM?

Metaspace — это область памяти, где хранятся метаданные классов (например, структура классов, методы). В отличие от предыдущего PermGen Space, Metaspace использует нативную память ОС и динамически расширяется по мере необходимости. Это позволяет избежать ошибок переполнения PermGen.

### Объясните разницу между Young и Old (Tenured) поколениями в куче JVM.

Куча делится на поколения:

- Young Generation: сюда попадают новые объекты. Быстро собирается сборщиком Minor GC. Объекты могут перемещаться из Young в Old поколение при длительном существовании.
- Old (Tenured) Generation: содержит объекты с долгим сроком жизни. Сборка этого поколения происходит реже — Major или Full GC. Объекты сюда перемещаются из Young после нескольких сборок.

### Какие стратегии сборки мусора (Garbage Collection) существуют в JVM и в чем их особенности?

Основные стратегии:

- Serial GC: однопоточный; подходит для небольших приложений.
- Parallel GC: многопоточный; оптимален для приложений с высокой пропускной способностью.
- CMS (Concurrent Mark Sweep): минимизирует паузы за счет параллельной сборки мусора.
- G1 GC: разбивает кучу на регионы и собирает их по частям; баланс между паузами и пропускной способностью.
- ZGC / Shenandoah: низкопауза сборщики для больших объемов памяти.

### Что такое Direct Memory в контексте JVM и как его использование влияет на производительность приложения?

Direct Memory — это память вне управляемой области Heap, выделяемая через `ByteBuffer.allocateDirect()` или JNI-вызовы. Использование Direct Memory уменьшает нагрузку на сборщик мусора и повышает производительность при работе с I/O или сетевыми операциями за счет меньших копирований данных между ядром ОС и приложением.

### Как JVM обрабатывает intern-строки в памяти и как это влияет на производительность приложения?

Метод `String.intern()` помещает строку в пул строк (`String Pool`). Если строка уже есть в пуле — возвращается ссылка на нее; иначе — добавляется новая. Это помогает уменьшить дублирование одинаковых строковых литералов и экономит память при использовании повторяющихся строк. Однако чрезмерное использование intern может привести к росту пула строк и увеличению времени поиска.