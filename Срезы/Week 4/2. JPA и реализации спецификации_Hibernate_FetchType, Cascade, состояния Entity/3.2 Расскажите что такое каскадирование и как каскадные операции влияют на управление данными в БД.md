## üß© –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–∞—Å–∫–∞–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
**–ö–∞—Å–∫–∞–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫ —Å–≤—è–∑–∞–Ω–Ω—ã–º —Å—É—â–Ω–æ—Å—Ç—è–º** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏.
–¢–æ –µ—Å—Ç—å, –µ—Å–ª–∏ —É —Å—É—â–Ω–æ—Å—Ç–∏ –µ—Å—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã (`@OneToMany`, `@ManyToOne` –∏ —Ç.–¥.), –∫–∞—Å–∫–∞–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç **–Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã `persist`, `remove` –∏ —Ç.–ø.` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞**, –∞ –¥–µ–ª–∞—Ç—å —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
## üîπ –ö–∞—Å–∫–∞–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ JPA
–í JPA –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Å–≤–æ–π—Å—Ç–≤–æ `cascade`**:
```java
@OneToMany(mappedBy = "user", cascade = CascadeType.ALL)
private List<Order> orders;
```
### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:

|–¢–∏–ø|–ß—Ç–æ –¥–µ–ª–∞–µ—Ç|
|---|---|
|**PERSIST**|–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–æ—á–µ—Ä–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏.|
|**MERGE**|–ü—Ä–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏ (`merge`) —Ä–æ–¥–∏—Ç–µ–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–∞—Å–∫–∞–¥–Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –¥–æ—á–µ—Ä–Ω–∏–º —Å—É—â–Ω–æ—Å—Ç—è–º.|
|**REMOVE**|–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –¥–æ—á–µ—Ä–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏.|
|**REFRESH**|–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–æ–¥–∏—Ç–µ–ª—è –∏–∑ –±–∞–∑—ã, –∫–∞—Å–∫–∞–¥–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–æ—á–µ—Ä–Ω–∏–µ.|
|**DETACH**|–ü—Ä–∏ –æ—Ç—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—è, –¥–æ—á–µ—Ä–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Ç–æ–∂–µ –æ—Ç—Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è.|
|**ALL**|–í—Å–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –≤—ã—à–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–∞—Å–∫–∞–¥–Ω–æ.|
## üîπ –ü—Ä–∏–º–µ—Ä –∫–∞—Å–∫–∞–¥–∏—Ä–æ–≤–∞–Ω–∏—è
```java
@Entity
public class User {
    @Id
    @GeneratedValue
    private Long id;

    @OneToMany(mappedBy = "user", cascade = CascadeType.ALL)
    private List<Order> orders = new ArrayList<>();
}
```
```java
User user = new User();
Order order1 = new Order();
Order order2 = new Order();

order1.setUser(user);
order2.setUser(user);
user.getOrders().add(order1);
user.getOrders().add(order2);

entityManager.persist(user); // –±–ª–∞–≥–æ–¥–∞—Ä—è CascadeType.PERSIST —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –∑–∞–∫–∞–∑—ã
```
‚úÖ –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–∑–≤–∞—Ç—å `persist` –¥–ª—è `user`, –∏ **Hibernate –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ `Order`**.
## üîπ –í–ª–∏—è–Ω–∏–µ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
1. **–£–ø—Ä–æ—â–∞–µ—Ç –∫–æ–¥** ‚Äî –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–ª–∏ —É–¥–∞–ª—è—Ç—å –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã.
2. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** ‚Äî —Ä–æ–¥–∏—Ç–µ–ª—å –∏ –¥–æ—á–µ—Ä–Ω–∏–µ –æ–±—ä–µ–∫—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã.
3. **–ú–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø–∞—Å–Ω—ã–º** ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, `CascadeType.REMOVE` —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ –∑–∞–ø–∏—Å–∏, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –Ω–µ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ.
4. **–£—Å–∫–æ—Ä—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** ‚Äî –º–µ–Ω—å—à–µ –≤—ã–∑–æ–≤–æ–≤ `persist/remove`, Hibernate –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–µ–Ω—å—à–µ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤.
## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ —Å–æ–≤–µ—Ç—ã
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `CascadeType.ALL` –Ω–∞ `@ManyToOne` –∏–ª–∏ `@OneToOne`, –µ—Å–ª–∏ —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—è –≤–º–µ—Å—Ç–µ —Å –¥–µ—Ç—å–º–∏ —Å–ª—É—á–∞–π–Ω–æ.
- –û–±—ã—á–Ω–æ **PERSIST –∏ MERGE** –±–µ–∑–æ–ø–∞—Å–Ω—ã –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π (`@OneToMany`).
- **REMOVE** –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ —Ç–∞–º, –≥–¥–µ –¥–æ—á–µ—Ä–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–æ–≥–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç —Ä–æ–¥–∏—Ç–µ–ª—é (composition).